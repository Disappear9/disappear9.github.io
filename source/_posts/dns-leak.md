---
title: 当DNS泄漏让VPN不再安全，我们该怎么办？
date: 2015/5/19 10:40:35
categories:
- 网络安全
tags:
- 网络安全
---

**当你想要匿名上网时，用VPN是最简单的解决方案——你的IP地址，服务提供商和位置都会隐藏起来。但是，DNS泄漏完全可以让藏在VPN之后的你原形毕露。**

![](/pictures/dns-leak/14319212852185.jpg)

**科普：什么是DNS泄漏**

域名系统（DNS）是关联网址（如www.makeuseof.com）和IP地址（54.221.192.241）的系统。当你使用浏览器访问一个网站，它会向DNS服务器发送你输入的地址请求，然后DNS服务器会指出其正确的IP地址。这是互联网如何工作的一个关键部分。

通常情况下，DNS服务器是由你的互联网服务提供商（ISP）所提供，这意味着他们可以监控、记录任何你发送到服务器的请求。当您使用虚拟专用网络（VPN）的时候，该DNS请求应该通过你的VPN被定向到一个匿名的DNS服务器防止ISP监视你的连接。

不幸的是，有时你的浏览器会忽视你打开的VPN，并会直接发送DNS请求到您的ISP。这就是所谓的一个DNS泄漏。这会导致你认为你已经匿名了、网络监控不到你，但事实上你不并会得到保护。

**分析**

如果你的计算机使用默认设置，并没有通过VPN的DNS服务器发送DNS请求，那么这个泄漏很难看出。你需要使用一个泄漏测试。这有一个网页你可以测试一下http://www.dnsleaktest.com

<!--more-->

进入该网站，点击“标准测试”（如果你想了解更多监视的内容，您可以点击“扩展测试”——相对来说比较全面，但需要更长的时间）。如果看到自己的国家和ISP的结果显示在页面上，就可以知道，你的ISP在监视您的连接。

![](/pictures/dns-leak/14319210891769.jpg)

如何防止泄漏
------
**改变DNS服务器**

如果你的默认DNS服务器是由你的ISP分配的，那么防止他们看到你在网上做了什么的最简单的方法之一是改变你的DNS服务器。即使你不担心DNS泄漏，更改默认的DNS服务器也是有好处的，因为这可以提高你的上网速度。

下面是维护好的DNS服务器，可以为您提供高性能和高安全性：
>OpenDns（首选：208.67.222.222，候补：208.67.222.220）
Comodo Secure DNS（首选：8.26.56.26，候补：8.20.247.20）
谷歌公共DNS（首选：8.8.8.8，候补：8.8.4.4）

**使用带有DNS泄漏保护功能的VPN**

一些VPN会监视你的DNS请求以确保能够通过VPN，如果你想看看是否你的VPN有这种保护，打开设置，你就会看到一个检查防范DNS漏洞的选项。

那么，哪些VPN会有这种DNS泄漏保护？根据BestVPNz.com，TorGuard（这两个网站向我们例举了最好的vpn）所提供的信息，VPNArea，PureVPN，ExpressVPN，VPN.AC和LiquidVPN都提供了这种保护功能。如果你正在使用这些VPN中的一个，请确保你的设置是否正确。如果你没有以上vpn并担心ISP监控你的行踪，你可能需要要考虑换个vpn。

**使用VPN监控软件**

某些VPN监控软件还包括修复DNS泄漏。 VPNCheck Pro版本和OpenVPN Watchdog有这个功能。

由于只有收费软件有修复泄漏这样的选项，很可能很多人一般不会考虑去使用。除非你使用了VPN监控软件确保您的VPN连接是完全安全的。



**禁用Teredo**

Teredo是一个基于Windows的技术，本质上说，它允许转换两个IP通信协议：IPv4和IPv6。然而，Teredo有时会引起DNS泄漏，所以你可能要禁用它。

打开命令行，然后键入以下命令：
>netsh interface teredo set state disabled

如果哪天你需要重新启用Teredo，你可以使用这个命令：
>netsh interface teredo set state type=default

**结语**

如果你使用VPN， DNS泄漏可能会泄漏更多你想不到的信息，所以同志们，让我们堵住这个洞，不让信息泄漏出去。



<u>*参考来源makeuseof 译/江湖小吓 转载请注明来自FreeBuf黑客与极客（Freebuf.COM）*</u>
